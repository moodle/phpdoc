<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: PhpXmlRpc\Encoder Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.4</span>
   </div>
   <div id="projectbrief">Moodle 4.4+ (Build: 20240530) (1291869f907)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/dac/namespace_php_xml_rpc.html">PhpXmlRpc</a></li><li class="navelem"><a class="el" href="../../d1/dba/class_php_xml_rpc_1_1_encoder.html">Encoder</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d9/db9/class_php_xml_rpc_1_1_encoder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PhpXmlRpc\Encoder Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adb2124abafeb4b7505ef96cf8489d637" id="r_adb2124abafeb4b7505ef96cf8489d637"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb2124abafeb4b7505ef96cf8489d637">decode</a> ($xmlrpcVal, $options=array())</td></tr>
<tr class="memdesc:adb2124abafeb4b7505ef96cf8489d637"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes an xml-rpc Value in object instance and translates it into native PHP types, recursively.  <br /></td></tr>
<tr class="separator:adb2124abafeb4b7505ef96cf8489d637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4856eac7e58113580160b2a6f32ff1e0" id="r_a4856eac7e58113580160b2a6f32ff1e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4856eac7e58113580160b2a6f32ff1e0">decodeXml</a> ($xmlVal, $options=array())</td></tr>
<tr class="memdesc:a4856eac7e58113580160b2a6f32ff1e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the xml representation of a method response, method request or single xml-rpc value into the appropriate object (a.k.a.  <br /></td></tr>
<tr class="separator:a4856eac7e58113580160b2a6f32ff1e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa60bb4e9ab0b740239030492cc69601a" id="r_aa60bb4e9ab0b740239030492cc69601a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa60bb4e9ab0b740239030492cc69601a">encode</a> ($phpVal, $options=array())</td></tr>
<tr class="memdesc:aa60bb4e9ab0b740239030492cc69601a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes native php types and encodes them into xml-rpc Value objects, recursively.  <br /></td></tr>
<tr class="separator:aa60bb4e9ab0b740239030492cc69601a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adb2124abafeb4b7505ef96cf8489d637" name="adb2124abafeb4b7505ef96cf8489d637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb2124abafeb4b7505ef96cf8489d637">&#9670;&#160;</a></span>decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PhpXmlRpc\Encoder::decode </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$xmlrpcVal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$options</em></span><span class="paramdefsep"> = </span><span class="paramdefval">array()</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Takes an xml-rpc Value in object instance and translates it into native PHP types, recursively. </p>
<p>Works with xml-rpc Request objects as input, too. Xmlrpc dateTime values will be converted to strings or DateTime objects depending on an $options parameter Supports i8 and NIL xml-rpc values without the need for specific options. Both xml-rpc arrays and structs are decoded into PHP arrays, with the exception described below: Given proper options parameter, can rebuild generic php object instances (provided those have been encoded to xml-rpc format using a corresponding option in php_xmlrpc_encode()). PLEASE NOTE that rebuilding php objects involves calling their constructor function. This means that the remote communication end can decide which php code will get executed on your server, leaving the door possibly open to 'php-injection' style of attacks (provided you have some classes defined on your server that might wreak havoc if instances are built outside an appropriate context). Make sure you trust the remote server/client before enabling this!</p>
<dl class="section author"><dt>Author</dt><dd>Dan Libby</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Value&#160;|&#160;Request</td><td class="paramname">$xmlrpcVal</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>accepted elements:<ul>
<li>'decode_php_objs': if set in the options array, xml-rpc structs can be decoded into php objects, see the details above;</li>
<li>'dates_as_objects': when set xml-rpc dateTimes are decoded as php DateTime objects</li>
<li>'extension_api': reserved for usage by phpxmlrpc-polyfill </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Feature creep &ndash; add an option to allow converting xml-rpc dateTime values to unix timestamps (integers) </p>

</div>
</div>
<a id="a4856eac7e58113580160b2a6f32ff1e0" name="a4856eac7e58113580160b2a6f32ff1e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4856eac7e58113580160b2a6f32ff1e0">&#9670;&#160;</a></span>decodeXml()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PhpXmlRpc\Encoder::decodeXml </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$xmlVal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$options</em></span><span class="paramdefsep"> = </span><span class="paramdefval">array()</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the xml representation of a method response, method request or single xml-rpc value into the appropriate object (a.k.a. </p>
<p>deserialize).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$xmlVal</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>unused atm </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Value|Request|Response|false</td><td>false on error, or an instance of either Value, Request or Response</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000193">Todo</a></b></dt><dd><p class="startdd">is this a good name/class for this method? It does something quite different from 'decode' after all (returning objects vs returns plain php values)... In fact, it belongs rather to a <a class="el" href="../../dc/db7/class_parser.html" title="HTTP Response Parser.">Parser</a> class </p>
<p class="interdd">feature creep &ndash; we should allow an option to return php native types instead of <a class="el" href="../../d5/dac/namespace_php_xml_rpc.html" title="&#160;">PhpXmlRpc</a> objects instances </p>
<p class="interdd">feature creep &ndash; allow source charset to be passed in as an option, in case the xml misses its declaration </p>
<p class="enddd">feature creep &ndash; allow expected type (val/req/resp) to be passed in as an option </p>
</dd></dl>

</div>
</div>
<a id="aa60bb4e9ab0b740239030492cc69601a" name="aa60bb4e9ab0b740239030492cc69601a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa60bb4e9ab0b740239030492cc69601a">&#9670;&#160;</a></span>encode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PhpXmlRpc\Encoder::encode </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$phpVal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$options</em></span><span class="paramdefsep"> = </span><span class="paramdefval">array()</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Takes native php types and encodes them into xml-rpc Value objects, recursively. </p>
<p>PHP strings, integers, floats and booleans have a straightforward encoding - note that integers will <em>not</em> be converted to xml-rpc &lt;i8&gt; elements, even if they exceed the 32-bit range. PHP arrays will be encoded to either xml-rpc structs or arrays, depending on whether they are hashes or plain 0..N integer indexed. PHP objects will be encoded into xml-rpc structs, except if they implement DateTimeInterface, in which case they will be encoded as dateTime values. <a class="el" href="../../d0/d9a/class_php_xml_rpc_1_1_value.html">PhpXmlRpc\Value</a> objects will not be double-encoded - which makes it possible to pass in a pre-created base64 Value as part of a php array. If given a proper $options parameter, php object instances will be encoded into 'special' xml-rpc values, that can later be decoded into php object instances by calling php_xmlrpc_decode() with a corresponding option. PHP resource and NULL variables will be converted into uninitialized Value objects (which will lead to invalid xml-rpc when later serialized); to support encoding of the latter use the appropriate $options parameter.</p>
<dl class="section author"><dt>Author</dt><dd>Dan Libby</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$phpVal</td><td>the value to be converted into an xml-rpc value object </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>can include:<ul>
<li>'encode_php_objs' when set, some out-of-band info will be added to the xml produced by serializing the built Value, which can later be decoced by this library to rebuild an instance of the same php object</li>
<li>'auto_dates': when set, any string which respects the xml-rpc datetime format will be converted to a dateTime Value</li>
<li>'null_extension': when set, php NULL values will be converted to an xml-rpc &lt;NIL&gt; (or &lt;EX:NIL&gt;) Value</li>
<li>'extension_api': reserved for usage by phpxmlrpc-polyfill </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Value</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Feature creep &ndash; could support more types via optional type argument (string =&gt; datetime support has been added, ??? =&gt; base64 not yet). Also: allow auto-encoding of integers to i8 when too-big to fit into i4 </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/phpxmlrpc/<b>Encoder.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 2 2024 02:49:55 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
