<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: cache_loader_with_locking Interface Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.4</span>
   </div>
   <div id="projectbrief">Moodle 4.4+ (Build: 20240516) (bcae2164acd)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d4/d2d/interfacecache__loader__with__locking-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cache_loader_with_locking Interface Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../dc/d67/class_cache.html" title="Used to create cache objects.">Cache</a> Loader supporting locking.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for cache_loader_with_locking:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d4/d33/interfacecache__loader__with__locking.png" usemap="#cache_5Floader_5Fwith_5Flocking_map" alt=""/>
  <map id="cache_5Floader_5Fwith_5Flocking_map" name="cache_5Floader_5Fwith_5Flocking_map">
<area href="../../da/dc9/classcache__application.html" title="An application cache." alt="cache_application" shape="rect" coords="0,56,166,80"/>
<area href="../../dd/d61/classcache__disabled.html" title="Required as it is needed for cache_config_disabled which extends cache_config_writer." alt="cache_disabled" shape="rect" coords="176,56,342,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2148e559027cbd264c3fe9b9ef917a7f" id="r_a2148e559027cbd264c3fe9b9ef917a7f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2148e559027cbd264c3fe9b9ef917a7f">acquire_lock</a> ($key)</td></tr>
<tr class="memdesc:a2148e559027cbd264c3fe9b9ef917a7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires a lock for the given key.  <br /></td></tr>
<tr class="separator:a2148e559027cbd264c3fe9b9ef917a7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84b509f1921394363f34b400eb288630" id="r_a84b509f1921394363f34b400eb288630"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84b509f1921394363f34b400eb288630">check_lock_state</a> ($key)</td></tr>
<tr class="memdesc:a84b509f1921394363f34b400eb288630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the cache loader owns the lock for the given key.  <br /></td></tr>
<tr class="separator:a84b509f1921394363f34b400eb288630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada462e21ecf0e018304cef1cc521e9a8" id="r_ada462e21ecf0e018304cef1cc521e9a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada462e21ecf0e018304cef1cc521e9a8">release_lock</a> ($key)</td></tr>
<tr class="memdesc:ada462e21ecf0e018304cef1cc521e9a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the lock for the given key.  <br /></td></tr>
<tr class="separator:ada462e21ecf0e018304cef1cc521e9a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../dc/d67/class_cache.html" title="Used to create cache objects.">Cache</a> Loader supporting locking. </p>
<p>This interface should be given to classes already implementing <a class="el" href="../../d5/d0c/interfacecache__loader.html" title="Cache Loader.">cache_loader</a> that also wish to support locking. It outlines the required structure for utilising locking functionality when using a cache.</p>
<p>Can be implemented by any class already implementing the <a class="el" href="../../d5/d0c/interfacecache__loader.html" title="Cache Loader.">cache_loader</a> interface. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2148e559027cbd264c3fe9b9ef917a7f" name="a2148e559027cbd264c3fe9b9ef917a7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2148e559027cbd264c3fe9b9ef917a7f">&#9670;&#160;</a></span>acquire_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cache_loader_with_locking::acquire_lock </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquires a lock for the given key. </p>
<p>Please note that this happens automatically if the cache definition requires locking. it is still made a public method so that adhoc caches can use it if they choose. However this doesn't guarantee consistent access. It will become the responsibility of the calling code to ensure locks are acquired, checked, and released.</p>
<p>Prior to <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4,3 this function used to return false if the lock cannot be obtained. It now always returns true, and throws an exception if the lock cannot be obtained.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;int</td><td class="paramname">$key</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Always returns true (for backwards compatibility) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>If the lock cannot be obtained after a timeout </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../da/dc9/classcache__application.html#a47e80efceea8cce310bafdaa5b10a03e">cache_application</a>, and <a class="el" href="../../dd/d61/classcache__disabled.html#aac23646d662a920d247c186cc7651738">cache_disabled</a>.</p>

</div>
</div>
<a id="a84b509f1921394363f34b400eb288630" name="a84b509f1921394363f34b400eb288630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84b509f1921394363f34b400eb288630">&#9670;&#160;</a></span>check_lock_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cache_loader_with_locking::check_lock_state </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the cache loader owns the lock for the given key. </p>
<p>Please note that this happens automatically if the cache definition requires locking. it is still made a public method so that adhoc caches can use it if they choose. However this doesn't guarantee consistent access. It will become the responsibility of the calling code to ensure locks are acquired, checked, and released.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;int</td><td class="paramname">$key</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if this code has the lock, false if there is a lock but this code doesn't have it, null if there is no lock. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../da/dc9/classcache__application.html#a6a4712cc630585d28723968a76271a36">cache_application</a>, and <a class="el" href="../../dd/d61/classcache__disabled.html#a923b75e3c07371c0e21207d44a185846">cache_disabled</a>.</p>

</div>
</div>
<a id="ada462e21ecf0e018304cef1cc521e9a8" name="ada462e21ecf0e018304cef1cc521e9a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada462e21ecf0e018304cef1cc521e9a8">&#9670;&#160;</a></span>release_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cache_loader_with_locking::release_lock </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the lock for the given key. </p>
<p>Please note that this happens automatically if the cache definition requires locking. it is still made a public method so that adhoc caches can use it if they choose. However this doesn't guarantee consistent access. It will become the responsibility of the calling code to ensure locks are acquired, checked, and released.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;int</td><td class="paramname">$key</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the lock has been released, false if there was a problem releasing the lock. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../da/dc9/classcache__application.html#adb520f88d07f2e7b9c7afb3ff9919d3b">cache_application</a>, and <a class="el" href="../../dd/d61/classcache__disabled.html#a8a2d246390b99391639c9f25fe6fde5b">cache_disabled</a>.</p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>cache/classes/<b>interfaces.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 19 2024 02:42:28 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
