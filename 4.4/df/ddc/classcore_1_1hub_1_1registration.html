<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\hub\registration Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.4</span>
   </div>
   <div id="projectbrief">Moodle 4.4.1 (Build: 20240610) (db07c09afc5)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../d7/db6/namespacecore_1_1hub.html">hub</a></li><li class="navelem"><a class="el" href="../../df/ddc/classcore_1_1hub_1_1registration.html">registration</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d5/d67/classcore_1_1hub_1_1registration-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\hub\registration Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Methods to use when registering the site at the moodle sites directory.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aad76de4a406b8c02d9dbda6a37314290" id="r_aad76de4a406b8c02d9dbda6a37314290"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad76de4a406b8c02d9dbda6a37314290">confirm_registration</a> ($token, $newtoken, $hubname)</td></tr>
<tr class="memdesc:aad76de4a406b8c02d9dbda6a37314290"><td class="mdescLeft">&#160;</td><td class="mdescRight">Confirms registration by the sites directory.  <br /></td></tr>
<tr class="separator:aad76de4a406b8c02d9dbda6a37314290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a360154053b71ba49a890e53e6f9d8a71" id="r_a360154053b71ba49a890e53e6f9d8a71"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a360154053b71ba49a890e53e6f9d8a71">get_last_updated</a> ()</td></tr>
<tr class="memdesc:a360154053b71ba49a890e53e6f9d8a71"><td class="mdescLeft">&#160;</td><td class="mdescRight">When was the registration last updated.  <br /></td></tr>
<tr class="separator:a360154053b71ba49a890e53e6f9d8a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13309543a99d3685abe402302c09836" id="r_af13309543a99d3685abe402302c09836"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af13309543a99d3685abe402302c09836">get_moodlenet_info</a> ()</td></tr>
<tr class="memdesc:af13309543a99d3685abe402302c09836"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns information about the sites directory.  <br /></td></tr>
<tr class="separator:af13309543a99d3685abe402302c09836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02aa65be4f76a8b5e6426f01b96723c0" id="r_a02aa65be4f76a8b5e6426f01b96723c0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02aa65be4f76a8b5e6426f01b96723c0">get_new_registration_fields</a> ()</td></tr>
<tr class="memdesc:a02aa65be4f76a8b5e6426f01b96723c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of the fields in the registration form that were added since registration or last manual update.  <br /></td></tr>
<tr class="separator:a02aa65be4f76a8b5e6426f01b96723c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c0d5a970e20e44630d3485de282ce47" id="r_a7c0d5a970e20e44630d3485de282ce47"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c0d5a970e20e44630d3485de282ce47">get_site_info</a> ($defaults=[])</td></tr>
<tr class="memdesc:a7c0d5a970e20e44630d3485de282ce47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates and prepares site information to send to the sites directory as a part of registration.  <br /></td></tr>
<tr class="separator:a7c0d5a970e20e44630d3485de282ce47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01476c8068434c6e0cbe22957b38527f" id="r_a01476c8068434c6e0cbe22957b38527f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01476c8068434c6e0cbe22957b38527f">get_stats_summary</a> ($siteinfo)</td></tr>
<tr class="memdesc:a01476c8068434c6e0cbe22957b38527f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Human-readable summary of data that will be sent to the sites directory.  <br /></td></tr>
<tr class="separator:a01476c8068434c6e0cbe22957b38527f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a189ee616e4ec7c97d4f589b0e9cd7a" id="r_a5a189ee616e4ec7c97d4f589b0e9cd7a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a189ee616e4ec7c97d4f589b0e9cd7a">get_token</a> ($strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:a5a189ee616e4ec7c97d4f589b0e9cd7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns registration token.  <br /></td></tr>
<tr class="separator:a5a189ee616e4ec7c97d4f589b0e9cd7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ed3a92e2b8b939b1a4eb651868fbfc" id="r_ae6ed3a92e2b8b939b1a4eb651868fbfc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6ed3a92e2b8b939b1a4eb651868fbfc">is_registered</a> ()</td></tr>
<tr class="memdesc:ae6ed3a92e2b8b939b1a4eb651868fbfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if site is registered.  <br /></td></tr>
<tr class="separator:ae6ed3a92e2b8b939b1a4eb651868fbfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fde5257a5928540708806bad3cf9ca4" id="r_a7fde5257a5928540708806bad3cf9ca4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fde5257a5928540708806bad3cf9ca4">register</a> ($returnurl)</td></tr>
<tr class="memdesc:a7fde5257a5928540708806bad3cf9ca4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a site.  <br /></td></tr>
<tr class="separator:a7fde5257a5928540708806bad3cf9ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0424b57db6c7e5f1d2db8c3f72e6ecb4" id="r_a0424b57db6c7e5f1d2db8c3f72e6ecb4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0424b57db6c7e5f1d2db8c3f72e6ecb4">registration_reminder</a> ($url)</td></tr>
<tr class="memdesc:a0424b57db6c7e5f1d2db8c3f72e6ecb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Redirect to the site registration form if it's a new install, upgrade or registration needs updating.  <br /></td></tr>
<tr class="separator:a0424b57db6c7e5f1d2db8c3f72e6ecb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85981dd91d74e477bc1bd69de11b8866" id="r_a85981dd91d74e477bc1bd69de11b8866"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85981dd91d74e477bc1bd69de11b8866">require_registration</a> ()</td></tr>
<tr class="memdesc:a85981dd91d74e477bc1bd69de11b8866"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as get_registration except it throws exception if site not registered.  <br /></td></tr>
<tr class="separator:a85981dd91d74e477bc1bd69de11b8866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdfce6a48f9daf7b61cf09336ac561e8" id="r_afdfce6a48f9daf7b61cf09336ac561e8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afdfce6a48f9daf7b61cf09336ac561e8">reset_site_identifier</a> ($token)</td></tr>
<tr class="memdesc:afdfce6a48f9daf7b61cf09336ac561e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a new token for the site that is not registered.  <br /></td></tr>
<tr class="separator:afdfce6a48f9daf7b61cf09336ac561e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3488334da4f95a0cb4efe77c403190d8" id="r_a3488334da4f95a0cb4efe77c403190d8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3488334da4f95a0cb4efe77c403190d8">reset_token</a> ()</td></tr>
<tr class="memdesc:a3488334da4f95a0cb4efe77c403190d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the registration token without changing site identifier so site can be re-registered.  <br /></td></tr>
<tr class="separator:a3488334da4f95a0cb4efe77c403190d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a716e5fdbeedceb87573057d10f0fa108" id="r_a716e5fdbeedceb87573057d10f0fa108"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a716e5fdbeedceb87573057d10f0fa108">save_site_info</a> ($formdata)</td></tr>
<tr class="memdesc:a716e5fdbeedceb87573057d10f0fa108"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save registration info locally so it can be retrieved when registration needs to be updated.  <br /></td></tr>
<tr class="separator:a716e5fdbeedceb87573057d10f0fa108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b0a07cf4bd6306598e5782aa39e7f8" id="r_a26b0a07cf4bd6306598e5782aa39e7f8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26b0a07cf4bd6306598e5782aa39e7f8">show_after_install</a> ($markasviewed=null)</td></tr>
<tr class="memdesc:a26b0a07cf4bd6306598e5782aa39e7f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does admin need to be redirected to the registration page after install?  <br /></td></tr>
<tr class="separator:a26b0a07cf4bd6306598e5782aa39e7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf28b9bc83a6415351c61fec08b6f7e" id="r_a7cf28b9bc83a6415351c61fec08b6f7e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cf28b9bc83a6415351c61fec08b6f7e">site_privacy_options</a> ()</td></tr>
<tr class="memdesc:a7cf28b9bc83a6415351c61fec08b6f7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the options for site privacy form element to use in registration form.  <br /></td></tr>
<tr class="separator:a7cf28b9bc83a6415351c61fec08b6f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad911f203a941ca005f5969713b8d64d4" id="r_ad911f203a941ca005f5969713b8d64d4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad911f203a941ca005f5969713b8d64d4">unregister</a> ($unpublishalladvertisedcourses, $unpublishalluploadedcourses)</td></tr>
<tr class="memdesc:ad911f203a941ca005f5969713b8d64d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister site.  <br /></td></tr>
<tr class="separator:ad911f203a941ca005f5969713b8d64d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fdb78366f250dfbef6685aa0f71bf6" id="r_ad4fdb78366f250dfbef6685aa0f71bf6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4fdb78366f250dfbef6685aa0f71bf6">update_cron</a> ()</td></tr>
<tr class="memdesc:ad4fdb78366f250dfbef6685aa0f71bf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates site registration via cron.  <br /></td></tr>
<tr class="separator:ad4fdb78366f250dfbef6685aa0f71bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83a5f43ef45784911909751a2ca864d" id="r_aa83a5f43ef45784911909751a2ca864d"><td class="memItemLeft" align="right" valign="top"><a id="aa83a5f43ef45784911909751a2ca864d" name="aa83a5f43ef45784911909751a2ca864d"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>update_manual</b> ()</td></tr>
<tr class="memdesc:aa83a5f43ef45784911909751a2ca864d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates site registration when "Update reigstration" button is clicked by admin. <br /></td></tr>
<tr class="separator:aa83a5f43ef45784911909751a2ca864d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af967324f88deacc3dc0b33f3ca4845bb" id="r_af967324f88deacc3dc0b33f3ca4845bb"><td class="memItemLeft" align="right" valign="top">array const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af967324f88deacc3dc0b33f3ca4845bb">CONFIRM_NEW_FIELDS</a></td></tr>
<tr class="memdesc:af967324f88deacc3dc0b33f3ca4845bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of new FORM_FIELDS or siteinfo fields added indexed by the version when they were added.  <br /></td></tr>
<tr class="separator:af967324f88deacc3dc0b33f3ca4845bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea3d7b381758b01bc7637e4580cba64" id="r_a9ea3d7b381758b01bc7637e4580cba64"><td class="memItemLeft" align="right" valign="top">array const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ea3d7b381758b01bc7637e4580cba64">FORM_FIELDS</a></td></tr>
<tr class="memdesc:a9ea3d7b381758b01bc7637e4580cba64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fields used in a site registration form.  <br /></td></tr>
<tr class="separator:a9ea3d7b381758b01bc7637e4580cba64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa369385433f5b0760639b7891ec91ceb" id="r_aa369385433f5b0760639b7891ec91ceb"><td class="memItemLeft" align="right" valign="top"><a id="aa369385433f5b0760639b7891ec91ceb" name="aa369385433f5b0760639b7891ec91ceb"></a>
string const&#160;</td><td class="memItemRight" valign="bottom"><b>HUB_SITELINKPUBLISHED</b> = 'linked'</td></tr>
<tr class="memdesc:aa369385433f5b0760639b7891ec91ceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Site privacy: public and global. <br /></td></tr>
<tr class="separator:aa369385433f5b0760639b7891ec91ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b76dd5121d19fac828654a86b8faff3" id="r_a8b76dd5121d19fac828654a86b8faff3"><td class="memItemLeft" align="right" valign="top"><a id="a8b76dd5121d19fac828654a86b8faff3" name="a8b76dd5121d19fac828654a86b8faff3"></a>
string const&#160;</td><td class="memItemRight" valign="bottom"><b>HUB_SITENAMEPUBLISHED</b> = 'named'</td></tr>
<tr class="memdesc:a8b76dd5121d19fac828654a86b8faff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Site privacy: public. <br /></td></tr>
<tr class="separator:a8b76dd5121d19fac828654a86b8faff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6b7af44e2b96c7db47c5e472af0de50" id="r_ab6b7af44e2b96c7db47c5e472af0de50"><td class="memItemLeft" align="right" valign="top"><a id="ab6b7af44e2b96c7db47c5e472af0de50" name="ab6b7af44e2b96c7db47c5e472af0de50"></a>
string const&#160;</td><td class="memItemRight" valign="bottom"><b>HUB_SITENOTPUBLISHED</b> = 'notdisplayed'</td></tr>
<tr class="memdesc:ab6b7af44e2b96c7db47c5e472af0de50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Site privacy: not displayed. <br /></td></tr>
<tr class="separator:ab6b7af44e2b96c7db47c5e472af0de50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a7faa3b83449b8dbadc4d2eeaa497953e" id="r_a7faa3b83449b8dbadc4d2eeaa497953e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7faa3b83449b8dbadc4d2eeaa497953e">get_registration</a> ($confirmed=true)</td></tr>
<tr class="memdesc:a7faa3b83449b8dbadc4d2eeaa497953e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get site registration.  <br /></td></tr>
<tr class="separator:a7faa3b83449b8dbadc4d2eeaa497953e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a960365ee76376f273f0644aeb2b3d28f" id="r_a960365ee76376f273f0644aeb2b3d28f"><td class="memItemLeft" align="right" valign="top"><a id="a960365ee76376f273f0644aeb2b3d28f" name="a960365ee76376f273f0644aeb2b3d28f"></a>
static stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$registration</b> = null</td></tr>
<tr class="memdesc:a960365ee76376f273f0644aeb2b3d28f"><td class="mdescLeft">&#160;</td><td class="mdescRight">cached site registration information <br /></td></tr>
<tr class="separator:a960365ee76376f273f0644aeb2b3d28f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Methods to use when registering the site at the moodle sites directory. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2017 Marina Glancy </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aad76de4a406b8c02d9dbda6a37314290" name="aad76de4a406b8c02d9dbda6a37314290"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad76de4a406b8c02d9dbda6a37314290">&#9670;&#160;</a></span>confirm_registration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::confirm_registration </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$newtoken</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$hubname</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Confirms registration by the sites directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$token</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$newtoken</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$hubname</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a360154053b71ba49a890e53e6f9d8a71" name="a360154053b71ba49a890e53e6f9d8a71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a360154053b71ba49a890e53e6f9d8a71">&#9670;&#160;</a></span>get_last_updated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::get_last_updated </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When was the registration last updated. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|null</td><td>timestamp or null if site is not registered </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af13309543a99d3685abe402302c09836" name="af13309543a99d3685abe402302c09836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af13309543a99d3685abe402302c09836">&#9670;&#160;</a></span>get_moodlenet_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::get_moodlenet_info </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns information about the sites directory. </p>
<p>Example of the return array: { "courses": 384, "description": "Official moodle sites directory", "downloadablecourses": 0, "enrollablecourses": 0, "hublogo": 1, "language": "en", "name": "moodle", "sites": 274175, "url": "https://stats.moodle.org", "imgurl": "https://stats.moodle.org/local/hub/webservice/download.php?filetype=hubscreenshot" }</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a02aa65be4f76a8b5e6426f01b96723c0" name="a02aa65be4f76a8b5e6426f01b96723c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02aa65be4f76a8b5e6426f01b96723c0">&#9670;&#160;</a></span>get_new_registration_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::get_new_registration_fields </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the list of the fields in the registration form that were added since registration or last manual update. </p>
<p>If this list is not empty the scheduled task will be paused and admin will be reminded to update registration manually.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7faa3b83449b8dbadc4d2eeaa497953e" name="a7faa3b83449b8dbadc4d2eeaa497953e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7faa3b83449b8dbadc4d2eeaa497953e">&#9670;&#160;</a></span>get_registration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::get_registration </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$confirmed</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get site registration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$confirmed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7c0d5a970e20e44630d3485de282ce47" name="a7c0d5a970e20e44630d3485de282ce47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c0d5a970e20e44630d3485de282ce47">&#9670;&#160;</a></span>get_site_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::get_site_info </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$defaults</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates and prepares site information to send to the sites directory as a part of registration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$defaults</td><td>default values for inputs in the registration form (if site was never registered before) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>site info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a01476c8068434c6e0cbe22957b38527f" name="a01476c8068434c6e0cbe22957b38527f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01476c8068434c6e0cbe22957b38527f">&#9670;&#160;</a></span>get_stats_summary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::get_stats_summary </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$siteinfo</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Human-readable summary of data that will be sent to the sites directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$siteinfo</td><td>result of get_site_info() </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5a189ee616e4ec7c97d4f589b0e9cd7a" name="a5a189ee616e4ec7c97d4f589b0e9cd7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a189ee616e4ec7c97d4f589b0e9cd7a">&#9670;&#160;</a></span>get_token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::get_token </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$strictness</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns registration token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>if set to MUST_EXIST and site is not registered will throw an exception </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">null</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6ed3a92e2b8b939b1a4eb651868fbfc" name="ae6ed3a92e2b8b939b1a4eb651868fbfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ed3a92e2b8b939b1a4eb651868fbfc">&#9670;&#160;</a></span>is_registered()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::is_registered </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if site is registered. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7fde5257a5928540708806bad3cf9ca4" name="a7fde5257a5928540708806bad3cf9ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fde5257a5928540708806bad3cf9ca4">&#9670;&#160;</a></span>register()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::register </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$returnurl</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers a site. </p>
<p>This method will make sure that unconfirmed registration record is created and then redirect to registration script on the sites directory. The sites directory will check that the site is accessible, register it and redirect back to /admin/registration/confirmregistration.php</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$returnurl</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0424b57db6c7e5f1d2db8c3f72e6ecb4" name="a0424b57db6c7e5f1d2db8c3f72e6ecb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0424b57db6c7e5f1d2db8c3f72e6ecb4">&#9670;&#160;</a></span>registration_reminder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::registration_reminder </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$url</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Redirect to the site registration form if it's a new install, upgrade or registration needs updating. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;<a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td class="paramname">$url</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a85981dd91d74e477bc1bd69de11b8866" name="a85981dd91d74e477bc1bd69de11b8866"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85981dd91d74e477bc1bd69de11b8866">&#9670;&#160;</a></span>require_registration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::require_registration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Same as get_registration except it throws exception if site not registered. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afdfce6a48f9daf7b61cf09336ac561e8" name="afdfce6a48f9daf7b61cf09336ac561e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdfce6a48f9daf7b61cf09336ac561e8">&#9670;&#160;</a></span>reset_site_identifier()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::reset_site_identifier </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate a new token for the site that is not registered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$token</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3488334da4f95a0cb4efe77c403190d8" name="a3488334da4f95a0cb4efe77c403190d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3488334da4f95a0cb4efe77c403190d8">&#9670;&#160;</a></span>reset_token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::reset_token </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets the registration token without changing site identifier so site can be re-registered. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a716e5fdbeedceb87573057d10f0fa108" name="a716e5fdbeedceb87573057d10f0fa108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a716e5fdbeedceb87573057d10f0fa108">&#9670;&#160;</a></span>save_site_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::save_site_info </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$formdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save registration info locally so it can be retrieved when registration needs to be updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$formdata</td><td>data from <a class="el" href="">site_registration_form</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26b0a07cf4bd6306598e5782aa39e7f8" name="a26b0a07cf4bd6306598e5782aa39e7f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26b0a07cf4bd6306598e5782aa39e7f8">&#9670;&#160;</a></span>show_after_install()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::show_after_install </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$markasviewed</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Does admin need to be redirected to the registration page after install? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool&#160;|&#160;null</td><td class="paramname">$markasviewed</td><td>if set to true will mark the registration form as viewed and admin will not be redirected to the registration form again (regardless of whether the site was registered or not). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7cf28b9bc83a6415351c61fec08b6f7e" name="a7cf28b9bc83a6415351c61fec08b6f7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cf28b9bc83a6415351c61fec08b6f7e">&#9670;&#160;</a></span>site_privacy_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::site_privacy_options </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the options for site privacy form element to use in registration form. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad911f203a941ca005f5969713b8d64d4" name="ad911f203a941ca005f5969713b8d64d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad911f203a941ca005f5969713b8d64d4">&#9670;&#160;</a></span>unregister()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::unregister </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$unpublishalladvertisedcourses</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$unpublishalluploadedcourses</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregister site. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$unpublishalladvertisedcourses</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$unpublishalluploadedcourses</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad4fdb78366f250dfbef6685aa0f71bf6" name="ad4fdb78366f250dfbef6685aa0f71bf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4fdb78366f250dfbef6685aa0f71bf6">&#9670;&#160;</a></span>update_cron()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\hub\registration::update_cron </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates site registration via cron. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af967324f88deacc3dc0b33f3ca4845bb" name="af967324f88deacc3dc0b33f3ca4845bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af967324f88deacc3dc0b33f3ca4845bb">&#9670;&#160;</a></span>CONFIRM_NEW_FIELDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">array const core\hub\registration::CONFIRM_NEW_FIELDS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= [</div>
<div class="line">        2017092200 =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;commnews&#39;</span>, </div>
<div class="line">            <span class="stringliteral">&#39;mobileservicesenabled&#39;</span>, <span class="stringliteral">&#39;mobilenotificationsenabled&#39;</span>, <span class="stringliteral">&#39;registereduserdevices&#39;</span>, <span class="stringliteral">&#39;registeredactiveuserdevices&#39;</span> </div>
<div class="line">        ],</div>
<div class="line">        </div>
<div class="line">        2019022200 =&gt; [<span class="stringliteral">&#39;analyticsenabledmodels&#39;</span>, <span class="stringliteral">&#39;analyticspredictions&#39;</span>, <span class="stringliteral">&#39;analyticsactions&#39;</span>, <span class="stringliteral">&#39;analyticsactionsnotuseful&#39;</span>],</div>
<div class="line">        </div>
<div class="line">        2020022600 =&gt; [<span class="stringliteral">&#39;activeusers&#39;</span>, <span class="stringliteral">&#39;activeparticipantnumberaverage&#39;</span>],</div>
<div class="line">        </div>
<div class="line">        2023021700 =&gt; [<span class="stringliteral">&#39;dbtype&#39;</span>, <span class="stringliteral">&#39;coursesnodates&#39;</span>, <span class="stringliteral">&#39;sitetheme&#39;</span>, <span class="stringliteral">&#39;primaryauthtype&#39;</span>],</div>
<div class="line">    ]</div>
</div><!-- fragment -->
<p>List of new FORM_FIELDS or siteinfo fields added indexed by the version when they were added. </p>
<p>If site was already registered, admin will be promted to confirm new registration data manually. Until registration is manually confirmed, the scheduled task updating registration will be paused. Keys of this array are not important as long as they increment, use current date to avoid confusions. </p>

</div>
</div>
<a id="a9ea3d7b381758b01bc7637e4580cba64" name="a9ea3d7b381758b01bc7637e4580cba64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea3d7b381758b01bc7637e4580cba64">&#9670;&#160;</a></span>FORM_FIELDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">array const core\hub\registration::FORM_FIELDS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= [<span class="stringliteral">&#39;policyagreed&#39;</span>, <span class="stringliteral">&#39;language&#39;</span>, <span class="stringliteral">&#39;countrycode&#39;</span>, <span class="stringliteral">&#39;privacy&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;contactemail&#39;</span>, <span class="stringliteral">&#39;contactable&#39;</span>, <span class="stringliteral">&#39;emailalert&#39;</span>, <span class="stringliteral">&#39;emailalertemail&#39;</span>, <span class="stringliteral">&#39;commnews&#39;</span>, <span class="stringliteral">&#39;commnewsemail&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;contactname&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;description&#39;</span>, <span class="stringliteral">&#39;imageurl&#39;</span>, <span class="stringliteral">&#39;contactphone&#39;</span>, <span class="stringliteral">&#39;regioncode&#39;</span>, <span class="stringliteral">&#39;geolocation&#39;</span>, <span class="stringliteral">&#39;street&#39;</span>]</div>
</div><!-- fragment -->
<p>Fields used in a site registration form. </p>
<p>IMPORTANT: any new fields with non-empty defaults have to be added to CONFIRM_NEW_FIELDS </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/hub/<b>registration.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 9 2024 02:51:39 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
