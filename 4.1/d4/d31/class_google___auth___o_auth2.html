<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: Google_Auth_OAuth2 Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.10+ (Build: 20240516) (f7da739ea04)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../df/d12/class_google___auth___o_auth2-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Google_Auth_OAuth2 Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for Google_Auth_OAuth2:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d4/d31/class_google___auth___o_auth2.png" usemap="#Google_5FAuth_5FOAuth2_map" alt=""/>
  <map id="Google_5FAuth_5FOAuth2_map" name="Google_5FAuth_5FOAuth2_map">
<area href="../../d9/de4/class_google___auth___abstract.html" alt="Google_Auth_Abstract" shape="rect" coords="0,0,139,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6de4d910b79a4fc6c27745e9e89ab238" id="r_a6de4d910b79a4fc6c27745e9e89ab238"><td class="memItemLeft" align="right" valign="top"><a id="a6de4d910b79a4fc6c27745e9e89ab238" name="a6de4d910b79a4fc6c27745e9e89ab238"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__construct</b> (<a class="el" href="../../db/deb/class_google___client.html">Google_Client</a> $client)</td></tr>
<tr class="memdesc:a6de4d910b79a4fc6c27745e9e89ab238"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates the class, but does not initiate the login flow, leaving it to the discretion of the caller. <br /></td></tr>
<tr class="separator:a6de4d910b79a4fc6c27745e9e89ab238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bcd6fa8de8abd489f53f07d82374d6" id="r_a22bcd6fa8de8abd489f53f07d82374d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22bcd6fa8de8abd489f53f07d82374d6">authenticate</a> ($code, $crossClient=false)</td></tr>
<tr class="separator:a22bcd6fa8de8abd489f53f07d82374d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6a23eebc17ee37b32e0af6b25c9a1c" id="r_aaa6a23eebc17ee37b32e0af6b25c9a1c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa6a23eebc17ee37b32e0af6b25c9a1c">authenticatedRequest</a> (<a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a> $request)</td></tr>
<tr class="memdesc:aaa6a23eebc17ee37b32e0af6b25c9a1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an authenticated / signed apiHttpRequest.  <br /></td></tr>
<tr class="separator:aaa6a23eebc17ee37b32e0af6b25c9a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90159a2c9616e75ff8eb219e821b7df5" id="r_a90159a2c9616e75ff8eb219e821b7df5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90159a2c9616e75ff8eb219e821b7df5">createAuthUrl</a> ($scope)</td></tr>
<tr class="memdesc:a90159a2c9616e75ff8eb219e821b7df5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a URL to obtain user authorization.  <br /></td></tr>
<tr class="separator:a90159a2c9616e75ff8eb219e821b7df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75de41d0d5ddcc3193f4277009f4eebb" id="r_a75de41d0d5ddcc3193f4277009f4eebb"><td class="memItemLeft" align="right" valign="top"><a id="a75de41d0d5ddcc3193f4277009f4eebb" name="a75de41d0d5ddcc3193f4277009f4eebb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>getAccessToken</b> ()</td></tr>
<tr class="separator:a75de41d0d5ddcc3193f4277009f4eebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e7465192487c852a02e78a501301de5" id="r_a2e7465192487c852a02e78a501301de5"><td class="memItemLeft" align="right" valign="top"><a id="a2e7465192487c852a02e78a501301de5" name="a2e7465192487c852a02e78a501301de5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>getRefreshToken</b> ()</td></tr>
<tr class="separator:a2e7465192487c852a02e78a501301de5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1975d862c84c3ef1792ff9f30c9808bd" id="r_a1975d862c84c3ef1792ff9f30c9808bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1975d862c84c3ef1792ff9f30c9808bd">isAccessTokenExpired</a> ()</td></tr>
<tr class="memdesc:a1975d862c84c3ef1792ff9f30c9808bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if the access_token is expired.  <br /></td></tr>
<tr class="separator:a1975d862c84c3ef1792ff9f30c9808bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5112a856abb1e48667b27d90498496" id="r_a4a5112a856abb1e48667b27d90498496"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a5112a856abb1e48667b27d90498496">refreshToken</a> ($refreshToken)</td></tr>
<tr class="memdesc:a4a5112a856abb1e48667b27d90498496"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches a fresh access token with the given refresh token.  <br /></td></tr>
<tr class="separator:a4a5112a856abb1e48667b27d90498496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af357759371d04426354c9548589bb053" id="r_af357759371d04426354c9548589bb053"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af357759371d04426354c9548589bb053">refreshTokenWithAssertion</a> ($assertionCredentials=null)</td></tr>
<tr class="memdesc:af357759371d04426354c9548589bb053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches a fresh access token with a given assertion token.  <br /></td></tr>
<tr class="separator:af357759371d04426354c9548589bb053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeefc6b4b9cfce8bd8820dc0dac5741e" id="r_aeeefc6b4b9cfce8bd8820dc0dac5741e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeeefc6b4b9cfce8bd8820dc0dac5741e">retrieveCertsFromLocation</a> ($url)</td></tr>
<tr class="memdesc:aeeefc6b4b9cfce8bd8820dc0dac5741e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve and cache a certificates file.  <br /></td></tr>
<tr class="separator:aeeefc6b4b9cfce8bd8820dc0dac5741e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2937f65d587961d2870dbb8468448578" id="r_a2937f65d587961d2870dbb8468448578"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2937f65d587961d2870dbb8468448578">revokeToken</a> ($token=null)</td></tr>
<tr class="memdesc:a2937f65d587961d2870dbb8468448578"><td class="mdescLeft">&#160;</td><td class="mdescRight">Revoke an OAuth2 access token or refresh token.  <br /></td></tr>
<tr class="separator:a2937f65d587961d2870dbb8468448578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dc245e3ac27fc76224797c9484de0ba" id="r_a6dc245e3ac27fc76224797c9484de0ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6dc245e3ac27fc76224797c9484de0ba">setAccessToken</a> ($token)</td></tr>
<tr class="separator:a6dc245e3ac27fc76224797c9484de0ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9c7b55857e3b58e73ea9103a90cd2e" id="r_adc9c7b55857e3b58e73ea9103a90cd2e"><td class="memItemLeft" align="right" valign="top"><a id="adc9c7b55857e3b58e73ea9103a90cd2e" name="adc9c7b55857e3b58e73ea9103a90cd2e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>setAssertionCredentials</b> (<a class="el" href="../../d0/d4b/class_google___auth___assertion_credentials.html">Google_Auth_AssertionCredentials</a> $creds)</td></tr>
<tr class="separator:adc9c7b55857e3b58e73ea9103a90cd2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f0c9e72aba78f509ad37de97ecf56be" id="r_a7f0c9e72aba78f509ad37de97ecf56be"><td class="memItemLeft" align="right" valign="top"><a id="a7f0c9e72aba78f509ad37de97ecf56be" name="a7f0c9e72aba78f509ad37de97ecf56be"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>setState</b> ($state)</td></tr>
<tr class="separator:a7f0c9e72aba78f509ad37de97ecf56be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23eaf57bbb86710e6da0df7fdfc28ab4" id="r_a23eaf57bbb86710e6da0df7fdfc28ab4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23eaf57bbb86710e6da0df7fdfc28ab4">sign</a> (<a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a> $request)</td></tr>
<tr class="memdesc:a23eaf57bbb86710e6da0df7fdfc28ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Include an accessToken in a given apiHttpRequest.  <br /></td></tr>
<tr class="separator:a23eaf57bbb86710e6da0df7fdfc28ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc94cdb66f5444c89e1902fead9774d1" id="r_acc94cdb66f5444c89e1902fead9774d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc94cdb66f5444c89e1902fead9774d1">verifyIdToken</a> ($id_token=null, $audience=null)</td></tr>
<tr class="memdesc:acc94cdb66f5444c89e1902fead9774d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies an id token and returns the authenticated apiLoginTicket.  <br /></td></tr>
<tr class="separator:acc94cdb66f5444c89e1902fead9774d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e92285fb5173052be4a0473e9b9f7f0" id="r_a4e92285fb5173052be4a0473e9b9f7f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e92285fb5173052be4a0473e9b9f7f0">verifySignedJwtWithCerts</a> ( $jwt, $certs, $required_audience, $issuer=null, $max_expiry=null)</td></tr>
<tr class="memdesc:a4e92285fb5173052be4a0473e9b9f7f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies the id token, returns the verified token contents.  <br /></td></tr>
<tr class="separator:a4e92285fb5173052be4a0473e9b9f7f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a392575599ac9c1377f50844096dce55e" id="r_a392575599ac9c1377f50844096dce55e"><td class="memItemLeft" align="right" valign="top"><a id="a392575599ac9c1377f50844096dce55e" name="a392575599ac9c1377f50844096dce55e"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>AUTH_TOKEN_LIFETIME_SECS</b> = 300</td></tr>
<tr class="separator:a392575599ac9c1377f50844096dce55e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af038dbf9669473d7d461810589f8b5c1" id="r_af038dbf9669473d7d461810589f8b5c1"><td class="memItemLeft" align="right" valign="top"><a id="af038dbf9669473d7d461810589f8b5c1" name="af038dbf9669473d7d461810589f8b5c1"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>CLOCK_SKEW_SECS</b> = 300</td></tr>
<tr class="separator:af038dbf9669473d7d461810589f8b5c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d23b95b4d6be527fc87c1270ab0b9f" id="r_a91d23b95b4d6be527fc87c1270ab0b9f"><td class="memItemLeft" align="right" valign="top"><a id="a91d23b95b4d6be527fc87c1270ab0b9f" name="a91d23b95b4d6be527fc87c1270ab0b9f"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_TOKEN_LIFETIME_SECS</b> = 86400</td></tr>
<tr class="separator:a91d23b95b4d6be527fc87c1270ab0b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf8a33c58864a32f590c3da0335fcaeb" id="r_abf8a33c58864a32f590c3da0335fcaeb"><td class="memItemLeft" align="right" valign="top"><a id="abf8a33c58864a32f590c3da0335fcaeb" name="abf8a33c58864a32f590c3da0335fcaeb"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>OAUTH2_AUTH_URL</b> = 'https://accounts.google.com/o/oauth2/auth'</td></tr>
<tr class="separator:abf8a33c58864a32f590c3da0335fcaeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7da4c28946d22a8f48135daa4f5dca" id="r_a9f7da4c28946d22a8f48135daa4f5dca"><td class="memItemLeft" align="right" valign="top"><a id="a9f7da4c28946d22a8f48135daa4f5dca" name="a9f7da4c28946d22a8f48135daa4f5dca"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>OAUTH2_ISSUER</b> = 'accounts.google.com'</td></tr>
<tr class="separator:a9f7da4c28946d22a8f48135daa4f5dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7516cdcbe88aaaa0b83ef16c70aef4d" id="r_aa7516cdcbe88aaaa0b83ef16c70aef4d"><td class="memItemLeft" align="right" valign="top"><a id="aa7516cdcbe88aaaa0b83ef16c70aef4d" name="aa7516cdcbe88aaaa0b83ef16c70aef4d"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>OAUTH2_ISSUER_HTTPS</b> = 'https://accounts.google.com'</td></tr>
<tr class="separator:aa7516cdcbe88aaaa0b83ef16c70aef4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd4126fa99e73bc8ac1b58c401f2878" id="r_acfd4126fa99e73bc8ac1b58c401f2878"><td class="memItemLeft" align="right" valign="top"><a id="acfd4126fa99e73bc8ac1b58c401f2878" name="acfd4126fa99e73bc8ac1b58c401f2878"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>OAUTH2_REVOKE_URI</b> = 'https://accounts.google.com/o/oauth2/revoke'</td></tr>
<tr class="separator:acfd4126fa99e73bc8ac1b58c401f2878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba41043f439af89ee80d03c45897952" id="r_a1ba41043f439af89ee80d03c45897952"><td class="memItemLeft" align="right" valign="top"><a id="a1ba41043f439af89ee80d03c45897952" name="a1ba41043f439af89ee80d03c45897952"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>OAUTH2_TOKEN_URI</b> = 'https://accounts.google.com/o/oauth2/token'</td></tr>
<tr class="separator:a1ba41043f439af89ee80d03c45897952"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a22bcd6fa8de8abd489f53f07d82374d6" name="a22bcd6fa8de8abd489f53f07d82374d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bcd6fa8de8abd489f53f07d82374d6">&#9670;&#160;</a></span>authenticate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::authenticate </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$code</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crossClient</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$code</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$crossClient</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../dc/db9/class_google___auth___exception.html">Google_Auth_Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa6a23eebc17ee37b32e0af6b25c9a1c" name="aaa6a23eebc17ee37b32e0af6b25c9a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa6a23eebc17ee37b32e0af6b25c9a1c">&#9670;&#160;</a></span>authenticatedRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::authenticatedRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a></td>          <td class="paramname"><span class="paramname"><em>$request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform an authenticated / signed apiHttpRequest. </p>
<p>This function takes the apiHttpRequest, calls apiAuth-&gt;sign on it (which can modify the request in what ever way fits the auth mechanism) and then calls apiCurlIO::makeRequest on the signed request</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a></td><td class="paramname">$request</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a></td><td>The resulting HTTP response including the responseHttpCode, responseHeaders and responseBody. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d9/de4/class_google___auth___abstract.html#a40dbf7e3d22e3e21ca749bfa10d9989b">Google_Auth_Abstract</a>.</p>

</div>
</div>
<a id="a90159a2c9616e75ff8eb219e821b7df5" name="a90159a2c9616e75ff8eb219e821b7df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90159a2c9616e75ff8eb219e821b7df5">&#9670;&#160;</a></span>createAuthUrl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::createAuthUrl </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$scope</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a URL to obtain user authorization. </p>
<p>The authorization endpoint allows the user to first authenticate, and then grant/deny the access request. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$scope</td><td>The scope is expressed as a list of space-delimited strings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1975d862c84c3ef1792ff9f30c9808bd" name="a1975d862c84c3ef1792ff9f30c9808bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1975d862c84c3ef1792ff9f30c9808bd">&#9670;&#160;</a></span>isAccessTokenExpired()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::isAccessTokenExpired </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns if the access_token is expired. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Returns True if the access_token is expired. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4a5112a856abb1e48667b27d90498496" name="a4a5112a856abb1e48667b27d90498496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a5112a856abb1e48667b27d90498496">&#9670;&#160;</a></span>refreshToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::refreshToken </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$refreshToken</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches a fresh access token with the given refresh token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$refreshToken</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af357759371d04426354c9548589bb053" name="af357759371d04426354c9548589bb053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af357759371d04426354c9548589bb053">&#9670;&#160;</a></span>refreshTokenWithAssertion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::refreshTokenWithAssertion </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$assertionCredentials</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches a fresh access token with a given assertion token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d4b/class_google___auth___assertion_credentials.html">Google_Auth_AssertionCredentials</a></td><td class="paramname">$assertionCredentials</td><td>optional. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeeefc6b4b9cfce8bd8820dc0dac5741e" name="aeeefc6b4b9cfce8bd8820dc0dac5741e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeefc6b4b9cfce8bd8820dc0dac5741e">&#9670;&#160;</a></span>retrieveCertsFromLocation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::retrieveCertsFromLocation </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$url</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve and cache a certificates file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$url</td><td>string location </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../dc/db9/class_google___auth___exception.html">Google_Auth_Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>certificates </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2937f65d587961d2870dbb8468448578" name="a2937f65d587961d2870dbb8468448578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2937f65d587961d2870dbb8468448578">&#9670;&#160;</a></span>revokeToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::revokeToken </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Revoke an OAuth2 access token or refresh token. </p>
<p>This method will revoke the current access token, if a token isn't provided. </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../dc/db9/class_google___auth___exception.html">Google_Auth_Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$token</td><td>The token (access token or a refresh token) that should be revoked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>Returns True if the revocation was successful, otherwise False. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6dc245e3ac27fc76224797c9484de0ba" name="a6dc245e3ac27fc76224797c9484de0ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc245e3ac27fc76224797c9484de0ba">&#9670;&#160;</a></span>setAccessToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::setAccessToken </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$token</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../dc/db9/class_google___auth___exception.html">Google_Auth_Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a23eaf57bbb86710e6da0df7fdfc28ab4" name="a23eaf57bbb86710e6da0df7fdfc28ab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23eaf57bbb86710e6da0df7fdfc28ab4">&#9670;&#160;</a></span>sign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::sign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a></td>          <td class="paramname"><span class="paramname"><em>$request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Include an accessToken in a given apiHttpRequest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a></td><td class="paramname">$request</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d2/dad/class_google___http___request.html">Google_Http_Request</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../dc/db9/class_google___auth___exception.html">Google_Auth_Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d9/de4/class_google___auth___abstract.html">Google_Auth_Abstract</a>.</p>

</div>
</div>
<a id="acc94cdb66f5444c89e1902fead9774d1" name="acc94cdb66f5444c89e1902fead9774d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc94cdb66f5444c89e1902fead9774d1">&#9670;&#160;</a></span>verifyIdToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::verifyIdToken </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$id_token</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$audience</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifies an id token and returns the authenticated apiLoginTicket. </p>
<p>Throws an exception if the id token is not valid. The audience parameter can be used to control which id tokens are accepted. By default, the id token must have been issued to this OAuth2 client.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$id_token</td><td></td></tr>
    <tr><td class="paramname">$audience</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d8/d2e/class_google___auth___login_ticket.html">Google_Auth_LoginTicket</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4e92285fb5173052be4a0473e9b9f7f0" name="a4e92285fb5173052be4a0473e9b9f7f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e92285fb5173052be4a0473e9b9f7f0">&#9670;&#160;</a></span>verifySignedJwtWithCerts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Google_Auth_OAuth2::verifySignedJwtWithCerts </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$jwt</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$certs</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$required_audience</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$issuer</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$max_expiry</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifies the id token, returns the verified token contents. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$jwt</td><td>string the token </td></tr>
    <tr><td class="paramname">$certs</td><td>array of certificates </td></tr>
    <tr><td class="paramname">$required_audience</td><td>string the expected consumer of the token </td></tr>
    <tr><td class="paramname">[$issuer]</td><td>the expected issues, defaults to Google </td></tr>
    <tr><td class="paramname">[$max_expiry]</td><td>the max lifetime of a token, defaults to MAX_TOKEN_LIFETIME_SECS </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../dc/db9/class_google___auth___exception.html">Google_Auth_Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>token information if valid, false if not </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/google/src/Google/Auth/<b>OAuth2.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 19 2024 02:30:53 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
