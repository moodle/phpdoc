<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_user\fields Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.10 (Build: 20240422) (e8d03fdae4e)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../de/d0b/namespacecore__user.html">core_user</a></li><li class="navelem"><a class="el" href="../../df/d37/classcore__user_1_1fields.html">fields</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d2/d45/classcore__user_1_1fields-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_user\fields Class Reference<div class="ingroups"><a class="el" href="../../d6/d91/group__core__user.html">core_user</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac48c905a87c891ac3abce251c3cc28be" id="r_ac48c905a87c891ac3abce251c3cc28be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac48c905a87c891ac3abce251c3cc28be">excluding</a> (... $exclude)</td></tr>
<tr class="memdesc:ac48c905a87c891ac3abce251c3cc28be"><td class="mdescLeft">&#160;</td><td class="mdescRight">On an existing fields object, excludes fields from retrieval.  <br /></td></tr>
<tr class="separator:ac48c905a87c891ac3abce251c3cc28be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf46b18d42b12dce514acdfd61f93037" id="r_aaf46b18d42b12dce514acdfd61f93037"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaf46b18d42b12dce514acdfd61f93037">get_required_fields</a> (array $limitpurposes=[])</td></tr>
<tr class="memdesc:aaf46b18d42b12dce514acdfd61f93037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets an array of all fields that are required for the specified purposes, also taking into account the $includes and $excludes settings.  <br /></td></tr>
<tr class="separator:aaf46b18d42b12dce514acdfd61f93037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ad68b8e4fceed3f7d1c95b488cd8da" id="r_a91ad68b8e4fceed3f7d1c95b488cd8da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91ad68b8e4fceed3f7d1c95b488cd8da">get_sql</a> (string $alias='', bool $namedparams=false, string $prefix='', string $renameid='', bool $leadingcomma=true)</td></tr>
<tr class="memdesc:a91ad68b8e4fceed3f7d1c95b488cd8da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets SQL that can be used in a query to get the necessary fields.  <br /></td></tr>
<tr class="separator:a91ad68b8e4fceed3f7d1c95b488cd8da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce4701857aa70c507d7556d2a25fbd2" id="r_a4ce4701857aa70c507d7556d2a25fbd2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ce4701857aa70c507d7556d2a25fbd2">including</a> (string ... $include)</td></tr>
<tr class="memdesc:a4ce4701857aa70c507d7556d2a25fbd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">On an existing fields object, adds extra fields to be retrieved.  <br /></td></tr>
<tr class="separator:a4ce4701857aa70c507d7556d2a25fbd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21720822989f4f961ae36fb1b8d0da50" id="r_a21720822989f4f961ae36fb1b8d0da50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21720822989f4f961ae36fb1b8d0da50">with_identity</a> (?\<a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>, bool $allowcustom=true)</td></tr>
<tr class="memdesc:a21720822989f4f961ae36fb1b8d0da50"><td class="mdescLeft">&#160;</td><td class="mdescRight">On an existing fields object, adds the fields required for displaying user identity.  <br /></td></tr>
<tr class="separator:a21720822989f4f961ae36fb1b8d0da50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d71f8e3420bc603e33012d018382793" id="r_a4d71f8e3420bc603e33012d018382793"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d71f8e3420bc603e33012d018382793">with_name</a> ()</td></tr>
<tr class="memdesc:a4d71f8e3420bc603e33012d018382793"><td class="mdescLeft">&#160;</td><td class="mdescRight">On an existing fields object, adds the fields required for displaying user full names.  <br /></td></tr>
<tr class="separator:a4d71f8e3420bc603e33012d018382793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d181cb7ada62c3eeda06a955df60d01" id="r_a1d181cb7ada62c3eeda06a955df60d01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d181cb7ada62c3eeda06a955df60d01">with_userpic</a> ()</td></tr>
<tr class="memdesc:a1d181cb7ada62c3eeda06a955df60d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">On an existing fields object, adds the fields required for displaying user pictures.  <br /></td></tr>
<tr class="separator:a1d181cb7ada62c3eeda06a955df60d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a25194c2d8387f433c011511d40416630" id="r_a25194c2d8387f433c011511d40416630"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25194c2d8387f433c011511d40416630">empty</a> ()</td></tr>
<tr class="memdesc:a25194c2d8387f433c011511d40416630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an empty user fields object to get arbitrary user fields.  <br /></td></tr>
<tr class="separator:a25194c2d8387f433c011511d40416630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f05f103587c6acf9ee8e7f261822ca" id="r_a11f05f103587c6acf9ee8e7f261822ca"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11f05f103587c6acf9ee8e7f261822ca">for_identity</a> (?\<a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>, bool $allowcustom=true)</td></tr>
<tr class="memdesc:a11f05f103587c6acf9ee8e7f261822ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a user fields object to get identity information for display.  <br /></td></tr>
<tr class="separator:a11f05f103587c6acf9ee8e7f261822ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a0ef3a5ba5818c57d77b7b7463dfc0" id="r_ad7a0ef3a5ba5818c57d77b7b7463dfc0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7a0ef3a5ba5818c57d77b7b7463dfc0">for_name</a> ()</td></tr>
<tr class="memdesc:ad7a0ef3a5ba5818c57d77b7b7463dfc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a user fields object to get information required for displaying a user full name.  <br /></td></tr>
<tr class="separator:ad7a0ef3a5ba5818c57d77b7b7463dfc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ddd1083e17b93460fb6b53ab71cbb61" id="r_a8ddd1083e17b93460fb6b53ab71cbb61"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ddd1083e17b93460fb6b53ab71cbb61">for_userpic</a> ()</td></tr>
<tr class="memdesc:a8ddd1083e17b93460fb6b53ab71cbb61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a user fields object to get information required for displaying a user picture.  <br /></td></tr>
<tr class="separator:a8ddd1083e17b93460fb6b53ab71cbb61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c896b2f035afec5fb299ed483b632dc" id="r_a5c896b2f035afec5fb299ed483b632dc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c896b2f035afec5fb299ed483b632dc">get_display_name</a> (string $field)</td></tr>
<tr class="memdesc:a5c896b2f035afec5fb299ed483b632dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the display name of a given user field.  <br /></td></tr>
<tr class="separator:a5c896b2f035afec5fb299ed483b632dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8175899be2066cbc9e9350d2a26d6b1e" id="r_a8175899be2066cbc9e9350d2a26d6b1e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8175899be2066cbc9e9350d2a26d6b1e">get_identity_fields</a> (?\<a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>, bool $allowcustom=true)</td></tr>
<tr class="memdesc:a8175899be2066cbc9e9350d2a26d6b1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all fields required for user identity.  <br /></td></tr>
<tr class="separator:a8175899be2066cbc9e9350d2a26d6b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e45533a7ba7f043e7710755f55e9d6" id="r_a65e45533a7ba7f043e7710755f55e9d6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a65e45533a7ba7f043e7710755f55e9d6">get_name_fields</a> (bool $differentorder=false)</td></tr>
<tr class="memdesc:a65e45533a7ba7f043e7710755f55e9d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets fields required for user names.  <br /></td></tr>
<tr class="separator:a65e45533a7ba7f043e7710755f55e9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af19160074413583062eee13f6f27a7b7" id="r_af19160074413583062eee13f6f27a7b7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af19160074413583062eee13f6f27a7b7">get_picture_fields</a> ()</td></tr>
<tr class="memdesc:af19160074413583062eee13f6f27a7b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets fields required for user pictures.  <br /></td></tr>
<tr class="separator:af19160074413583062eee13f6f27a7b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a43672f4478ae8dfd62bffca046d6cd" id="r_a5a43672f4478ae8dfd62bffca046d6cd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a43672f4478ae8dfd62bffca046d6cd">get_sql_fullname</a> (?string $tablealias='u', bool $override=false)</td></tr>
<tr class="memdesc:a5a43672f4478ae8dfd62bffca046d6cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to {.  <br /></td></tr>
<tr class="separator:a5a43672f4478ae8dfd62bffca046d6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba786f62b2ebbec04faf90161bfbb10f" id="r_aba786f62b2ebbec04faf90161bfbb10f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba786f62b2ebbec04faf90161bfbb10f">match_custom_field</a> (string $fieldname)</td></tr>
<tr class="memdesc:aba786f62b2ebbec04faf90161bfbb10f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a field name looks like a custom profile field i.e.  <br /></td></tr>
<tr class="separator:aba786f62b2ebbec04faf90161bfbb10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8a424ab429f20ad86ee180ad3dc296" id="r_a6c8a424ab429f20ad86ee180ad3dc296"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c8a424ab429f20ad86ee180ad3dc296">reset_unique_identifier</a> ()</td></tr>
<tr class="memdesc:a6c8a424ab429f20ad86ee180ad3dc296"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the unique identifier used to ensure that multiple SQL fragments generated in the same request will have different identifiers for parameters and table aliases.  <br /></td></tr>
<tr class="separator:a6c8a424ab429f20ad86ee180ad3dc296"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af28f4d36c124a8dc34766a53c1fa0317" id="r_af28f4d36c124a8dc34766a53c1fa0317"><td class="memItemLeft" align="right" valign="top"><a id="af28f4d36c124a8dc34766a53c1fa0317" name="af28f4d36c124a8dc34766a53c1fa0317"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>CUSTOM_INCLUDE</b> = 3</td></tr>
<tr class="memdesc:af28f4d36c124a8dc34766a53c1fa0317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Field required by custom include list. <br /></td></tr>
<tr class="separator:af28f4d36c124a8dc34766a53c1fa0317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a088ebcbb886a4b0daf391d7311b9dbe1" id="r_a088ebcbb886a4b0daf391d7311b9dbe1"><td class="memItemLeft" align="right" valign="top"><a id="a088ebcbb886a4b0daf391d7311b9dbe1" name="a088ebcbb886a4b0daf391d7311b9dbe1"></a>
string const&#160;</td><td class="memItemRight" valign="bottom"><b>PROFILE_FIELD_PREFIX</b> = 'profile_field_'</td></tr>
<tr class="memdesc:a088ebcbb886a4b0daf391d7311b9dbe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prefix used to identify custom profile fields. <br /></td></tr>
<tr class="separator:a088ebcbb886a4b0daf391d7311b9dbe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30fdea94ef88107fcfb37bca0b81dc9" id="r_ab30fdea94ef88107fcfb37bca0b81dc9"><td class="memItemLeft" align="right" valign="top"><a id="ab30fdea94ef88107fcfb37bca0b81dc9" name="ab30fdea94ef88107fcfb37bca0b81dc9"></a>
string const&#160;</td><td class="memItemRight" valign="bottom"><b>PROFILE_FIELD_REGEX</b> = '~^' . self::PROFILE_FIELD_PREFIX . '(.*)$~'</td></tr>
<tr class="memdesc:ab30fdea94ef88107fcfb37bca0b81dc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Regular expression used to match a field name against the prefix. <br /></td></tr>
<tr class="separator:ab30fdea94ef88107fcfb37bca0b81dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f2646f49db48bc881134e04ccd10d78" id="r_a5f2646f49db48bc881134e04ccd10d78"><td class="memItemLeft" align="right" valign="top"><a id="a5f2646f49db48bc881134e04ccd10d78" name="a5f2646f49db48bc881134e04ccd10d78"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>PURPOSE_IDENTITY</b> = 0</td></tr>
<tr class="memdesc:a5f2646f49db48bc881134e04ccd10d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">All fields required to display user's identity, based on server configuration. <br /></td></tr>
<tr class="separator:a5f2646f49db48bc881134e04ccd10d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b1c49327333e8e1bb6521489ed3d754" id="r_a4b1c49327333e8e1bb6521489ed3d754"><td class="memItemLeft" align="right" valign="top"><a id="a4b1c49327333e8e1bb6521489ed3d754" name="a4b1c49327333e8e1bb6521489ed3d754"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>PURPOSE_NAME</b> = 2</td></tr>
<tr class="memdesc:a4b1c49327333e8e1bb6521489ed3d754"><td class="mdescLeft">&#160;</td><td class="mdescRight">All fields required for somebody's name. <br /></td></tr>
<tr class="separator:a4b1c49327333e8e1bb6521489ed3d754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad7281e7b01c7151bccabfb6268749d3" id="r_aad7281e7b01c7151bccabfb6268749d3"><td class="memItemLeft" align="right" valign="top"><a id="aad7281e7b01c7151bccabfb6268749d3" name="aad7281e7b01c7151bccabfb6268749d3"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>PURPOSE_USERPIC</b> = 1</td></tr>
<tr class="memdesc:aad7281e7b01c7151bccabfb6268749d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">All fields required to display a user picture. <br /></td></tr>
<tr class="separator:aad7281e7b01c7151bccabfb6268749d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa5ae44f310f0d19b02836b0177c38937" id="r_aa5ae44f310f0d19b02836b0177c38937"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5ae44f310f0d19b02836b0177c38937">__construct</a> (int $purpose=-1)</td></tr>
<tr class="memdesc:aa5ae44f310f0d19b02836b0177c38937"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protected constructor - use one of the for_xx methods to create an object.  <br /></td></tr>
<tr class="separator:aa5ae44f310f0d19b02836b0177c38937"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a44ff46b1f618c9e5ffad0cc3b34b049c" id="r_a44ff46b1f618c9e5ffad0cc3b34b049c"><td class="memItemLeft" align="right" valign="top"><a id="a44ff46b1f618c9e5ffad0cc3b34b049c" name="a44ff46b1f618c9e5ffad0cc3b34b049c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$allowcustom</b></td></tr>
<tr class="memdesc:a44ff46b1f618c9e5ffad0cc3b34b049c"><td class="mdescLeft">&#160;</td><td class="mdescRight">True to allow custom user fields. <br /></td></tr>
<tr class="separator:a44ff46b1f618c9e5ffad0cc3b34b049c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3f11bd7595bfae70bfd8f0519527eac" id="r_aa3f11bd7595bfae70bfd8f0519527eac"><td class="memItemLeft" align="right" valign="top"><a id="aa3f11bd7595bfae70bfd8f0519527eac" name="aa3f11bd7595bfae70bfd8f0519527eac"></a>
<a class="el" href="../../da/d04/classcontext.html">context</a> null&#160;</td><td class="memItemRight" valign="bottom"><b>$context</b></td></tr>
<tr class="memdesc:aa3f11bd7595bfae70bfd8f0519527eac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Context in use. <br /></td></tr>
<tr class="separator:aa3f11bd7595bfae70bfd8f0519527eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a073fcbddc9074f612976ef9766ca4872" id="r_a073fcbddc9074f612976ef9766ca4872"><td class="memItemLeft" align="right" valign="top"><a id="a073fcbddc9074f612976ef9766ca4872" name="a073fcbddc9074f612976ef9766ca4872"></a>
string[]&#160;</td><td class="memItemRight" valign="bottom"><b>$exclude</b></td></tr>
<tr class="memdesc:a073fcbddc9074f612976ef9766ca4872"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of fields to exclude. <br /></td></tr>
<tr class="separator:a073fcbddc9074f612976ef9766ca4872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c3645e771cc12c933e99067fcdce6a9" id="r_a7c3645e771cc12c933e99067fcdce6a9"><td class="memItemLeft" align="right" valign="top"><a id="a7c3645e771cc12c933e99067fcdce6a9" name="a7c3645e771cc12c933e99067fcdce6a9"></a>
array null&#160;</td><td class="memItemRight" valign="bottom"><b>$fields</b> = null</td></tr>
<tr class="memdesc:a7c3645e771cc12c933e99067fcdce6a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associative array from field =&gt; array of purposes it was used for =&gt; true. <br /></td></tr>
<tr class="separator:a7c3645e771cc12c933e99067fcdce6a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4a8edc296311481552f782c03f5d82e" id="r_ad4a8edc296311481552f782c03f5d82e"><td class="memItemLeft" align="right" valign="top"><a id="ad4a8edc296311481552f782c03f5d82e" name="ad4a8edc296311481552f782c03f5d82e"></a>
string[]&#160;</td><td class="memItemRight" valign="bottom"><b>$include</b></td></tr>
<tr class="memdesc:ad4a8edc296311481552f782c03f5d82e"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of extra fields to include. <br /></td></tr>
<tr class="separator:ad4a8edc296311481552f782c03f5d82e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd174718aa27f40988c74624e7e6d87" id="r_a0fd174718aa27f40988c74624e7e6d87"><td class="memItemLeft" align="right" valign="top"><a id="a0fd174718aa27f40988c74624e7e6d87" name="a0fd174718aa27f40988c74624e7e6d87"></a>
bool[]&#160;</td><td class="memItemRight" valign="bottom"><b>$purposes</b></td></tr>
<tr class="memdesc:a0fd174718aa27f40988c74624e7e6d87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of purposes (from PURPOSE_xx to true/false) <br /></td></tr>
<tr class="separator:a0fd174718aa27f40988c74624e7e6d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a581ad779d215161c187267e3093638bf" id="r_a581ad779d215161c187267e3093638bf"><td class="memItemLeft" align="right" valign="top"><a id="a581ad779d215161c187267e3093638bf" name="a581ad779d215161c187267e3093638bf"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>$uniqueidentifier</b> = 1</td></tr>
<tr class="memdesc:a581ad779d215161c187267e3093638bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique identifier for different queries generated in same request. <br /></td></tr>
<tr class="separator:a581ad779d215161c187267e3093638bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa5ae44f310f0d19b02836b0177c38937" name="aa5ae44f310f0d19b02836b0177c38937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5ae44f310f0d19b02836b0177c38937">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::__construct </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$purpose</em><span class="paramdefsep"> = </span><span class="paramdefval">-1</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Protected constructor - use one of the for_xx methods to create an object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$purpose</td><td>Initial purpose for object or -1 for none </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a25194c2d8387f433c011511d40416630" name="a25194c2d8387f433c011511d40416630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25194c2d8387f433c011511d40416630">&#9670;&#160;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::empty </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs an empty user fields object to get arbitrary user fields. </p>
<p>You can add fields to retrieve with the including() function.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fields</td><td>User fields object ready for use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac48c905a87c891ac3abce251c3cc28be" name="ac48c905a87c891ac3abce251c3cc28be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac48c905a87c891ac3abce251c3cc28be">&#9670;&#160;</a></span>excluding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::excluding </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$exclude</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>On an existing fields object, excludes fields from retrieval. </p>
<p>You can specify either fields from the user table e.g. 'email', or profile fields e.g. 'profile_field_height'.</p>
<p>This is useful when constructing queries where your query already explicitly references certain fields, so you don't want to retrieve them twice.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>...$exclude One or more fields to exclude </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">$this</td><td>Same object for chaining function calls </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a11f05f103587c6acf9ee8e7f261822ca" name="a11f05f103587c6acf9ee8e7f261822ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11f05f103587c6acf9ee8e7f261822ca">&#9670;&#160;</a></span>for_identity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::for_identity </td>
          <td>(</td>
          <td class="paramtype">?\<a class="el" href="../../da/d04/classcontext.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$allowcustom</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a user fields object to get identity information for display. </p>
<p>The function does all the required capability checks to see if the current user is allowed to see them in the specified context. You can pass context null to get all the fields without checking permissions.</p>
<p>If the code can only handle fields in the main user table, and not custom profile fields, then set $allowcustom to false.</p>
<p>Note: After constructing the object you can use the -&gt;with_xx, -&gt;including, and -&gt;excluding functions to control the required fields in more detail. For example:</p>
<p>$fields = fields::for_identity($context)-&gt;with_userpic()-&gt;excluding('email');</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>Context; if supplied, includes only fields the current user should see </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$allowcustom</td><td>If true, custom profile fields may be included </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fields</td><td>User fields object ready for use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad7a0ef3a5ba5818c57d77b7b7463dfc0" name="ad7a0ef3a5ba5818c57d77b7b7463dfc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7a0ef3a5ba5818c57d77b7b7463dfc0">&#9670;&#160;</a></span>for_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::for_name </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a user fields object to get information required for displaying a user full name. </p>
<p>Note: After constructing the object you can use the -&gt;with_xx, -&gt;including, and -&gt;excluding functions to control the required fields in more detail. For example:</p>
<p>$fields = fields::for_name()-&gt;with_userpic()-&gt;excluding('email');</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fields</td><td>User fields object ready for use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8ddd1083e17b93460fb6b53ab71cbb61" name="a8ddd1083e17b93460fb6b53ab71cbb61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ddd1083e17b93460fb6b53ab71cbb61">&#9670;&#160;</a></span>for_userpic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::for_userpic </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a user fields object to get information required for displaying a user picture. </p>
<p>Note: After constructing the object you can use the -&gt;with_xx, -&gt;including, and -&gt;excluding functions to control the required fields in more detail. For example:</p>
<p>$fields = fields::for_userpic()-&gt;with_name()-&gt;excluding('email');</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fields</td><td>User fields object ready for use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5c896b2f035afec5fb299ed483b632dc" name="a5c896b2f035afec5fb299ed483b632dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c896b2f035afec5fb299ed483b632dc">&#9670;&#160;</a></span>get_display_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::get_display_name </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$field</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the display name of a given user field. </p>
<p>Supports field names from the 'user' database table, and custom profile fields supplied in the format 'profile_field_xx'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$field</td><td>Field name in database </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Field name for display to user </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8175899be2066cbc9e9350d2a26d6b1e" name="a8175899be2066cbc9e9350d2a26d6b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8175899be2066cbc9e9350d2a26d6b1e">&#9670;&#160;</a></span>get_identity_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::get_identity_fields </td>
          <td>(</td>
          <td class="paramtype">?\<a class="el" href="../../da/d04/classcontext.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$allowcustom</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets all fields required for user identity. </p>
<p>These fields should be included in tables showing lists of users (in addition to the user's name which is included as standard).</p>
<p>The results include basic field names (columns from the 'user' database table) and, unless turned off, custom profile field names in the format 'profile_field_myfield', note these fields will always be returned lower cased to match how they are returned by the DML library.</p>
<p>This function does all the required capability checks to see if the current user is allowed to see them in the specified context. You can pass context null to get all the fields without checking permissions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>Context; if not supplied, all fields will be included without checks </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$allowcustom</td><td>If true, custom profile fields will be included </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string[]</td><td>Array of required fields </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a65e45533a7ba7f043e7710755f55e9d6" name="a65e45533a7ba7f043e7710755f55e9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65e45533a7ba7f043e7710755f55e9d6">&#9670;&#160;</a></span>get_name_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::get_name_fields </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$differentorder</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets fields required for user names. </p>
<p>The results include only basic field names (columns from the 'user' database table).</p>
<p>Fields are usually returned in a specific order, which the <a class="el" href="../../d0/de1/group__core.html#ga22ae943f55a27f3b9cca15f8ddd05db7" title="Returns a persons full name.">fullname()</a> function depends on. If you specify 'true' to the $strangeorder flag, then the firstname and lastname fields are moved to the front; this is useful in a few places in existing code. New code should avoid requiring a particular order.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$differentorder</td><td>In a few places, a different order of fields is required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string[]</td><td>All fields used to display user names </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af19160074413583062eee13f6f27a7b7" name="af19160074413583062eee13f6f27a7b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af19160074413583062eee13f6f27a7b7">&#9670;&#160;</a></span>get_picture_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::get_picture_fields </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets fields required for user pictures. </p>
<p>The results include only basic field names (columns from the 'user' database table).</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string[]</td><td>All fields required for user pictures </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf46b18d42b12dce514acdfd61f93037" name="aaf46b18d42b12dce514acdfd61f93037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf46b18d42b12dce514acdfd61f93037">&#9670;&#160;</a></span>get_required_fields()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::get_required_fields </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$limitpurposes</em><span class="paramdefsep"> = </span><span class="paramdefval">[]</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets an array of all fields that are required for the specified purposes, also taking into account the $includes and $excludes settings. </p>
<p>The results may include basic field names (columns from the 'user' database table) and, unless turned off, custom profile field names in the format 'profile_field_myfield'.</p>
<p>You should not rely on the order of fields, with one exception: if there is an id field it will be returned first. This is in case it is used with get_records calls.</p>
<p>The $limitpurposes parameter is useful if you want to get a different set of fields than the purposes in the constructor. For example, if you want to get SQL for identity + user picture fields, but you then want to only get the identity fields as a list. (You can only specify purposes that were also passed to the constructor i.e. it can only be used to restrict the list, not add to it.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$limitpurposes</td><td>If specified, gets fields only for these purposes </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string[]</td><td>Array of required fields </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If any unknown purpose is listed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91ad68b8e4fceed3f7d1c95b488cd8da" name="a91ad68b8e4fceed3f7d1c95b488cd8da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91ad68b8e4fceed3f7d1c95b488cd8da">&#9670;&#160;</a></span>get_sql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::get_sql </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$alias</em><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$namedparams</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$prefix</em><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$renameid</em><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$leadingcomma</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets SQL that can be used in a query to get the necessary fields. </p>
<p>The result of this function is an object with fields 'selects', 'joins', 'params', and 'mappings'.</p>
<p>If not empty, the list of selects will begin with a comma and the list of joins will begin and end with a space. You can include the result in your existing query like this:</p>
<p>SELECT (your existing fields) $selects FROM {user} u JOIN (your existing joins) $joins</p>
<p>When there are no custom fields then the 'joins' result will always be an empty string, and 'params' will be an empty array.</p>
<p>The $fieldmappings value is often not needed. It is an associative array from each field name to an SQL expression for the value of that field, e.g.: 'profile_field_frog' =&gt; 'uf1d_3.data' 'city' =&gt; 'u.city' This is helpful if you want to use the profile fields in a WHERE clause, becuase you can't refer to the aliases used in the SELECT list there.</p>
<p>The leading comma is included because this makes it work in the pattern above even if there are no fields from the get_sql() data (which can happen if doing identity fields and none are selected). If you want the result without a leading comma, set $leadingcomma to false.</p>
<p>If the 'id' field is included then it will always be first in the list. Otherwise, you should not rely on the field order.</p>
<p>For identity fields, the function does all the required capability checks to see if the current user is allowed to see them in the specified context. You can pass context null to get all the fields without checking permissions.</p>
<p>If your code for any reason cannot cope with custom fields then you can turn them off.</p>
<p>You can have either named or ? params. If you use named params, they are of the form uf1s_2; the first number increments in each call using a static variable in this class and the second number refers to the field being queried. A similar pattern is used to make join aliases unique.</p>
<p>If your query refers to the user table by an alias e.g. 'u' then specify this in the $alias parameter; otherwise it will use {user} (if there are any joins for custom profile fields) or simply refer to the field by name only (if there aren't).</p>
<p>If you need to use a prefix on the field names (for example in case they might coincide with existing result columns from your query, or if you want a convenient way to split out all the user data into a separate object) then you can specify one here. For example, if you include name fields and the prefix is 'u_' then the results will include 'u_firstname'.</p>
<p>If you don't want to prefix all the field names but only change the id field name, use the $renameid parameter. (When you use this parameter, it takes precedence over any prefix; the id field will not be prefixed, while all others will.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$alias</td><td>Optional (but recommended) alias for user table in query, e.g. 'u' </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$namedparams</td><td>If true, uses named :parameters instead of indexed ? parameters </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$prefix</td><td>Optional prefix for all field names in result, e.g. 'u_' </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$renameid</td><td>Renames the 'id' field if specified, e.g. 'userid' </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$leadingcomma</td><td>If true the 'selects' list will start with a comma </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>Object with necessary SQL components </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5a43672f4478ae8dfd62bffca046d6cd" name="a5a43672f4478ae8dfd62bffca046d6cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a43672f4478ae8dfd62bffca046d6cd">&#9670;&#160;</a></span>get_sql_fullname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::get_sql_fullname </td>
          <td>(</td>
          <td class="paramtype">?string</td>          <td class="paramname"><span class="paramname"><em>$tablealias</em><span class="paramdefsep"> = </span><span class="paramdefval">'u'</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$override</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Similar to {. </p>
<dl class="section see"><dt>See also</dt><dd>moodle_database::sql_fullname} except it returns all user name fields as defined by site config, in a single select statement suitable for inclusion in a query/filter for a users <a class="el" href="../../d0/de1/group__core.html#ga22ae943f55a27f3b9cca15f8ddd05db7" title="Returns a persons full name.">fullname</a>, e.g.</dd></dl>
<p>[$select, $params] = fields::get_sql_fullname('u'); $users = $DB-&gt;get_records_sql_menu("SELECT u.id, {$select} FROM {user} u", $params);</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$tablealias</td><td>User table alias, if set elsewhere in the query, null if not required </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$override</td><td>If true then the alternativefullnameformat format rather than fullnamedisplay format will be used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>SQL select snippet and parameters </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ce4701857aa70c507d7556d2a25fbd2" name="a4ce4701857aa70c507d7556d2a25fbd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ce4701857aa70c507d7556d2a25fbd2">&#9670;&#160;</a></span>including()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::including </td>
          <td>(</td>
          <td class="paramtype">string ...</td>          <td class="paramname"><span class="paramname"><em>$include</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>On an existing fields object, adds extra fields to be retrieved. </p>
<p>You can specify either fields from the user table e.g. 'email', or profile fields e.g. 'profile_field_height'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>...$include One or more fields to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">$this</td><td>Same object for chaining function calls </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aba786f62b2ebbec04faf90161bfbb10f" name="aba786f62b2ebbec04faf90161bfbb10f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba786f62b2ebbec04faf90161bfbb10f">&#9670;&#160;</a></span>match_custom_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::match_custom_field </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fieldname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if a field name looks like a custom profile field i.e. </p>
<p>it begins with profile_field_ (does not check if that profile field actually exists).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$fieldname</td><td>Field name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Empty string if not a profile field, or profile field name (without profile_field_) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c8a424ab429f20ad86ee180ad3dc296" name="a6c8a424ab429f20ad86ee180ad3dc296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c8a424ab429f20ad86ee180ad3dc296">&#9670;&#160;</a></span>reset_unique_identifier()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user\fields::reset_unique_identifier </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets the unique identifier used to ensure that multiple SQL fragments generated in the same request will have different identifiers for parameters and table aliases. </p>
<p>This is intended only for use in unit testing. </p>

</div>
</div>
<a id="a21720822989f4f961ae36fb1b8d0da50" name="a21720822989f4f961ae36fb1b8d0da50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21720822989f4f961ae36fb1b8d0da50">&#9670;&#160;</a></span>with_identity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::with_identity </td>
          <td>(</td>
          <td class="paramtype">?\<a class="el" href="../../da/d04/classcontext.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$allowcustom</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>On an existing fields object, adds the fields required for displaying user identity. </p>
<p>The function does all the required capability checks to see if the current user is allowed to see them in the specified context. You can pass context null to get all the fields without checking permissions.</p>
<p>If the code can only handle fields in the main user table, and not custom profile fields, then set $allowcustom to false.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">context|null</td><td>Context; if supplied, includes only fields the current user should see </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$allowcustom</td><td>If true, custom profile fields may be included </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">$this</td><td>Same object for chaining function calls </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4d71f8e3420bc603e33012d018382793" name="a4d71f8e3420bc603e33012d018382793"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d71f8e3420bc603e33012d018382793">&#9670;&#160;</a></span>with_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::with_name </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>On an existing fields object, adds the fields required for displaying user full names. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">$this</td><td>Same object for chaining function calls </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1d181cb7ada62c3eeda06a955df60d01" name="a1d181cb7ada62c3eeda06a955df60d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d181cb7ada62c3eeda06a955df60d01">&#9670;&#160;</a></span>with_userpic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_user\fields::with_userpic </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>On an existing fields object, adds the fields required for displaying user pictures. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">$this</td><td>Same object for chaining function calls </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>user/classes/<b>fields.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 21 2024 02:25:23 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
