<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: component_installer Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.10+ (Build: 20240516) (f7da739ea04)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d1/d3f/classcomponent__installer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">component_installer Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a> &#124; <a class="el" href="../../d6/d9f/group__moodlecore.html">moodlecore</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>This class is used to check, download and install items from download.moodle.org to the moodledata directory.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7751318b094b1365ec5f8a2e5928a844" id="r_a7751318b094b1365ec5f8a2e5928a844"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7751318b094b1365ec5f8a2e5928a844">__construct</a> ($sourcebase, $zippath, $zipfilename, $md5filename='', $destpath='')</td></tr>
<tr class="memdesc:a7751318b094b1365ec5f8a2e5928a844"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of cached components to avoid to.  <br /></td></tr>
<tr class="separator:a7751318b094b1365ec5f8a2e5928a844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d6d455d69d950ea9a4bb74b76bc4e4" id="r_a07d6d455d69d950ea9a4bb74b76bc4e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07d6d455d69d950ea9a4bb74b76bc4e4">change_zip_file</a> ($newzipfilename)</td></tr>
<tr class="memdesc:a07d6d455d69d950ea9a4bb74b76bc4e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will change the zip file to install on the fly to allow the class to process different components of the same md5 file without intantiating more objects.  <br /></td></tr>
<tr class="separator:a07d6d455d69d950ea9a4bb74b76bc4e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc845d657fef5b5112be4b6c5e25d554" id="r_afc845d657fef5b5112be4b6c5e25d554"><td class="memItemLeft" align="right" valign="top">object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc845d657fef5b5112be4b6c5e25d554">check_requisites</a> ()</td></tr>
<tr class="memdesc:afc845d657fef5b5112be4b6c5e25d554"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will check if everything is properly set to begin one installation.  <br /></td></tr>
<tr class="separator:afc845d657fef5b5112be4b6c5e25d554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd88919b8f329cc216be61e9af0bbd8" id="r_a1dd88919b8f329cc216be61e9af0bbd8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1dd88919b8f329cc216be61e9af0bbd8">component_installer</a> ($sourcebase, $zippath, $zipfilename, $md5filename='', $destpath='')</td></tr>
<tr class="memdesc:a1dd88919b8f329cc216be61e9af0bbd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old syntax of class constructor.  <br /></td></tr>
<tr class="separator:a1dd88919b8f329cc216be61e9af0bbd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c9148bb1fc80e61914aeddbc2578a21" id="r_a7c9148bb1fc80e61914aeddbc2578a21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c9148bb1fc80e61914aeddbc2578a21">get_all_components_md5</a> ()</td></tr>
<tr class="memdesc:a7c9148bb1fc80e61914aeddbc2578a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows you to retrieve the complete array of components found in the md5filename.  <br /></td></tr>
<tr class="separator:a7c9148bb1fc80e61914aeddbc2578a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf7d0fbf5d1aaa00f8ac1bd5c86382bd" id="r_adf7d0fbf5d1aaa00f8ac1bd5c86382bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf7d0fbf5d1aaa00f8ac1bd5c86382bd">get_component_md5</a> ()</td></tr>
<tr class="memdesc:adf7d0fbf5d1aaa00f8ac1bd5c86382bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will download the specified md5 file, looking for the current componentname, returning its md5 field and storing extramd5info if present.  <br /></td></tr>
<tr class="separator:adf7d0fbf5d1aaa00f8ac1bd5c86382bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ea0ea95151267bf99757e3bb9dfb0d" id="r_ad8ea0ea95151267bf99757e3bb9dfb0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8ea0ea95151267bf99757e3bb9dfb0d">get_error</a> ()</td></tr>
<tr class="memdesc:ad8ea0ea95151267bf99757e3bb9dfb0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns the errorstring.  <br /></td></tr>
<tr class="separator:ad8ea0ea95151267bf99757e3bb9dfb0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8084047b00830a71effa569b053754a5" id="r_a8084047b00830a71effa569b053754a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8084047b00830a71effa569b053754a5">get_extra_md5_field</a> ()</td></tr>
<tr class="memdesc:a8084047b00830a71effa569b053754a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns the extramd5 field (optional in md5 file)  <br /></td></tr>
<tr class="separator:a8084047b00830a71effa569b053754a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4504a87bae65bf5d0220a1c82e8ed68f" id="r_a4504a87bae65bf5d0220a1c82e8ed68f"><td class="memItemLeft" align="right" valign="top">object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4504a87bae65bf5d0220a1c82e8ed68f">get_local_md5</a> ()</td></tr>
<tr class="memdesc:a4504a87bae65bf5d0220a1c82e8ed68f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will get the local md5 value of the installed component.  <br /></td></tr>
<tr class="separator:a4504a87bae65bf5d0220a1c82e8ed68f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c86e8912abab97026490fcfded91eac" id="r_a3c86e8912abab97026490fcfded91eac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c86e8912abab97026490fcfded91eac">install</a> ()</td></tr>
<tr class="memdesc:a3c86e8912abab97026490fcfded91eac"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will perform the full installation if needed, i.e.  <br /></td></tr>
<tr class="separator:a3c86e8912abab97026490fcfded91eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24fe3af974f50124ff67b80151b64d5a" id="r_a24fe3af974f50124ff67b80151b64d5a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24fe3af974f50124ff67b80151b64d5a">need_upgrade</a> ()</td></tr>
<tr class="memdesc:a24fe3af974f50124ff67b80151b64d5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will detect if remote component needs to be installed because it's different from the local one.  <br /></td></tr>
<tr class="separator:a24fe3af974f50124ff67b80151b64d5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aed30a4c4f88efa9c19e41c6f35978ae2" id="r_aed30a4c4f88efa9c19e41c6f35978ae2"><td class="memItemLeft" align="right" valign="top"><a id="aed30a4c4f88efa9c19e41c6f35978ae2" name="aed30a4c4f88efa9c19e41c6f35978ae2"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$cachedmd5components</b></td></tr>
<tr class="memdesc:aed30a4c4f88efa9c19e41c6f35978ae2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag to see if requisites check has been passed ok. <br /></td></tr>
<tr class="separator:aed30a4c4f88efa9c19e41c6f35978ae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceed94825d64f79f93d637b5c8bd9492" id="r_aceed94825d64f79f93d637b5c8bd9492"><td class="memItemLeft" align="right" valign="top"><a id="aceed94825d64f79f93d637b5c8bd9492" name="aceed94825d64f79f93d637b5c8bd9492"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$componentname</b></td></tr>
<tr class="memdesc:aceed94825d64f79f93d637b5c8bd9492"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the .md5 file to be read. <br /></td></tr>
<tr class="separator:aceed94825d64f79f93d637b5c8bd9492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab213217b1b91bbc6f70df1b055842b0e" id="r_ab213217b1b91bbc6f70df1b055842b0e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab213217b1b91bbc6f70df1b055842b0e">$destpath</a></td></tr>
<tr class="memdesc:ab213217b1b91bbc6f70df1b055842b0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the component.  <br /></td></tr>
<tr class="separator:ab213217b1b91bbc6f70df1b055842b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd8a51f66eb4c33e76e8f9b0a33b4eb4" id="r_abd8a51f66eb4c33e76e8f9b0a33b4eb4"><td class="memItemLeft" align="right" valign="top"><a id="abd8a51f66eb4c33e76e8f9b0a33b4eb4" name="abd8a51f66eb4c33e76e8f9b0a33b4eb4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$errorstring</b></td></tr>
<tr class="memdesc:abd8a51f66eb4c33e76e8f9b0a33b4eb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Relative path (from moodledata) where the .zip file will be expanded. <br /></td></tr>
<tr class="separator:abd8a51f66eb4c33e76e8f9b0a33b4eb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8614bc18dde0cea16c3c8bbed00051c9" id="r_a8614bc18dde0cea16c3c8bbed00051c9"><td class="memItemLeft" align="right" valign="top"><a id="a8614bc18dde0cea16c3c8bbed00051c9" name="a8614bc18dde0cea16c3c8bbed00051c9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$extramd5info</b></td></tr>
<tr class="memdesc:a8614bc18dde0cea16c3c8bbed00051c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Latest error produced. It will contain one lang string key. <br /></td></tr>
<tr class="separator:a8614bc18dde0cea16c3c8bbed00051c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4eb514f49cc126db52bfacd05141249" id="r_ac4eb514f49cc126db52bfacd05141249"><td class="memItemLeft" align="right" valign="top"><a id="ac4eb514f49cc126db52bfacd05141249" name="ac4eb514f49cc126db52bfacd05141249"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$md5filename</b></td></tr>
<tr class="memdesc:ac4eb514f49cc126db52bfacd05141249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the .zip file to be downloaded. <br /></td></tr>
<tr class="separator:ac4eb514f49cc126db52bfacd05141249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec1119d38ba3698b595ad5c0ab5e19f" id="r_a8ec1119d38ba3698b595ad5c0ab5e19f"><td class="memItemLeft" align="right" valign="top"><a id="a8ec1119d38ba3698b595ad5c0ab5e19f" name="a8ec1119d38ba3698b595ad5c0ab5e19f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$requisitesok</b></td></tr>
<tr class="memdesc:a8ec1119d38ba3698b595ad5c0ab5e19f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contents of the optional third field in the .md5 file. <br /></td></tr>
<tr class="separator:a8ec1119d38ba3698b595ad5c0ab5e19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cec42a64bae97b17c71f0859e935509" id="r_a2cec42a64bae97b17c71f0859e935509"><td class="memItemLeft" align="right" valign="top"><a id="a2cec42a64bae97b17c71f0859e935509" name="a2cec42a64bae97b17c71f0859e935509"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$sourcebase</b></td></tr>
<tr class="separator:a2cec42a64bae97b17c71f0859e935509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dcea1ac99d97e3f1a9cf7c0c96bd788" id="r_a5dcea1ac99d97e3f1a9cf7c0c96bd788"><td class="memItemLeft" align="right" valign="top"><a id="a5dcea1ac99d97e3f1a9cf7c0c96bd788" name="a5dcea1ac99d97e3f1a9cf7c0c96bd788"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$zipfilename</b></td></tr>
<tr class="memdesc:a5dcea1ac99d97e3f1a9cf7c0c96bd788"><td class="mdescLeft">&#160;</td><td class="mdescRight">Relative path (from sourcebase) where the downloadeable item resides. <br /></td></tr>
<tr class="separator:a5dcea1ac99d97e3f1a9cf7c0c96bd788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9779ced13adbf6d36fee46573c6ce557" id="r_a9779ced13adbf6d36fee46573c6ce557"><td class="memItemLeft" align="right" valign="top"><a id="a9779ced13adbf6d36fee46573c6ce557" name="a9779ced13adbf6d36fee46573c6ce557"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$zippath</b></td></tr>
<tr class="memdesc:a9779ced13adbf6d36fee46573c6ce557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Full http URL, base for downloadable items. <br /></td></tr>
<tr class="separator:a9779ced13adbf6d36fee46573c6ce557"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is used to check, download and install items from download.moodle.org to the moodledata directory. </p>
<p>It always return true/false in all their public methods to say if execution has ended succesfuly or not. If there is any problem its getError() method can be called, returning one error string to be used with the standard get/print_string() functions.</p>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7751318b094b1365ec5f8a2e5928a844" name="a7751318b094b1365ec5f8a2e5928a844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7751318b094b1365ec5f8a2e5928a844">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sourcebase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$zippath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$zipfilename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$md5filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$destpath</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array of cached components to avoid to. </p>
<p>download the same md5 file more than once per request. Standard constructor of the class. It will initialize all attributes. without performing any check at all.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sourcebase</td><td>Full http URL, base for downloadeable items </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$zippath</td><td>Relative path (from sourcebase) where the downloadeable item resides </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$zipfilename</td><td>Name of the .zip file to be downloaded </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$md5filename</td><td>Name of the .md5 file to be read (default '' = same than zipfilename) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$destpath</td><td>Relative path (from moodledata) where the .zip file will be expanded (default='' = moodledataitself) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">object</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a07d6d455d69d950ea9a4bb74b76bc4e4" name="a07d6d455d69d950ea9a4bb74b76bc4e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07d6d455d69d950ea9a4bb74b76bc4e4">&#9670;&#160;</a></span>change_zip_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::change_zip_file </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$newzipfilename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will change the zip file to install on the fly to allow the class to process different components of the same md5 file without intantiating more objects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$newzipfilename</td><td>New zip filename to process </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true/false </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afc845d657fef5b5112be4b6c5e25d554" name="afc845d657fef5b5112be4b6c5e25d554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc845d657fef5b5112be4b6c5e25d554">&#9670;&#160;</a></span>check_requisites()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">object component_installer::check_requisites </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will check if everything is properly set to begin one installation. </p>
<p>Also, it will check for required settings and will fill everything as needed.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true/false (plus detailed error in errorstring) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1dd88919b8f329cc216be61e9af0bbd8" name="a1dd88919b8f329cc216be61e9af0bbd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dd88919b8f329cc216be61e9af0bbd8">&#9670;&#160;</a></span>component_installer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::component_installer </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sourcebase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$zippath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$zipfilename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$md5filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$destpath</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Old syntax of class constructor. </p>
<p>Deprecated in PHP7.</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000215">Deprecated</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.1 </dd></dl>

</div>
</div>
<a id="a7c9148bb1fc80e61914aeddbc2578a21" name="a7c9148bb1fc80e61914aeddbc2578a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c9148bb1fc80e61914aeddbc2578a21">&#9670;&#160;</a></span>get_all_components_md5()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::get_all_components_md5 </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows you to retrieve the complete array of components found in the md5filename. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|array</td><td>array of components in md5 file or false if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf7d0fbf5d1aaa00f8ac1bd5c86382bd" name="adf7d0fbf5d1aaa00f8ac1bd5c86382bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf7d0fbf5d1aaa00f8ac1bd5c86382bd">&#9670;&#160;</a></span>get_component_md5()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::get_component_md5 </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will download the specified md5 file, looking for the current componentname, returning its md5 field and storing extramd5info if present. </p>
<p>Also it caches results to cachedmd5components for better performance in the same request.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>md5 present in server (or false if error) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad8ea0ea95151267bf99757e3bb9dfb0d" name="ad8ea0ea95151267bf99757e3bb9dfb0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ea0ea95151267bf99757e3bb9dfb0d">&#9670;&#160;</a></span>get_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::get_error </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns the errorstring. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the error string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8084047b00830a71effa569b053754a5" name="a8084047b00830a71effa569b053754a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8084047b00830a71effa569b053754a5">&#9670;&#160;</a></span>get_extra_md5_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::get_extra_md5_field </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns the extramd5 field (optional in md5 file) </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the extramd5 field </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4504a87bae65bf5d0220a1c82e8ed68f" name="a4504a87bae65bf5d0220a1c82e8ed68f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4504a87bae65bf5d0220a1c82e8ed68f">&#9670;&#160;</a></span>get_local_md5()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">object component_installer::get_local_md5 </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will get the local md5 value of the installed component. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|string</td><td>md5 of the local component (false on error) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c86e8912abab97026490fcfded91eac" name="a3c86e8912abab97026490fcfded91eac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c86e8912abab97026490fcfded91eac">&#9670;&#160;</a></span>install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::install </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will perform the full installation if needed, i.e. </p>
<p>compare md5 values, download, unzip, install and regenerate local md5 file</p>
<p>@uses COMPONENT_ERROR @uses COMPONENT_UPTODATE @uses COMPONENT_ERROR @uses COMPONENT_INSTALLED </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>COMPONENT_(ERROR | UPTODATE | INSTALLED) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a24fe3af974f50124ff67b80151b64d5a" name="a24fe3af974f50124ff67b80151b64d5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24fe3af974f50124ff67b80151b64d5a">&#9670;&#160;</a></span>need_upgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::need_upgrade </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will detect if remote component needs to be installed because it's different from the local one. </p>
<p>@uses COMPONENT_ERROR @uses COMPONENT_UPTODATE @uses COMPONENT_NEEDUPDATE </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>COMPONENT_(ERROR | UPTODATE | NEEDUPDATE) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab213217b1b91bbc6f70df1b055842b0e" name="ab213217b1b91bbc6f70df1b055842b0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab213217b1b91bbc6f70df1b055842b0e">&#9670;&#160;</a></span>$destpath</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">component_installer::$destpath</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Name of the component. </p>
<p>Must be the zip name without the extension. And it defines a lot of things: the md5 line to search for, the default m5 file name and the name of the root dir stored inside the zip file </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/<b>componentlib.class.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 26 2024 02:34:13 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
