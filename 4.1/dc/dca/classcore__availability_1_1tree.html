<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_availability\tree Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.10 (Build: 20240422) (e8d03fdae4e)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d10/namespacecore__availability.html">core_availability</a></li><li class="navelem"><a class="el" href="../../dc/dca/classcore__availability_1_1tree.html">tree</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d6/d75/classcore__availability_1_1tree-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_availability\tree Class Reference<div class="ingroups"><a class="el" href="../../de/d6c/group__core__availability.html">core_availability</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Class that holds a tree of availability conditions.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for core_availability\tree:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../dc/dca/classcore__availability_1_1tree.png" usemap="#core_5Favailability_5Ctree_map" alt=""/>
  <map id="core_5Favailability_5Ctree_map" name="core_5Favailability_5Ctree_map">
<area href="../../d6/dea/classcore__availability_1_1tree__node.html" title="Node (base class) used to construct a tree of availability conditions." alt="core_availability\tree_node" shape="rect" coords="0,0,166,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a686c0eeef6230df6305b468cb4c58bc4" id="r_a686c0eeef6230df6305b468cb4c58bc4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a686c0eeef6230df6305b468cb4c58bc4">__construct</a> ($structure, $lax=false, $root=true)</td></tr>
<tr class="memdesc:a686c0eeef6230df6305b468cb4c58bc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes availability structure.  <br /></td></tr>
<tr class="separator:a686c0eeef6230df6305b468cb4c58bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea6c5dc23aed0cfa50679a2362a0bce" id="r_adea6c5dc23aed0cfa50679a2362a0bce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adea6c5dc23aed0cfa50679a2362a0bce">__toString</a> ()</td></tr>
<tr class="memdesc:adea6c5dc23aed0cfa50679a2362a0bce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display a representation of this tree (used for debugging).  <br /></td></tr>
<tr class="separator:adea6c5dc23aed0cfa50679a2362a0bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2662af051b024c24f2cb5515e63f25e5" id="r_a2662af051b024c24f2cb5515e63f25e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a2662af051b024c24f2cb5515e63f25e5">check_available</a> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $grabthelot, $userid)</td></tr>
<tr class="memdesc:a2662af051b024c24f2cb5515e63f25e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether this particular item is currently available according to the availability criteria.  <br /></td></tr>
<tr class="separator:a2662af051b024c24f2cb5515e63f25e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2f4e7e1f972408eb0b6033f5f0c2fd" id="r_a6f2f4e7e1f972408eb0b6033f5f0c2fd"><td class="memItemLeft" align="right" valign="top"><a id="a6f2f4e7e1f972408eb0b6033f5f0c2fd" name="a6f2f4e7e1f972408eb0b6033f5f0c2fd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>check_available</b> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $grabthelot, $userid)</td></tr>
<tr class="separator:a6f2f4e7e1f972408eb0b6033f5f0c2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fdeb23d9151ac36695ee7aa9473cf4f" id="r_a7fdeb23d9151ac36695ee7aa9473cf4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a7fdeb23d9151ac36695ee7aa9473cf4f">filter_user_list</a> (array $users, $not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, <a class="el" href="../../db/d23/classcore__availability_1_1capability__checker.html">capability_checker</a> $checker)</td></tr>
<tr class="memdesc:a7fdeb23d9151ac36695ee7aa9473cf4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests this condition against a user list.  <br /></td></tr>
<tr class="separator:a7fdeb23d9151ac36695ee7aa9473cf4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae3c55514826d5db72ede6977df25d6" id="r_a2ae3c55514826d5db72ede6977df25d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ae3c55514826d5db72ede6977df25d6">filter_user_list</a> (array $users, $not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, <a class="el" href="../../db/d23/classcore__availability_1_1capability__checker.html">capability_checker</a> $checker)</td></tr>
<tr class="memdesc:a2ae3c55514826d5db72ede6977df25d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests against a user list.  <br /></td></tr>
<tr class="separator:a2ae3c55514826d5db72ede6977df25d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e641e5096b50b8385580cff30bd2f8" id="r_ae0e641e5096b50b8385580cff30bd2f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0e641e5096b50b8385580cff30bd2f8">get_all_children</a> ($classname)</td></tr>
<tr class="memdesc:ae0e641e5096b50b8385580cff30bd2f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively gets all children of a particular class (you can use a base class to get all conditions, or a specific class).  <br /></td></tr>
<tr class="separator:ae0e641e5096b50b8385580cff30bd2f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebe4f3832ec1b64f7bdbf9bd3020415" id="r_acebe4f3832ec1b64f7bdbf9bd3020415"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acebe4f3832ec1b64f7bdbf9bd3020415">get_full_information</a> (<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>)</td></tr>
<tr class="memdesc:acebe4f3832ec1b64f7bdbf9bd3020415"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets full information about this tree (including all children) as HTML for display to staff.  <br /></td></tr>
<tr class="separator:acebe4f3832ec1b64f7bdbf9bd3020415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d487a197a2fb1752935413805df948" id="r_a35d487a197a2fb1752935413805df948"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35d487a197a2fb1752935413805df948">get_logic_flags</a> ($not)</td></tr>
<tr class="memdesc:a35d487a197a2fb1752935413805df948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the operator for the tree into two flags used for computing the result.  <br /></td></tr>
<tr class="separator:a35d487a197a2fb1752935413805df948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9d98030d1e32a9e190e910aabc5c4d" id="r_a8d9d98030d1e32a9e190e910aabc5c4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d9d98030d1e32a9e190e910aabc5c4d">get_result_information</a> (<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, <a class="el" href="../../dc/d39/classcore__availability_1_1result.html">result</a> $<a class="el" href="../../dc/d39/classcore__availability_1_1result.html">result</a>)</td></tr>
<tr class="memdesc:a8d9d98030d1e32a9e190e910aabc5c4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets information about this tree corresponding to the given result object.  <br /></td></tr>
<tr class="separator:a8d9d98030d1e32a9e190e910aabc5c4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcdfd8dc9e493a341d6363917b33f9e3" id="r_afcdfd8dc9e493a341d6363917b33f9e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#afcdfd8dc9e493a341d6363917b33f9e3">get_user_list_sql</a> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $onlyactive)</td></tr>
<tr class="memdesc:afcdfd8dc9e493a341d6363917b33f9e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains SQL that returns a list of enrolled users that has been filtered by the conditions applied in the availability API, similar to calling get_enrolled_users and then filter_user_list.  <br /></td></tr>
<tr class="separator:afcdfd8dc9e493a341d6363917b33f9e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5921496cd7bb95295c3f07d4f4fab3e" id="r_af5921496cd7bb95295c3f07d4f4fab3e"><td class="memItemLeft" align="right" valign="top"><a id="af5921496cd7bb95295c3f07d4f4fab3e" name="af5921496cd7bb95295c3f07d4f4fab3e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_user_list_sql</b> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $onlyactive)</td></tr>
<tr class="separator:af5921496cd7bb95295c3f07d4f4fab3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff32aa7bf54d058cada78079b4bdcaa1" id="r_aff32aa7bf54d058cada78079b4bdcaa1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#aff32aa7bf54d058cada78079b4bdcaa1">include_after_restore</a> ($restoreid, $courseid, <a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a> $logger, $name, <a class="el" href="../../d2/de0/classbase__task.html">base_task</a> $task)</td></tr>
<tr class="memdesc:aff32aa7bf54d058cada78079b4bdcaa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this node should be included after restore or not.  <br /></td></tr>
<tr class="separator:aff32aa7bf54d058cada78079b4bdcaa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3623e6351497272e2a670a056b084103" id="r_a3623e6351497272e2a670a056b084103"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3623e6351497272e2a670a056b084103">is_applied_to_user_lists</a> ()</td></tr>
<tr class="memdesc:a3623e6351497272e2a670a056b084103"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this condition applies to user lists.  <br /></td></tr>
<tr class="separator:a3623e6351497272e2a670a056b084103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c67f23f2cce3fca2851cdd1842193a7" id="r_a5c67f23f2cce3fca2851cdd1842193a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c67f23f2cce3fca2851cdd1842193a7">is_available_for_all</a> ($not=false)</td></tr>
<tr class="memdesc:a5c67f23f2cce3fca2851cdd1842193a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this condition is actually going to be available for all users under normal circumstances.  <br /></td></tr>
<tr class="separator:a5c67f23f2cce3fca2851cdd1842193a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c155a18090fd91877b765807c528070" id="r_a8c155a18090fd91877b765807c528070"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c155a18090fd91877b765807c528070">is_empty</a> ()</td></tr>
<tr class="memdesc:a8c155a18090fd91877b765807c528070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this tree is empty (contains no children).  <br /></td></tr>
<tr class="separator:a8c155a18090fd91877b765807c528070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4366c88dcf23c03bb7748cf078b29067" id="r_a4366c88dcf23c03bb7748cf078b29067"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4366c88dcf23c03bb7748cf078b29067">save</a> ()</td></tr>
<tr class="memdesc:a4366c88dcf23c03bb7748cf078b29067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves tree data back to a structure object.  <br /></td></tr>
<tr class="separator:a4366c88dcf23c03bb7748cf078b29067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae86cbb7389c1f8da17b6e5c726213be9" id="r_ae86cbb7389c1f8da17b6e5c726213be9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae86cbb7389c1f8da17b6e5c726213be9">update_after_restore</a> ($restoreid, $courseid, <a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a> $logger, $name)</td></tr>
<tr class="memdesc:ae86cbb7389c1f8da17b6e5c726213be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates this node after restore, returning true if anything changed.  <br /></td></tr>
<tr class="separator:ae86cbb7389c1f8da17b6e5c726213be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fde407c7d5f95dcf82b80b626cfd21d" id="r_a9fde407c7d5f95dcf82b80b626cfd21d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9fde407c7d5f95dcf82b80b626cfd21d">update_dependency_id</a> ($table, $oldid, $newid)</td></tr>
<tr class="memdesc:a9fde407c7d5f95dcf82b80b626cfd21d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates this node if it contains any references (dependencies) to the given table and id.  <br /></td></tr>
<tr class="separator:a9fde407c7d5f95dcf82b80b626cfd21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5ec01444e5e38935bb216f9316e8f6e8" id="r_a5ec01444e5e38935bb216f9316e8f6e8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5ec01444e5e38935bb216f9316e8f6e8">get_nested_json</a> (array $children, $op=self::OP_AND)</td></tr>
<tr class="memdesc:a5ec01444e5e38935bb216f9316e8f6e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a JSON object which corresponds to a tree.  <br /></td></tr>
<tr class="separator:a5ec01444e5e38935bb216f9316e8f6e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17fb4b0bbbfc966d9d531e445a6180fe" id="r_a17fb4b0bbbfc966d9d531e445a6180fe"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17fb4b0bbbfc966d9d531e445a6180fe">get_root_json</a> (array $children, $op=self::OP_AND, $show=true)</td></tr>
<tr class="memdesc:a17fb4b0bbbfc966d9d531e445a6180fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a JSON object which corresponds to a tree at root level.  <br /></td></tr>
<tr class="separator:a17fb4b0bbbfc966d9d531e445a6180fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a44731d8a6a5a4d0c02299a5364f46e76" id="r_a44731d8a6a5a4d0c02299a5364f46e76"><td class="memItemLeft" align="right" valign="top"><a id="a44731d8a6a5a4d0c02299a5364f46e76" name="a44731d8a6a5a4d0c02299a5364f46e76"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>OP_AND</b> = '&amp;'</td></tr>
<tr class="memdesc:a44731d8a6a5a4d0c02299a5364f46e76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator: AND. <br /></td></tr>
<tr class="separator:a44731d8a6a5a4d0c02299a5364f46e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b336e6e16a4f5b50b54e47657720729" id="r_a9b336e6e16a4f5b50b54e47657720729"><td class="memItemLeft" align="right" valign="top"><a id="a9b336e6e16a4f5b50b54e47657720729" name="a9b336e6e16a4f5b50b54e47657720729"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>OP_NOT_AND</b> = '!&amp;'</td></tr>
<tr class="memdesc:a9b336e6e16a4f5b50b54e47657720729"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator: NOT(AND) <br /></td></tr>
<tr class="separator:a9b336e6e16a4f5b50b54e47657720729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a327e718e00d787a292d9268c93477b" id="r_a9a327e718e00d787a292d9268c93477b"><td class="memItemLeft" align="right" valign="top"><a id="a9a327e718e00d787a292d9268c93477b" name="a9a327e718e00d787a292d9268c93477b"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>OP_NOT_OR</b> = '!|'</td></tr>
<tr class="memdesc:a9a327e718e00d787a292d9268c93477b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator: NOT(OR) <br /></td></tr>
<tr class="separator:a9a327e718e00d787a292d9268c93477b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e0d453e041e1c86c7b9117d9a0b0cd3" id="r_a9e0d453e041e1c86c7b9117d9a0b0cd3"><td class="memItemLeft" align="right" valign="top"><a id="a9e0d453e041e1c86c7b9117d9a0b0cd3" name="a9e0d453e041e1c86c7b9117d9a0b0cd3"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>OP_OR</b> = '|'</td></tr>
<tr class="memdesc:a9e0d453e041e1c86c7b9117d9a0b0cd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator: OR. <br /></td></tr>
<tr class="separator:a9e0d453e041e1c86c7b9117d9a0b0cd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a457d384e2b7b1968b84a34a1b7278f0a" id="r_a457d384e2b7b1968b84a34a1b7278f0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a457d384e2b7b1968b84a34a1b7278f0a">get_full_information_recursive</a> ( $not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, ?<a class="el" href="../../dc/d39/classcore__availability_1_1result.html">result</a> $<a class="el" href="../../dc/d39/classcore__availability_1_1result.html">result</a>, $root, $hidden=false)</td></tr>
<tr class="memdesc:a457d384e2b7b1968b84a34a1b7278f0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets information about this tree (including all or selected children) as HTML for display to staff or student.  <br /></td></tr>
<tr class="separator:a457d384e2b7b1968b84a34a1b7278f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b6f3f2332e6487dab30f27eeff2b94" id="r_a52b6f3f2332e6487dab30f27eeff2b94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a52b6f3f2332e6487dab30f27eeff2b94">recursive_get_all_children</a> ($classname, array &amp;$<a class="el" href="../../dc/d39/classcore__availability_1_1result.html">result</a>)</td></tr>
<tr class="memdesc:a52b6f3f2332e6487dab30f27eeff2b94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function that implements get_all_children efficiently.  <br /></td></tr>
<tr class="separator:a52b6f3f2332e6487dab30f27eeff2b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a97ba6eab3b91bfddcbf90cd0e31de3bd" id="r_a97ba6eab3b91bfddcbf90cd0e31de3bd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a97ba6eab3b91bfddcbf90cd0e31de3bd">unique_sql_parameter</a> (array &amp;$params, $<a class="el" href="../../d8/ded/group___simple_pie.html#gaefbfa229f1c9e1fc967bff724a010f9e">value</a>)</td></tr>
<tr class="memdesc:a97ba6eab3b91bfddcbf90cd0e31de3bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function for generating SQL parameters (because we can't use ? parameters because get_enrolled_sql has infected us with horrible named parameters).  <br /></td></tr>
<tr class="separator:a97ba6eab3b91bfddcbf90cd0e31de3bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a05a4e873b0b1843b811dd4a1d913847f" id="r_a05a4e873b0b1843b811dd4a1d913847f"><td class="memItemLeft" align="right" valign="top"><a id="a05a4e873b0b1843b811dd4a1d913847f" name="a05a4e873b0b1843b811dd4a1d913847f"></a>
<a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html">tree_node</a>[]&#160;</td><td class="memItemRight" valign="bottom"><b>$children</b></td></tr>
<tr class="memdesc:a05a4e873b0b1843b811dd4a1d913847f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Children in this branch (may be empty array if needed) <br /></td></tr>
<tr class="separator:a05a4e873b0b1843b811dd4a1d913847f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abadc8c51091448c47a5b28f9a57a40bc" id="r_abadc8c51091448c47a5b28f9a57a40bc"><td class="memItemLeft" align="right" valign="top"><a id="abadc8c51091448c47a5b28f9a57a40bc" name="abadc8c51091448c47a5b28f9a57a40bc"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$op</b></td></tr>
<tr class="memdesc:abadc8c51091448c47a5b28f9a57a40bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator type (OP_xx constant) <br /></td></tr>
<tr class="separator:abadc8c51091448c47a5b28f9a57a40bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a814ddaa474753055379d18fc26488116" id="r_a814ddaa474753055379d18fc26488116"><td class="memItemLeft" align="right" valign="top"><a id="a814ddaa474753055379d18fc26488116" name="a814ddaa474753055379d18fc26488116"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$root</b></td></tr>
<tr class="memdesc:a814ddaa474753055379d18fc26488116"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if this tree is at root level. <br /></td></tr>
<tr class="separator:a814ddaa474753055379d18fc26488116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f11b64abd2ba97852e0294653145e5" id="r_a73f11b64abd2ba97852e0294653145e5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73f11b64abd2ba97852e0294653145e5">$show</a></td></tr>
<tr class="memdesc:a73f11b64abd2ba97852e0294653145e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Single 'show information or hide completely' option for tree.  <br /></td></tr>
<tr class="separator:a73f11b64abd2ba97852e0294653145e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaadd5da9208ab27e436e58c02a22eda8" id="r_aaadd5da9208ab27e436e58c02a22eda8"><td class="memItemLeft" align="right" valign="top">bool[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaadd5da9208ab27e436e58c02a22eda8">$showchildren</a></td></tr>
<tr class="memdesc:aaadd5da9208ab27e436e58c02a22eda8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of 'show information or hide completely' options for each child.  <br /></td></tr>
<tr class="separator:aaadd5da9208ab27e436e58c02a22eda8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:ad4a32aa826eb99dad0d837e8ba681372" id="r_ad4a32aa826eb99dad0d837e8ba681372"><td class="memItemLeft" align="right" valign="top"><a id="ad4a32aa826eb99dad0d837e8ba681372" name="ad4a32aa826eb99dad0d837e8ba681372"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>$uniquesqlparametercounter</b> = 1</td></tr>
<tr class="memdesc:ad4a32aa826eb99dad0d837e8ba681372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter to be used in <a class="el" href="">tree_node::unique_sql_parameter()</a>. <br /></td></tr>
<tr class="separator:ad4a32aa826eb99dad0d837e8ba681372"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that holds a tree of availability conditions. </p>
<p>The structure of this tree in JSON input data is:</p>
<p>{ op:'&amp;', c:[] }</p>
<p>where 'op' is one of the OP_xx constants and 'c' is an array of children.</p>
<p>At the root level one of the following additional values must be included:</p>
<p>op '|' or '!&amp;' show:true Boolean value controlling whether a failed match causes the item to display to students with information, or be completely hidden. op '&amp;' or '!|' showc:[] Array of same length as c with booleans corresponding to each child; you can make it be hidden or shown depending on which one they fail. (Anything with false takes precedence.)</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2014 The Open University </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a686c0eeef6230df6305b468cb4c58bc4" name="a686c0eeef6230df6305b468cb4c58bc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a686c0eeef6230df6305b468cb4c58bc4">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$structure</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$lax</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$root</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes availability structure. </p>
<p>This function also validates the retrieved data as follows:</p><ol type="1">
<li>Data that does not meet the API-defined structure causes a <a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a> (this should be impossible unless there is a system bug or somebody manually hacks the database).</li>
<li>Data that meets the structure but cannot be implemented (e.g. reference to missing plugin or to module that doesn't exist) is either silently discarded (if $lax is true) or causes a <a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a> (if $lax is false).</li>
</ol>
<dl class="section see"><dt>See also</dt><dd>decode_availability </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$structure</td><td>Structure (decoded from JSON) </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$lax</td><td>If true, throw exceptions only for invalid structure </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$root</td><td>If true, this is the root tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">tree</td><td>Availability tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If data is not valid structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adea6c5dc23aed0cfa50679a2362a0bce" name="adea6c5dc23aed0cfa50679a2362a0bce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adea6c5dc23aed0cfa50679a2362a0bce">&#9670;&#160;</a></span>__toString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::__toString </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display a representation of this tree (used for debugging). </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td><a class="el" href="../../da/d0e/class_text.html">Text</a> representation of tree </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2662af051b024c24f2cb5515e63f25e5" name="a2662af051b024c24f2cb5515e63f25e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2662af051b024c24f2cb5515e63f25e5">&#9670;&#160;</a></span>check_available()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::check_available </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$grabthelot</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether this particular item is currently available according to the availability criteria. </p>
<ul>
<li>This does not include the 'visible' setting (i.e. this might return true even if visible is false); visible is handled independently.</li>
<li>This does not take account of the viewhiddenactivities capability. That should apply later.</li>
</ul>
<p>The $not option is potentially confusing. This option always indicates the 'real' value of NOT. For example, a condition inside a 'NOT AND' group will get this called with $not = true, but if you put another 'NOT OR' group inside the first group, then a condition inside that will be called with $not = false. We need to use the real values, rather than the more natural use of the current value at this point inside the tree, so that the information displayed to users makes sense.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Set true if we are inverting the condition </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html" title="Base class for conditional availability information (for module or section).">core_availability::info</a></td><td class="paramname">$info</td><td>Item we're checking </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$grabthelot</td><td>Performance hint: if true, caches information required for all course-modules, to make the front page and similar pages work more quickly (works only for current user) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User ID to check availability for </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">result</td><td>Availability check result </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7fdeb23d9151ac36695ee7aa9473cf4f" name="a7fdeb23d9151ac36695ee7aa9473cf4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fdeb23d9151ac36695ee7aa9473cf4f">&#9670;&#160;</a></span>filter_user_list() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::filter_user_list </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$users</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d23/classcore__availability_1_1capability__checker.html">capability_checker</a></td>          <td class="paramname"><span class="paramname"><em>$checker</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tests this condition against a user list. </p>
<p>Users who do not meet the condition will be removed from the list, unless they have the ability to view hidden activities/sections.</p>
<p>This function must be implemented if is_applied_to_user_lists returns true. Otherwise it will not be called.</p>
<p>The function must operate efficiently, e.g. by using a fixed number of database queries regardless of how many users are in the list.</p>
<p>Within this function, if you need to check capabilities, please use the provided checker which caches results where possible.</p>
<p>Conditions do not need to check the viewhiddenactivities or viewhiddensections capabilities. These are handled by <a class="el" href="../../d8/d46/classcore__availability_1_1info.html#aafc49a6e08c01d79cdbaf31f98fd9cd7" title="Tests against a user list.">core_availability::info::filter_user_list</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$users</td><td>Array of userid =&gt; object </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>True if this condition is applying in negative mode </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html" title="Base class for conditional availability information (for module or section).">core_availability::info</a></td><td class="paramname">$info</td><td>Item we're checking </td></tr>
    <tr><td class="paramtype">capability_checker</td><td class="paramname">$checker</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Filtered version of input array </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If called on a condition that doesn't apply to user lists </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2ae3c55514826d5db72ede6977df25d6" name="a2ae3c55514826d5db72ede6977df25d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ae3c55514826d5db72ede6977df25d6">&#9670;&#160;</a></span>filter_user_list() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::filter_user_list </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$users</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d23/classcore__availability_1_1capability__checker.html">capability_checker</a></td>          <td class="paramname"><span class="paramname"><em>$checker</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tests against a user list. </p>
<p>Users who cannot access the activity due to availability restrictions will be removed from the list.</p>
<p>This test ONLY includes conditions which are marked as being applied to user lists. For example, group conditions are included but date conditions are not included.</p>
<p>The function operates reasonably efficiently i.e. should not do per-user database queries. It is however likely to be fairly slow.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$users</td><td>Array of userid =&gt; object </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>If tree's parent indicates it's being checked negatively </td></tr>
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td>Info about current context </td></tr>
    <tr><td class="paramtype">capability_checker</td><td class="paramname">$checker</td><td>Capability checker </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Filtered version of input array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae0e641e5096b50b8385580cff30bd2f8" name="ae0e641e5096b50b8385580cff30bd2f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e641e5096b50b8385580cff30bd2f8">&#9670;&#160;</a></span>get_all_children()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::get_all_children </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$classname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively gets all children of a particular class (you can use a base class to get all conditions, or a specific class). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td>Full class name e.g. <a class="el" href="../../d0/db0/classcore__availability_1_1condition.html" title="Base class for a single availability condition.">core_availability::condition</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of nodes of that type (flattened, not a tree any more) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acebe4f3832ec1b64f7bdbf9bd3020415" name="acebe4f3832ec1b64f7bdbf9bd3020415"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acebe4f3832ec1b64f7bdbf9bd3020415">&#9670;&#160;</a></span>get_full_information()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::get_full_information </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets full information about this tree (including all children) as HTML for display to staff. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td>Information about location of condition tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If you call on a non-root tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>HTML data (empty string if none) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a457d384e2b7b1968b84a34a1b7278f0a" name="a457d384e2b7b1968b84a34a1b7278f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a457d384e2b7b1968b84a34a1b7278f0a">&#9670;&#160;</a></span>get_full_information_recursive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::get_full_information_recursive </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../dc/d39/classcore__availability_1_1result.html">result</a></td>          <td class="paramname"><span class="paramname"><em>$result</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$root</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$hidden</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets information about this tree (including all or selected children) as HTML for display to staff or student. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>True if there is a NOT in effect </td></tr>
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td>Information about location of condition tree </td></tr>
    <tr><td class="paramtype">result&#160;|&#160;null</td><td class="paramname">$result</td><td>Result object if this is a student display, else null </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$root</td><td>True if this is the root item </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$hidden</td><td>Staff display; true if this tree has show=false (from parent) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|renderable</td><td>Information to render </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a35d487a197a2fb1752935413805df948" name="a35d487a197a2fb1752935413805df948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35d487a197a2fb1752935413805df948">&#9670;&#160;</a></span>get_logic_flags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::get_logic_flags </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts the operator for the tree into two flags used for computing the result. </p>
<p>The 2 flags are $innernot (whether to set $not when calling for children) and $andoperator (whether to use AND or OR operator to combine children).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Not flag passed to this tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of the 2 flags ($innernot, $andoperator) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5ec01444e5e38935bb216f9316e8f6e8" name="a5ec01444e5e38935bb216f9316e8f6e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec01444e5e38935bb216f9316e8f6e8">&#9670;&#160;</a></span>get_nested_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_availability\tree::get_nested_json </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$children</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$op</em><span class="paramdefsep"> = </span><span class="paramdefval">self::OP_AND</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a JSON object which corresponds to a tree. </p>
<p>Intended for unit testing, as normally the JSON values are constructed by JavaScript code.</p>
<p>This function generates 'nested' (i.e. not root-level) trees.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$children</td><td>Array of JSON objects from component children </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$op</td><td>Operator (tree::OP_xx) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>JSON object </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If you get parameters wrong </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8d9d98030d1e32a9e190e910aabc5c4d" name="a8d9d98030d1e32a9e190e910aabc5c4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d9d98030d1e32a9e190e910aabc5c4d">&#9670;&#160;</a></span>get_result_information()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::get_result_information </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d39/classcore__availability_1_1result.html">result</a></td>          <td class="paramname"><span class="paramname"><em>$result</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets information about this tree corresponding to the given result object. </p>
<p>(In other words, only conditions which the student actually fails will be shown - and nothing if display is turned off.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td>Information about location of condition tree </td></tr>
    <tr><td class="paramtype">result</td><td class="paramname">$result</td><td>Result object </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If you call on a non-root tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>HTML data (empty string if none) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a17fb4b0bbbfc966d9d531e445a6180fe" name="a17fb4b0bbbfc966d9d531e445a6180fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17fb4b0bbbfc966d9d531e445a6180fe">&#9670;&#160;</a></span>get_root_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_availability\tree::get_root_json </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$children</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$op</em><span class="paramdefsep"> = </span><span class="paramdefval">self::OP_AND</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$show</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a JSON object which corresponds to a tree at root level. </p>
<p>Intended for unit testing, as normally the JSON values are constructed by JavaScript code.</p>
<p>The $show parameter can be a boolean for all OP_xx options. For OP_AND and OP_NOT_OR where you have individual show options, you can specify a boolean (same for all) or an array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$children</td><td>Array of JSON objects from component children </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$op</td><td>Operator (tree::OP_xx) </td></tr>
    <tr><td class="paramtype">bool&#160;|&#160;array</td><td class="paramname">$show</td><td>Whether 'show' option is turned on (see above) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>JSON object ready for encoding </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If you get parameters wrong </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afcdfd8dc9e493a341d6363917b33f9e3" name="afcdfd8dc9e493a341d6363917b33f9e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcdfd8dc9e493a341d6363917b33f9e3">&#9670;&#160;</a></span>get_user_list_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::get_user_list_sql </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$onlyactive</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtains SQL that returns a list of enrolled users that has been filtered by the conditions applied in the availability API, similar to calling get_enrolled_users and then filter_user_list. </p>
<p>As for filter_user_list, this ONLY filters out users with conditions that are marked as applying to user lists. For example, group conditions are included but date conditions are not included.</p>
<p>The returned SQL is a query that returns a list of user IDs. It does not include brackets, so you neeed to add these to make it into a subquery. You would normally use it in an SQL phrase like "WHERE u.id IN ($sql)".</p>
<p>The SQL will be complex and may be slow. It uses named parameters (sorry, I know they are annoying, but it was unavoidable here).</p>
<p>If there are no conditions, the returned result is array('', array()).</p>
<p>Conditions do not need to check the viewhiddenactivities or viewhiddensections capabilities. These are handled by <a class="el" href="../../d8/d46/classcore__availability_1_1info.html#ad4b70f9f65e41467111c0d5e14984001" title="Obtains SQL that returns a list of enrolled users that has been filtered by the conditions applied in...">core_availability::info::get_user_list_sql</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>True if this condition is applying in negative mode </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html" title="Base class for conditional availability information (for module or section).">core_availability::info</a></td><td class="paramname">$info</td><td>Item we're checking </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$onlyactive</td><td>If true, only returns active enrolments </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array with two elements: SQL subquery and parameters array </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If called on a condition that doesn't apply to user lists </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff32aa7bf54d058cada78079b4bdcaa1" name="aff32aa7bf54d058cada78079b4bdcaa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff32aa7bf54d058cada78079b4bdcaa1">&#9670;&#160;</a></span>include_after_restore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::include_after_restore </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$restoreid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$courseid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a></td>          <td class="paramname"><span class="paramname"><em>$logger</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/de0/classbase__task.html">base_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether this node should be included after restore or not. </p>
<p>The node may be removed depending on restore settings, which you can get from the $task object.</p>
<p>By default nodes are still included after restore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$restoreid</td><td>Restore ID </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>ID of target course </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html" title="Base abstract class for all the loggers to be used in backup/restore.">base_logger</a></td><td class="paramname">$logger</td><td>Logger for any warnings </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Name of this item (for use in warning messages) </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d2/de0/classbase__task.html" title="Abstract class defining the basis for one execution (backup/restore) task.">base_task</a></td><td class="paramname">$task</td><td>Current restore task </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if there was any change </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../dc/d3d/classavailability__group_1_1condition.html#af53ad13a6f150935676b5c56da1de374">availability_group\condition</a>, and <a class="el" href="../../d1/d5e/classavailability__grouping_1_1condition.html#a41973ff4d46016b0059bf813f43ef7f3">availability_grouping\condition</a>.</p>

</div>
</div>
<a id="a3623e6351497272e2a670a056b084103" name="a3623e6351497272e2a670a056b084103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3623e6351497272e2a670a056b084103">&#9670;&#160;</a></span>is_applied_to_user_lists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::is_applied_to_user_lists </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether this condition applies to user lists. </p>
<p>The default is false (the condition is used to control access, but does not prevent the student from appearing in lists).</p>
<p>For example, group conditions apply to user lists: we do not want to include a student in a list of users if they are prohibited from accessing the activity because they don't belong to a relevant group. However, date conditions do not apply - we still want to show users in a list of people who might have submitted an assignment, even if they are no longer able to access the assignment in question because there is a date restriction.</p>
<p>The general idea is that conditions which are likely to be permanent (group membership, user profile) apply to user lists. Conditions which are likely to be temporary (date, grade requirement) do not.</p>
<p>Conditions which do apply to user lists must implement the filter_user_list function.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if this condition applies to user lists </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a1de470bfb2ad7eb00592b5b634832a04">core_availability\tree_node</a>.</p>

</div>
</div>
<a id="a5c67f23f2cce3fca2851cdd1842193a7" name="a5c67f23f2cce3fca2851cdd1842193a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c67f23f2cce3fca2851cdd1842193a7">&#9670;&#160;</a></span>is_available_for_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::is_available_for_all </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether this condition is actually going to be available for all users under normal circumstances. </p>
<p>Normally, if there are any conditions, then it may be hidden. However in the case of date conditions there are some conditions which will definitely not result in it being hidden for anyone.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Set true if we are inverting the condition </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if condition will return available for everyone </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#ac14507c8a62880b2e0cca944c5a5c739">core_availability\tree_node</a>.</p>

</div>
</div>
<a id="a8c155a18090fd91877b765807c528070" name="a8c155a18090fd91877b765807c528070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c155a18090fd91877b765807c528070">&#9670;&#160;</a></span>is_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::is_empty </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether this tree is empty (contains no children). </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>True if empty </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a52b6f3f2332e6487dab30f27eeff2b94" name="a52b6f3f2332e6487dab30f27eeff2b94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b6f3f2332e6487dab30f27eeff2b94">&#9670;&#160;</a></span>recursive_get_all_children()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::recursive_get_all_children </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$classname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array &amp;</td>          <td class="paramname"><span class="paramname"><em>$result</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function that implements get_all_children efficiently. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td>Full class name e.g. <a class="el" href="../../d0/db0/classcore__availability_1_1condition.html" title="Base class for a single availability condition.">core_availability::condition</a> </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$result</td><td>Output array of nodes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4366c88dcf23c03bb7748cf078b29067" name="a4366c88dcf23c03bb7748cf078b29067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4366c88dcf23c03bb7748cf078b29067">&#9670;&#160;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::save </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves tree data back to a structure object. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>Structure object (ready to be made into JSON format) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a3a56b6c220513de3d79c84e639b546da">core_availability\tree_node</a>.</p>

</div>
</div>
<a id="a97ba6eab3b91bfddcbf90cd0e31de3bd" name="a97ba6eab3b91bfddcbf90cd0e31de3bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97ba6eab3b91bfddcbf90cd0e31de3bd">&#9670;&#160;</a></span>unique_sql_parameter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_availability\tree_node::unique_sql_parameter </td>
          <td>(</td>
          <td class="paramtype">array &amp;</td>          <td class="paramname"><span class="paramname"><em>$params</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility function for generating SQL parameters (because we can't use ? parameters because get_enrolled_sql has infected us with horrible named parameters). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>Params array (value will be added to this array) </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;int</td><td class="paramname">$value</td><td>Value </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SQL</td><td>code for the parameter, e.g. ':pr1234' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae86cbb7389c1f8da17b6e5c726213be9" name="ae86cbb7389c1f8da17b6e5c726213be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae86cbb7389c1f8da17b6e5c726213be9">&#9670;&#160;</a></span>update_after_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::update_after_restore </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$restoreid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$courseid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a></td>          <td class="paramname"><span class="paramname"><em>$logger</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates this node after restore, returning true if anything changed. </p>
<p>The default behaviour is simply to return false. If there is a problem with the update, $logger can be used to output a warning.</p>
<p>Note: If you need information about the date offset, call <a class="el" href="../../d8/d46/classcore__availability_1_1info.html#ae7bf990053eaeef80fa5c99c5f2c4644" title="Gets the date offset (amount by which any date values should be adjusted) for the current restore.">core_availability::info::get_restore_date_offset</a>($restoreid). For information on the restoring task and its settings, call <a class="el" href="../../d8/d46/classcore__availability_1_1info.html#ad254f4ee40652211fe822acc7d998875" title="Gets the restore task (specifically, the task that calls the update_after_restore method) for the cur...">core_availability::info::get_restore_task</a>($restoreid).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$restoreid</td><td>Restore ID </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>ID of target course </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html" title="Base abstract class for all the loggers to be used in backup/restore.">base_logger</a></td><td class="paramname">$logger</td><td>Logger for any warnings </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Name of this item (for use in warning messages) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if there was any change </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#af4e962c24efe4e703dd66ae5c548db0d">core_availability\tree_node</a>.</p>

</div>
</div>
<a id="a9fde407c7d5f95dcf82b80b626cfd21d" name="a9fde407c7d5f95dcf82b80b626cfd21d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fde407c7d5f95dcf82b80b626cfd21d">&#9670;&#160;</a></span>update_dependency_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree::update_dependency_id </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$table</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$oldid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$newid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates this node if it contains any references (dependencies) to the given table and id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$table</td><td>Table name e.g. 'course_modules' </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$oldid</td><td>Previous ID </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$newid</td><td>New ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if it changed, otherwise false </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#aaf8a8178086dd6249d5ec6b028ee7b00">core_availability\tree_node</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a73f11b64abd2ba97852e0294653145e5" name="a73f11b64abd2ba97852e0294653145e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f11b64abd2ba97852e0294653145e5">&#9670;&#160;</a></span>$show</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool core_availability\tree::$show</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Single 'show information or hide completely' option for tree. </p>
<p>This option is only set for the root tree if it is in OR or NOT AND mode, otherwise it is true. </p>

</div>
</div>
<a id="aaadd5da9208ab27e436e58c02a22eda8" name="aaadd5da9208ab27e436e58c02a22eda8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaadd5da9208ab27e436e58c02a22eda8">&#9670;&#160;</a></span>$showchildren</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool [] core_availability\tree::$showchildren</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Array of 'show information or hide completely' options for each child. </p>
<p>This array is only set for the root tree if it is in AND or NOT OR mode, otherwise it is null. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>availability/classes/<b>tree.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 21 2024 02:25:09 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
