<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: dndupload_ajax_processor Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.7+ (Build: 20240516) (7ecbcb3c336)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../dc/d93/classdndupload__ajax__processor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">dndupload_ajax_processor Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Processes the upload, creating the course module and returning the result.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abf2873b2b3195569d216a1addb99d879" id="r_abf2873b2b3195569d216a1addb99d879"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf2873b2b3195569d216a1addb99d879">__construct</a> ($courseid, $section, $type, $modulename)</td></tr>
<tr class="memdesc:abf2873b2b3195569d216a1addb99d879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up some basic information needed to handle the upload.  <br /></td></tr>
<tr class="separator:abf2873b2b3195569d216a1addb99d879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a1ffc93c1c0cb258d5cd97a3fc09a16" id="r_a6a1ffc93c1c0cb258d5cd97a3fc09a16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a1ffc93c1c0cb258d5cd97a3fc09a16">process</a> ($displayname=null, $content=null)</td></tr>
<tr class="memdesc:a6a1ffc93c1c0cb258d5cd97a3fc09a16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the upload - creating the module in the course and returning the result to the browser.  <br /></td></tr>
<tr class="separator:a6a1ffc93c1c0cb258d5cd97a3fc09a16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3b237e8be5b25311e0eb9a45312731af" id="r_a3b237e8be5b25311e0eb9a45312731af"><td class="memItemLeft" align="right" valign="top"><a id="a3b237e8be5b25311e0eb9a45312731af" name="a3b237e8be5b25311e0eb9a45312731af"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>ERROR_OK</b> = 0</td></tr>
<tr class="memdesc:a3b237e8be5b25311e0eb9a45312731af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returned when no error has occurred. <br /></td></tr>
<tr class="separator:a3b237e8be5b25311e0eb9a45312731af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:acc2db81a11e8766b48f107346a601828" id="r_acc2db81a11e8766b48f107346a601828"><td class="memItemLeft" align="right" valign="top"><a id="acc2db81a11e8766b48f107346a601828" name="acc2db81a11e8766b48f107346a601828"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>create_course_module</b> ()</td></tr>
<tr class="memdesc:acc2db81a11e8766b48f107346a601828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the coursemodule to hold the file/content that has been uploaded. <br /></td></tr>
<tr class="separator:acc2db81a11e8766b48f107346a601828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c5c95ccb5466b0f4ef4c4991e6c3fe" id="r_a25c5c95ccb5466b0f4ef4c4991e6c3fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25c5c95ccb5466b0f4ef4c4991e6c3fe">display_name_from_file</a> ($filename)</td></tr>
<tr class="memdesc:a25c5c95ccb5466b0f4ef4c4991e6c3fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate the name of the mod instance from the name of the file (remove the extension and convert underscore =&gt; space.  <br /></td></tr>
<tr class="separator:a25c5c95ccb5466b0f4ef4c4991e6c3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeebb0729036cd7c101a08937e9057ea" id="r_aeeebb0729036cd7c101a08937e9057ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeeebb0729036cd7c101a08937e9057ea">finish_setup_course_module</a> ($instanceid)</td></tr>
<tr class="memdesc:aeeebb0729036cd7c101a08937e9057ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called after the mod has set itself up, to finish off any course module settings (set instance id, add to correct section, set visibility, etc.) and send the response.  <br /></td></tr>
<tr class="separator:aeeebb0729036cd7c101a08937e9057ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc69331b196c92e0a439138208841f93" id="r_afc69331b196c92e0a439138208841f93"><td class="memItemLeft" align="right" valign="top"><a id="afc69331b196c92e0a439138208841f93" name="afc69331b196c92e0a439138208841f93"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>handle_file_upload</b> ()</td></tr>
<tr class="memdesc:afc69331b196c92e0a439138208841f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle uploads containing files - create the course module, ask the upload repository to process the file, ask the mod to set itself up, then return the result to the browser. <br /></td></tr>
<tr class="separator:afc69331b196c92e0a439138208841f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eeab7ac1c8f366b5c8e4658cac33b03" id="r_a9eeab7ac1c8f366b5c8e4658cac33b03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9eeab7ac1c8f366b5c8e4658cac33b03">handle_other_upload</a> ($content)</td></tr>
<tr class="memdesc:a9eeab7ac1c8f366b5c8e4658cac33b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle uploads not containing file - create the course module, ask the mod to set itself up, then return the result to the browser.  <br /></td></tr>
<tr class="separator:a9eeab7ac1c8f366b5c8e4658cac33b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a380a484421b44b41fd358f3b390f0282" id="r_a380a484421b44b41fd358f3b390f0282"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a380a484421b44b41fd358f3b390f0282">is_file_upload</a> ()</td></tr>
<tr class="memdesc:a380a484421b44b41fd358f3b390f0282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if this upload is a 'file' upload.  <br /></td></tr>
<tr class="separator:a380a484421b44b41fd358f3b390f0282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08d4b23b164bd264e9e7d4424590e7b" id="r_aa08d4b23b164bd264e9e7d4424590e7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa08d4b23b164bd264e9e7d4424590e7b">prepare_module_data</a> ($draftitemid=null, $content=null)</td></tr>
<tr class="memdesc:aa08d4b23b164bd264e9e7d4424590e7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gather together all the details to pass on to the mod, so that it can initialise it's own database tables.  <br /></td></tr>
<tr class="separator:aa08d4b23b164bd264e9e7d4424590e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f6cdef125ec1a99eb8f7d766c1298e" id="r_a30f6cdef125ec1a99eb8f7d766c1298e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30f6cdef125ec1a99eb8f7d766c1298e">send_response</a> ($mod)</td></tr>
<tr class="memdesc:a30f6cdef125ec1a99eb8f7d766c1298e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the details of the newly created activity back to the client browser.  <br /></td></tr>
<tr class="separator:a30f6cdef125ec1a99eb8f7d766c1298e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a3518b42eb53be2fd97e605fb8a734fe9" id="r_a3518b42eb53be2fd97e605fb8a734fe9"><td class="memItemLeft" align="right" valign="top"><a id="a3518b42eb53be2fd97e605fb8a734fe9" name="a3518b42eb53be2fd97e605fb8a734fe9"></a>
object&#160;</td><td class="memItemRight" valign="bottom"><b>$cm</b> = null</td></tr>
<tr class="memdesc:a3518b42eb53be2fd97e605fb8a734fe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The course module that has been created. <br /></td></tr>
<tr class="separator:a3518b42eb53be2fd97e605fb8a734fe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624295352c6a76ce00e21f2a02e43e8e" id="r_a624295352c6a76ce00e21f2a02e43e8e"><td class="memItemLeft" align="right" valign="top"><a id="a624295352c6a76ce00e21f2a02e43e8e" name="a624295352c6a76ce00e21f2a02e43e8e"></a>
context_course&#160;</td><td class="memItemRight" valign="bottom"><b>$context</b> = null</td></tr>
<tr class="memdesc:a624295352c6a76ce00e21f2a02e43e8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The course context for capability checking. <br /></td></tr>
<tr class="separator:a624295352c6a76ce00e21f2a02e43e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cca44107bc3892f1d090f251c16484d" id="r_a0cca44107bc3892f1d090f251c16484d"><td class="memItemLeft" align="right" valign="top"><a id="a0cca44107bc3892f1d090f251c16484d" name="a0cca44107bc3892f1d090f251c16484d"></a>
object&#160;</td><td class="memItemRight" valign="bottom"><b>$course</b> = null</td></tr>
<tr class="memdesc:a0cca44107bc3892f1d090f251c16484d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The course that we are uploading to. <br /></td></tr>
<tr class="separator:a0cca44107bc3892f1d090f251c16484d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abba633d02d5b3726042e3a5fa7f00181" id="r_abba633d02d5b3726042e3a5fa7f00181"><td class="memItemLeft" align="right" valign="top"><a id="abba633d02d5b3726042e3a5fa7f00181" name="abba633d02d5b3726042e3a5fa7f00181"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$displayname</b> = null</td></tr>
<tr class="memdesc:abba633d02d5b3726042e3a5fa7f00181"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name to give the new activity instance. <br /></td></tr>
<tr class="separator:abba633d02d5b3726042e3a5fa7f00181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7a5b7b3e91358813ce2732c6d4f74b" id="r_a1a7a5b7b3e91358813ce2732c6d4f74b"><td class="memItemLeft" align="right" valign="top"><a id="a1a7a5b7b3e91358813ce2732c6d4f74b" name="a1a7a5b7b3e91358813ce2732c6d4f74b"></a>
<a class="el" href="../../dc/d73/classdndupload__handler.html">dndupload_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$dnduploadhandler</b> = null</td></tr>
<tr class="memdesc:a1a7a5b7b3e91358813ce2732c6d4f74b"><td class="mdescLeft">&#160;</td><td class="mdescRight">used to check the allowed file types <br /></td></tr>
<tr class="separator:a1a7a5b7b3e91358813ce2732c6d4f74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebfd8523ad13d936547f82511f3c9116" id="r_aebfd8523ad13d936547f82511f3c9116"><td class="memItemLeft" align="right" valign="top"><a id="aebfd8523ad13d936547f82511f3c9116" name="aebfd8523ad13d936547f82511f3c9116"></a>
object&#160;</td><td class="memItemRight" valign="bottom"><b>$module</b> = null</td></tr>
<tr class="memdesc:aebfd8523ad13d936547f82511f3c9116"><td class="mdescLeft">&#160;</td><td class="mdescRight">The details of the module type that will be created. <br /></td></tr>
<tr class="separator:aebfd8523ad13d936547f82511f3c9116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a638d95940625a44f6b8b7d4dee6c7816" id="r_a638d95940625a44f6b8b7d4dee6c7816"><td class="memItemLeft" align="right" valign="top"><a id="a638d95940625a44f6b8b7d4dee6c7816" name="a638d95940625a44f6b8b7d4dee6c7816"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$section</b> = null</td></tr>
<tr class="memdesc:a638d95940625a44f6b8b7d4dee6c7816"><td class="mdescLeft">&#160;</td><td class="mdescRight">The section number we are uploading to. <br /></td></tr>
<tr class="separator:a638d95940625a44f6b8b7d4dee6c7816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b5ca01736d0377cfeb4adf36029cf6" id="r_a36b5ca01736d0377cfeb4adf36029cf6"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36b5ca01736d0377cfeb4adf36029cf6">$type</a> = null</td></tr>
<tr class="memdesc:a36b5ca01736d0377cfeb4adf36029cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of upload (e.g.  <br /></td></tr>
<tr class="separator:a36b5ca01736d0377cfeb4adf36029cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Processes the upload, creating the course module and returning the result. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2012 Davo Smith </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abf2873b2b3195569d216a1addb99d879" name="abf2873b2b3195569d216a1addb99d879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf2873b2b3195569d216a1addb99d879">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$courseid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$section</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$modulename</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up some basic information needed to handle the upload. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>The ID of the course we are uploading to </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$section</td><td>The section number we are uploading to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>The type of upload (as reported by the browser) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$modulename</td><td>The name of the module requested to handle this upload </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a25c5c95ccb5466b0f4ef4c4991e6c3fe" name="a25c5c95ccb5466b0f4ef4c4991e6c3fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25c5c95ccb5466b0f4ef4c4991e6c3fe">&#9670;&#160;</a></span>display_name_from_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::display_name_from_file </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate the name of the mod instance from the name of the file (remove the extension and convert underscore =&gt; space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>the filename of the uploaded file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the display name to use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeeebb0729036cd7c101a08937e9057ea" name="aeeebb0729036cd7c101a08937e9057ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeebb0729036cd7c101a08937e9057ea">&#9670;&#160;</a></span>finish_setup_course_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::finish_setup_course_module </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$instanceid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called after the mod has set itself up, to finish off any course module settings (set instance id, add to correct section, set visibility, etc.) and send the response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$instanceid</td><td>id returned by the mod when it was created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9eeab7ac1c8f366b5c8e4658cac33b03" name="a9eeab7ac1c8f366b5c8e4658cac33b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eeab7ac1c8f366b5c8e4658cac33b03">&#9670;&#160;</a></span>handle_other_upload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::handle_other_upload </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$content</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle uploads not containing file - create the course module, ask the mod to set itself up, then return the result to the browser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>the content uploaded to the browser </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a380a484421b44b41fd358f3b390f0282" name="a380a484421b44b41fd358f3b390f0282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a380a484421b44b41fd358f3b390f0282">&#9670;&#160;</a></span>is_file_upload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::is_file_upload </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if this upload is a 'file' upload. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if it is a 'file' upload, false otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa08d4b23b164bd264e9e7d4424590e7b" name="aa08d4b23b164bd264e9e7d4424590e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa08d4b23b164bd264e9e7d4424590e7b">&#9670;&#160;</a></span>prepare_module_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::prepare_module_data </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$draftitemid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$content</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gather together all the details to pass on to the mod, so that it can initialise it's own database tables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$draftitemid</td><td>optional the id of the draft area containing the file (for file uploads) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>optional the content dropped onto the course (for non-file uploads) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">object</td><td>data to pass on to the mod, containing: string $type the 'type' as registered with <a class="el" href="../../dc/d73/classdndupload__handler.html" title="Stores all the information about the available dndupload handlers.">dndupload_handler</a> (or 'Files') object $course the course the upload was for int $draftitemid optional the id of the draft area containing the files int $coursemodule id of the course module that has already been created string $displayname the name to use for this activity (can be overriden by the mod) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6a1ffc93c1c0cb258d5cd97a3fc09a16" name="a6a1ffc93c1c0cb258d5cd97a3fc09a16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a1ffc93c1c0cb258d5cd97a3fc09a16">&#9670;&#160;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::process </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$displayname</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$content</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the upload - creating the module in the course and returning the result to the browser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$displayname</td><td>optional the name (from the browser) to give the course module instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>optional the content of the upload (for non-file uploads) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a30f6cdef125ec1a99eb8f7d766c1298e" name="a30f6cdef125ec1a99eb8f7d766c1298e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30f6cdef125ec1a99eb8f7d766c1298e">&#9670;&#160;</a></span>send_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dndupload_ajax_processor::send_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$mod</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send the details of the newly created activity back to the client browser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$mod</td><td>details of the mod just created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a36b5ca01736d0377cfeb4adf36029cf6" name="a36b5ca01736d0377cfeb4adf36029cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36b5ca01736d0377cfeb4adf36029cf6">&#9670;&#160;</a></span>$type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string dndupload_ajax_processor::$type = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The type of upload (e.g. </p>
<p>'Files', 'text/plain') </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>course/<b>dnduploadlib.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 26 2024 02:38:10 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
