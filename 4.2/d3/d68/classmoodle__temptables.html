<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: moodle_temptables Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.7+ (Build: 20240503) (3fdb0f35800)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d2/d1e/classmoodle__temptables-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">moodle_temptables Class Reference<div class="ingroups"><a class="el" href="../../d5/db5/group__core__dml.html">core_dml</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for moodle_temptables:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d3/d68/classmoodle__temptables.png" usemap="#moodle_5Ftemptables_map" alt=""/>
  <map id="moodle_5Ftemptables_map" name="moodle_5Ftemptables_map">
<area href="../../d1/d14/classmysqli__native__moodle__temptables.html" alt="mysqli_native_moodle_temptables" shape="rect" coords="0,56,200,80"/>
<area href="../../d5/db6/classoci__native__moodle__temptables.html" alt="oci_native_moodle_temptables" shape="rect" coords="210,56,410,80"/>
<area href="../../d0/dae/classpgsql__native__moodle__temptables.html" alt="pgsql_native_moodle_temptables" shape="rect" coords="420,56,620,80"/>
<area href="../../dc/d7a/classsqlsrv__native__moodle__temptables.html" title="This class is not specific to the SQL Server Native Driver but rather to the family of Microsoft SQL ..." alt="sqlsrv_native_moodle_temptables" shape="rect" coords="630,56,830,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae93d211fef0c2d49135dfe9d534a7a5c" id="r_ae93d211fef0c2d49135dfe9d534a7a5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae93d211fef0c2d49135dfe9d534a7a5c">__construct</a> ($mdb)</td></tr>
<tr class="memdesc:ae93d211fef0c2d49135dfe9d534a7a5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates new <a class="el" href="../../d3/d68/classmoodle__temptables.html">moodle_temptables</a> instance.  <br /></td></tr>
<tr class="separator:ae93d211fef0c2d49135dfe9d534a7a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa11a9ee84a7bc9972c330e2944c07af8" id="r_aa11a9ee84a7bc9972c330e2944c07af8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa11a9ee84a7bc9972c330e2944c07af8">add_temptable</a> ($tablename)</td></tr>
<tr class="memdesc:aa11a9ee84a7bc9972c330e2944c07af8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add one temptable to the store.  <br /></td></tr>
<tr class="separator:aa11a9ee84a7bc9972c330e2944c07af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a018a54bb2e05abc8bd3f84315d648e04" id="r_a018a54bb2e05abc8bd3f84315d648e04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a018a54bb2e05abc8bd3f84315d648e04">delete_temptable</a> ($tablename)</td></tr>
<tr class="memdesc:a018a54bb2e05abc8bd3f84315d648e04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one temptable from the store.  <br /></td></tr>
<tr class="separator:a018a54bb2e05abc8bd3f84315d648e04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fd09a64f0f7eb78b3283791659de429" id="r_a8fd09a64f0f7eb78b3283791659de429"><td class="memItemLeft" align="right" valign="top"><a id="a8fd09a64f0f7eb78b3283791659de429" name="a8fd09a64f0f7eb78b3283791659de429"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dispose</b> ()</td></tr>
<tr class="memdesc:a8fd09a64f0f7eb78b3283791659de429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispose the temptables stuff, checking for wrong situations, informing and recovering from them. <br /></td></tr>
<tr class="separator:a8fd09a64f0f7eb78b3283791659de429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168436badc4c4508c48bec49dae52749" id="r_a168436badc4c4508c48bec49dae52749"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a168436badc4c4508c48bec49dae52749">get_correct_name</a> ($tablename)</td></tr>
<tr class="memdesc:a168436badc4c4508c48bec49dae52749"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given one tablename (no prefix), return the name of the corresponding temporary table, If the table isn't a "registered" temp table, returns null.  <br /></td></tr>
<tr class="separator:a168436badc4c4508c48bec49dae52749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a718d5ab674e5fb8e4f7df1766b938cff" id="r_a718d5ab674e5fb8e4f7df1766b938cff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a718d5ab674e5fb8e4f7df1766b938cff">get_temptables</a> ()</td></tr>
<tr class="memdesc:a718d5ab674e5fb8e4f7df1766b938cff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns all the tablenames (without prefix) existing in the store.  <br /></td></tr>
<tr class="separator:a718d5ab674e5fb8e4f7df1766b938cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae344f1355ebb398b69ff7156047e18" id="r_a7ae344f1355ebb398b69ff7156047e18"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ae344f1355ebb398b69ff7156047e18">is_temptable</a> ($tablename)</td></tr>
<tr class="memdesc:a7ae344f1355ebb398b69ff7156047e18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if one table, based in the information present in the store, is a temp table.  <br /></td></tr>
<tr class="separator:a7ae344f1355ebb398b69ff7156047e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb94a70262f3d6949ebeb3606f9318f" id="r_a2bb94a70262f3d6949ebeb3606f9318f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2bb94a70262f3d6949ebeb3606f9318f">update_stats</a> ()</td></tr>
<tr class="memdesc:a2bb94a70262f3d6949ebeb3606f9318f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyze the data in temporary tables to force statistics collection after bulk data loads.  <br /></td></tr>
<tr class="separator:a2bb94a70262f3d6949ebeb3606f9318f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a85a38849b5a591776c992373dbdde499" id="r_a85a38849b5a591776c992373dbdde499"><td class="memItemLeft" align="right" valign="top"><a id="a85a38849b5a591776c992373dbdde499" name="a85a38849b5a591776c992373dbdde499"></a>
circular&#160;</td><td class="memItemRight" valign="bottom"><b>$mdb</b></td></tr>
<tr class="memdesc:a85a38849b5a591776c992373dbdde499"><td class="mdescLeft">&#160;</td><td class="mdescRight">reference, to be able to use <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> facilities here if needed <br /></td></tr>
<tr class="separator:a85a38849b5a591776c992373dbdde499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fdfa31fc009f317c960096b84926d51" id="r_a3fdfa31fc009f317c960096b84926d51"><td class="memItemLeft" align="right" valign="top"><a id="a3fdfa31fc009f317c960096b84926d51" name="a3fdfa31fc009f317c960096b84926d51"></a>
prefix&#160;</td><td class="memItemRight" valign="bottom"><b>$prefix</b></td></tr>
<tr class="memdesc:a3fdfa31fc009f317c960096b84926d51"><td class="mdescLeft">&#160;</td><td class="mdescRight">to be used for all the <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> objects <br /></td></tr>
<tr class="separator:a3fdfa31fc009f317c960096b84926d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fafbf61e1a750de301d09636c2ae0cc" id="r_a1fafbf61e1a750de301d09636c2ae0cc"><td class="memItemLeft" align="right" valign="top"><a id="a1fafbf61e1a750de301d09636c2ae0cc" name="a1fafbf61e1a750de301d09636c2ae0cc"></a>
simple&#160;</td><td class="memItemRight" valign="bottom"><b>$temptables</b></td></tr>
<tr class="memdesc:a1fafbf61e1a750de301d09636c2ae0cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">array of moodle, not prefixed 'tablename' =&gt; <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a>, final (prefixed) 'tablename' <br /></td></tr>
<tr class="separator:a1fafbf61e1a750de301d09636c2ae0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae93d211fef0c2d49135dfe9d534a7a5c" name="ae93d211fef0c2d49135dfe9d534a7a5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae93d211fef0c2d49135dfe9d534a7a5c">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle_temptables::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$mdb</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates new <a class="el" href="../../d3/d68/classmoodle__temptables.html">moodle_temptables</a> instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d3/d6e/classmoodle__database.html" title="Abstract class representing moodle database interface.">moodle_database</a></td><td class="paramname">$mdb</td><td>An instance of <a class="el" href="../../d3/d6e/classmoodle__database.html" title="Abstract class representing moodle database interface.">moodle_database</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa11a9ee84a7bc9972c330e2944c07af8" name="aa11a9ee84a7bc9972c330e2944c07af8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa11a9ee84a7bc9972c330e2944c07af8">&#9670;&#160;</a></span>add_temptable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle_temptables::add_temptable </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tablename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add one temptable to the store. </p>
<p>Given one moodle temptable name (without prefix), add it to the store, with the key being the original moodle name and the value being the real db temptable name already prefixed</p>
<p>Override and use this <em>only</em> if the database requires modification in the table name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tablename</td><td>name without prefix of the table created as temptable </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d5/db6/classoci__native__moodle__temptables.html#ae31bab7b7e8df32caa9f8aec2cb7ea4b">oci_native_moodle_temptables</a>, and <a class="el" href="../../dc/d7a/classsqlsrv__native__moodle__temptables.html#a57ab9fd84f3c62b0c5696c7b53717f1a">sqlsrv_native_moodle_temptables</a>.</p>

</div>
</div>
<a id="a018a54bb2e05abc8bd3f84315d648e04" name="a018a54bb2e05abc8bd3f84315d648e04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a018a54bb2e05abc8bd3f84315d648e04">&#9670;&#160;</a></span>delete_temptable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle_temptables::delete_temptable </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tablename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one temptable from the store. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tablename</td><td>name without prefix of the dropped temptable </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a168436badc4c4508c48bec49dae52749" name="a168436badc4c4508c48bec49dae52749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a168436badc4c4508c48bec49dae52749">&#9670;&#160;</a></span>get_correct_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle_temptables::get_correct_name </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tablename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given one tablename (no prefix), return the name of the corresponding temporary table, If the table isn't a "registered" temp table, returns null. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tablename</td><td>name without prefix which corresponding temp tablename needs to know </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td><a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> name of the temp table or null if it isn't a temp table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a718d5ab674e5fb8e4f7df1766b938cff" name="a718d5ab674e5fb8e4f7df1766b938cff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a718d5ab674e5fb8e4f7df1766b938cff">&#9670;&#160;</a></span>get_temptables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle_temptables::get_temptables </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns all the tablenames (without prefix) existing in the store. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>containing all the tablenames in the store (tablename both key and value) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ae344f1355ebb398b69ff7156047e18" name="a7ae344f1355ebb398b69ff7156047e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae344f1355ebb398b69ff7156047e18">&#9670;&#160;</a></span>is_temptable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle_temptables::is_temptable </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tablename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns if one table, based in the information present in the store, is a temp table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tablename</td><td>name without prefix of the table we are asking about </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the table is a temp table (based in the store info), false if not </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2bb94a70262f3d6949ebeb3606f9318f" name="a2bb94a70262f3d6949ebeb3606f9318f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bb94a70262f3d6949ebeb3606f9318f">&#9670;&#160;</a></span>update_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle_temptables::update_stats </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analyze the data in temporary tables to force statistics collection after bulk data loads. </p>
<p>The database class detects all temporary tables and will automatically analyze all created tables</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d0/dae/classpgsql__native__moodle__temptables.html#a5c06d6c38a520701958b814583198995">pgsql_native_moodle_temptables</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/dml/<b>moodle_temptables.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 5 2024 02:32:58 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
