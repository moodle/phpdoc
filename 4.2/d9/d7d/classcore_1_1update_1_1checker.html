<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\update\checker Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.7+ (Build: 20240503) (3fdb0f35800)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../d9/d0e/namespacecore_1_1update.html">update</a></li><li class="navelem"><a class="el" href="../../d9/d7d/classcore_1_1update_1_1checker.html">checker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d5/dd6/classcore_1_1update_1_1checker-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\update\checker Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Singleton class that handles checking for available updates.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acf16f8cfb896934e547c0f35a7faa440" id="r_acf16f8cfb896934e547c0f35a7faa440"><td class="memItemLeft" align="right" valign="top"><a id="acf16f8cfb896934e547c0f35a7faa440" name="acf16f8cfb896934e547c0f35a7faa440"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cron</b> ()</td></tr>
<tr class="memdesc:acf16f8cfb896934e547c0f35a7faa440"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method being run via cron.php. <br /></td></tr>
<tr class="separator:acf16f8cfb896934e547c0f35a7faa440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa909d2eaca4ff45cd13df43119c32c95" id="r_aa909d2eaca4ff45cd13df43119c32c95"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa909d2eaca4ff45cd13df43119c32c95">enabled</a> ()</td></tr>
<tr class="memdesc:aa909d2eaca4ff45cd13df43119c32c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is checking for available updates enabled?  <br /></td></tr>
<tr class="separator:aa909d2eaca4ff45cd13df43119c32c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cfc45c86e2703f9caa2a08b86098926" id="r_a4cfc45c86e2703f9caa2a08b86098926"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4cfc45c86e2703f9caa2a08b86098926">fetch</a> ()</td></tr>
<tr class="memdesc:a4cfc45c86e2703f9caa2a08b86098926"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the available update status from the remote site.  <br /></td></tr>
<tr class="separator:a4cfc45c86e2703f9caa2a08b86098926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f21b94b88361248453f3f4d2de635a0" id="r_a4f21b94b88361248453f3f4d2de635a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f21b94b88361248453f3f4d2de635a0">get_last_timefetched</a> ()</td></tr>
<tr class="memdesc:a4f21b94b88361248453f3f4d2de635a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the timestamp of the last execution of <a class="el" href="../../dc/d71/group___imap___client.html#ga4370e800177c19abfb406f670e4e0807">fetch()</a>.  <br /></td></tr>
<tr class="separator:a4f21b94b88361248453f3f4d2de635a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a229bbcd885131ea612196df2b900b66b" id="r_a229bbcd885131ea612196df2b900b66b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a229bbcd885131ea612196df2b900b66b">get_update_info</a> ($component, array $options=array())</td></tr>
<tr class="memdesc:a229bbcd885131ea612196df2b900b66b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the available update information for the given component.  <br /></td></tr>
<tr class="separator:a229bbcd885131ea612196df2b900b66b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a89737dcac677d669089e8c5b6f9189b6" id="r_a89737dcac677d669089e8c5b6f9189b6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89737dcac677d669089e8c5b6f9189b6">instance</a> ()</td></tr>
<tr class="memdesc:a89737dcac677d669089e8c5b6f9189b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory method for this class.  <br /></td></tr>
<tr class="separator:a89737dcac677d669089e8c5b6f9189b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d5c49869f9bd09be7a3e355f4963c4" id="r_a32d5c49869f9bd09be7a3e355f4963c4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32d5c49869f9bd09be7a3e355f4963c4">reset_caches</a> ($phpunitreset=false)</td></tr>
<tr class="memdesc:a32d5c49869f9bd09be7a3e355f4963c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset any caches.  <br /></td></tr>
<tr class="separator:a32d5c49869f9bd09be7a3e355f4963c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a64771a519c97b96921d179a85955b413" id="r_a64771a519c97b96921d179a85955b413"><td class="memItemLeft" align="right" valign="top"><a id="a64771a519c97b96921d179a85955b413" name="a64771a519c97b96921d179a85955b413"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__construct</b> ()</td></tr>
<tr class="memdesc:a64771a519c97b96921d179a85955b413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Direct initiation not allowed, use the factory method <a class="el" href="">self::instance()</a>. <br /></td></tr>
<tr class="separator:a64771a519c97b96921d179a85955b413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab75cdba20622041fb6f0c91acf15b215" id="r_ab75cdba20622041fb6f0c91acf15b215"><td class="memItemLeft" align="right" valign="top"><a id="ab75cdba20622041fb6f0c91acf15b215" name="ab75cdba20622041fb6f0c91acf15b215"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__clone</b> ()</td></tr>
<tr class="memdesc:ab75cdba20622041fb6f0c91acf15b215"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sorry, this is singleton. <br /></td></tr>
<tr class="separator:ab75cdba20622041fb6f0c91acf15b215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5cf1431b229d55b52a2346b95f77e2b" id="r_aa5cf1431b229d55b52a2346b95f77e2b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5cf1431b229d55b52a2346b95f77e2b">compare_responses</a> (array $old, array $new)</td></tr>
<tr class="memdesc:aa5cf1431b229d55b52a2346b95f77e2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares two raw <a class="el" href="">$recentresponse</a> records and returns the list of changed updates.  <br /></td></tr>
<tr class="separator:aa5cf1431b229d55b52a2346b95f77e2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ca324979052597d4ecf926559f9d10" id="r_a28ca324979052597d4ecf926559f9d10"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a28ca324979052597d4ecf926559f9d10">cron_autocheck_enabled</a> ()</td></tr>
<tr class="memdesc:a28ca324979052597d4ecf926559f9d10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide if the autocheck feature is disabled in the server setting.  <br /></td></tr>
<tr class="separator:a28ca324979052597d4ecf926559f9d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbcd1dd807ca2360e4f75b60e5203a6f" id="r_adbcd1dd807ca2360e4f75b60e5203a6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbcd1dd807ca2360e4f75b60e5203a6f">cron_current_timestamp</a> ()</td></tr>
<tr class="memdesc:adbcd1dd807ca2360e4f75b60e5203a6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current timestamp.  <br /></td></tr>
<tr class="separator:adbcd1dd807ca2360e4f75b60e5203a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad386b989b0f44c79dc29c7222e7e9484" id="r_ad386b989b0f44c79dc29c7222e7e9484"><td class="memItemLeft" align="right" valign="top"><a id="ad386b989b0f44c79dc29c7222e7e9484" name="ad386b989b0f44c79dc29c7222e7e9484"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cron_execute</b> ()</td></tr>
<tr class="memdesc:ad386b989b0f44c79dc29c7222e7e9484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch available updates info and eventually send notification to site admins. <br /></td></tr>
<tr class="separator:ad386b989b0f44c79dc29c7222e7e9484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce677d3cdd052f0414cb128610542db" id="r_a3ce677d3cdd052f0414cb128610542db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ce677d3cdd052f0414cb128610542db">cron_execution_offset</a> ()</td></tr>
<tr class="memdesc:a3ce677d3cdd052f0414cb128610542db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the cron execution offset for this site.  <br /></td></tr>
<tr class="separator:a3ce677d3cdd052f0414cb128610542db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af682c2e8d93a933acee7598528600a5c" id="r_af682c2e8d93a933acee7598528600a5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af682c2e8d93a933acee7598528600a5c">cron_has_fresh_fetch</a> ($now)</td></tr>
<tr class="memdesc:af682c2e8d93a933acee7598528600a5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide if the recently fetched data are still fresh enough.  <br /></td></tr>
<tr class="separator:af682c2e8d93a933acee7598528600a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af90d3eeb57f90e4a52eab873bf8b66b6" id="r_af90d3eeb57f90e4a52eab873bf8b66b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af90d3eeb57f90e4a52eab873bf8b66b6">cron_has_outdated_fetch</a> ($now)</td></tr>
<tr class="memdesc:af90d3eeb57f90e4a52eab873bf8b66b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide if the fetch is outadated or even missing.  <br /></td></tr>
<tr class="separator:af90d3eeb57f90e4a52eab873bf8b66b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf377612094169f654298ed62d9ac821" id="r_aaf377612094169f654298ed62d9ac821"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaf377612094169f654298ed62d9ac821">cron_mtrace</a> ($msg, $eol=PHP_EOL)</td></tr>
<tr class="memdesc:aaf377612094169f654298ed62d9ac821"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output cron debugging info.  <br /></td></tr>
<tr class="separator:aaf377612094169f654298ed62d9ac821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41dcdb5e7bf8f2f5b28f58beb629168e" id="r_a41dcdb5e7bf8f2f5b28f58beb629168e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41dcdb5e7bf8f2f5b28f58beb629168e">cron_notifications</a> (array $changes)</td></tr>
<tr class="memdesc:a41dcdb5e7bf8f2f5b28f58beb629168e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the list of changes in available updates, pick those to send to site admins.  <br /></td></tr>
<tr class="separator:a41dcdb5e7bf8f2f5b28f58beb629168e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3041a933c1485b29ab0357119a4bd725" id="r_a3041a933c1485b29ab0357119a4bd725"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3041a933c1485b29ab0357119a4bd725">cron_notify</a> (array $notifications)</td></tr>
<tr class="memdesc:a3041a933c1485b29ab0357119a4bd725"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the given notifications to site admins via messaging API.  <br /></td></tr>
<tr class="separator:a3041a933c1485b29ab0357119a4bd725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12537716a515fa991f6e6b02c7c90db9" id="r_a12537716a515fa991f6e6b02c7c90db9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12537716a515fa991f6e6b02c7c90db9">decode_response</a> ($response)</td></tr>
<tr class="memdesc:a12537716a515fa991f6e6b02c7c90db9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes the raw string response from the update notifications provider.  <br /></td></tr>
<tr class="separator:a12537716a515fa991f6e6b02c7c90db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0c364ec6f8a5aec0b068f0ac1e5c59" id="r_a2b0c364ec6f8a5aec0b068f0ac1e5c59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b0c364ec6f8a5aec0b068f0ac1e5c59">get_response</a> ()</td></tr>
<tr class="memdesc:a2b0c364ec6f8a5aec0b068f0ac1e5c59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes cURL request to get data from the remote site.  <br /></td></tr>
<tr class="separator:a2b0c364ec6f8a5aec0b068f0ac1e5c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addbafc11b98f0f8c1349583982b50d84" id="r_addbafc11b98f0f8c1349583982b50d84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#addbafc11b98f0f8c1349583982b50d84">is_same_release</a> ($remote, $local=null)</td></tr>
<tr class="memdesc:addbafc11b98f0f8c1349583982b50d84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two release labels and decide if they are the same.  <br /></td></tr>
<tr class="separator:addbafc11b98f0f8c1349583982b50d84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae21056615eeca8ddb0466b23b2403fe" id="r_aae21056615eeca8ddb0466b23b2403fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae21056615eeca8ddb0466b23b2403fe">load_current_environment</a> ($forcereload=false)</td></tr>
<tr class="memdesc:aae21056615eeca8ddb0466b23b2403fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the properties currentversion, currentrelease, currentbranch and currentplugins.  <br /></td></tr>
<tr class="separator:aae21056615eeca8ddb0466b23b2403fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed77210bd600779cf4ea6956fc2b425" id="r_a6ed77210bd600779cf4ea6956fc2b425"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ed77210bd600779cf4ea6956fc2b425">prepare_request_options</a> ()</td></tr>
<tr class="memdesc:a6ed77210bd600779cf4ea6956fc2b425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of cURL options to use when fetching available updates data.  <br /></td></tr>
<tr class="separator:a6ed77210bd600779cf4ea6956fc2b425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fc4a5cdbfda7b135e52d14ed2cc3864" id="r_a1fc4a5cdbfda7b135e52d14ed2cc3864"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1fc4a5cdbfda7b135e52d14ed2cc3864">prepare_request_params</a> ()</td></tr>
<tr class="memdesc:a1fc4a5cdbfda7b135e52d14ed2cc3864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of HTTP params to be sent to the updates provider URL.  <br /></td></tr>
<tr class="separator:a1fc4a5cdbfda7b135e52d14ed2cc3864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae214d8e9e71b857eb7a4cf33c8d3fdfc" id="r_ae214d8e9e71b857eb7a4cf33c8d3fdfc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae214d8e9e71b857eb7a4cf33c8d3fdfc">prepare_request_url</a> ()</td></tr>
<tr class="memdesc:ae214d8e9e71b857eb7a4cf33c8d3fdfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the URL to send update requests to.  <br /></td></tr>
<tr class="separator:ae214d8e9e71b857eb7a4cf33c8d3fdfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cbbaf60a045c972b3298d2eaeba8899" id="r_a0cbbaf60a045c972b3298d2eaeba8899"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0cbbaf60a045c972b3298d2eaeba8899">restore_response</a> ($forcereload=false)</td></tr>
<tr class="memdesc:a0cbbaf60a045c972b3298d2eaeba8899"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the most recent raw response record we have fetched.  <br /></td></tr>
<tr class="separator:a0cbbaf60a045c972b3298d2eaeba8899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6b17692fa30736d57717e670bfdd79" id="r_a1e6b17692fa30736d57717e670bfdd79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e6b17692fa30736d57717e670bfdd79">store_response</a> ($response)</td></tr>
<tr class="memdesc:a1e6b17692fa30736d57717e670bfdd79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the valid fetched response for later usage.  <br /></td></tr>
<tr class="separator:a1e6b17692fa30736d57717e670bfdd79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a4e260dc21cc7b0b016cd21b4241eb" id="r_a50a4e260dc21cc7b0b016cd21b4241eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50a4e260dc21cc7b0b016cd21b4241eb">validate_response</a> ($response)</td></tr>
<tr class="memdesc:a50a4e260dc21cc7b0b016cd21b4241eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes sure the response is valid, has correct API format etc.  <br /></td></tr>
<tr class="separator:a50a4e260dc21cc7b0b016cd21b4241eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a14ee2ab35d857b33adc84a54a26f370d" id="r_a14ee2ab35d857b33adc84a54a26f370d"><td class="memItemLeft" align="right" valign="top"><a id="a14ee2ab35d857b33adc84a54a26f370d" name="a14ee2ab35d857b33adc84a54a26f370d"></a>
null string&#160;</td><td class="memItemRight" valign="bottom"><b>$currentbranch</b> = null</td></tr>
<tr class="memdesc:a14ee2ab35d857b33adc84a54a26f370d"><td class="mdescLeft">&#160;</td><td class="mdescRight">branch of the local <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> code <br /></td></tr>
<tr class="separator:a14ee2ab35d857b33adc84a54a26f370d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21d4a356c89f7a34e39e23a925f4b775" id="r_a21d4a356c89f7a34e39e23a925f4b775"><td class="memItemLeft" align="right" valign="top"><a id="a21d4a356c89f7a34e39e23a925f4b775" name="a21d4a356c89f7a34e39e23a925f4b775"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$currentplugins</b> = array()</td></tr>
<tr class="memdesc:a21d4a356c89f7a34e39e23a925f4b775"><td class="mdescLeft">&#160;</td><td class="mdescRight">of (string)frankestyle =&gt; (string)version list of additional plugins deployed at this site <br /></td></tr>
<tr class="separator:a21d4a356c89f7a34e39e23a925f4b775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a738fadfc3a220079e9826c3b6413164d" id="r_a738fadfc3a220079e9826c3b6413164d"><td class="memItemLeft" align="right" valign="top"><a id="a738fadfc3a220079e9826c3b6413164d" name="a738fadfc3a220079e9826c3b6413164d"></a>
null string&#160;</td><td class="memItemRight" valign="bottom"><b>$currentrelease</b> = null</td></tr>
<tr class="memdesc:a738fadfc3a220079e9826c3b6413164d"><td class="mdescLeft">&#160;</td><td class="mdescRight">the release info of the local <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> code <br /></td></tr>
<tr class="separator:a738fadfc3a220079e9826c3b6413164d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0d55788920b655f5b8b5a6c9a6909e6" id="r_aa0d55788920b655f5b8b5a6c9a6909e6"><td class="memItemLeft" align="right" valign="top"><a id="aa0d55788920b655f5b8b5a6c9a6909e6" name="aa0d55788920b655f5b8b5a6c9a6909e6"></a>
null string&#160;</td><td class="memItemRight" valign="bottom"><b>$currentversion</b> = null</td></tr>
<tr class="memdesc:aa0d55788920b655f5b8b5a6c9a6909e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">the numerical version of the local <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> code <br /></td></tr>
<tr class="separator:aa0d55788920b655f5b8b5a6c9a6909e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d2b73a0bbc8eae03ba94a72228ef7a6" id="r_a8d2b73a0bbc8eae03ba94a72228ef7a6"><td class="memItemLeft" align="right" valign="top"><a id="a8d2b73a0bbc8eae03ba94a72228ef7a6" name="a8d2b73a0bbc8eae03ba94a72228ef7a6"></a>
null int&#160;</td><td class="memItemRight" valign="bottom"><b>$recentfetch</b> = null</td></tr>
<tr class="memdesc:a8d2b73a0bbc8eae03ba94a72228ef7a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">the timestamp of when the most recent response was fetched <br /></td></tr>
<tr class="separator:a8d2b73a0bbc8eae03ba94a72228ef7a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff860ba7bde12d816a7239127d0b1d6" id="r_afff860ba7bde12d816a7239127d0b1d6"><td class="memItemLeft" align="right" valign="top"><a id="afff860ba7bde12d816a7239127d0b1d6" name="afff860ba7bde12d816a7239127d0b1d6"></a>
null array&#160;</td><td class="memItemRight" valign="bottom"><b>$recentresponse</b> = null</td></tr>
<tr class="memdesc:afff860ba7bde12d816a7239127d0b1d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">the recent response from the update notification provider <br /></td></tr>
<tr class="separator:afff860ba7bde12d816a7239127d0b1d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a3619d801e9faa75fed45bd38fb6f92e1" id="r_a3619d801e9faa75fed45bd38fb6f92e1"><td class="memItemLeft" align="right" valign="top"><a id="a3619d801e9faa75fed45bd38fb6f92e1" name="a3619d801e9faa75fed45bd38fb6f92e1"></a>
static core update <a class="el" href="../../d9/d7d/classcore_1_1update_1_1checker.html">checker</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$singletoninstance</b></td></tr>
<tr class="memdesc:a3619d801e9faa75fed45bd38fb6f92e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">holds the singleton instance <br /></td></tr>
<tr class="separator:a3619d801e9faa75fed45bd38fb6f92e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Singleton class that handles checking for available updates. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aa5cf1431b229d55b52a2346b95f77e2b" name="aa5cf1431b229d55b52a2346b95f77e2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5cf1431b229d55b52a2346b95f77e2b">&#9670;&#160;</a></span>compare_responses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::compare_responses </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$old</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$new</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compares two raw <a class="el" href="">$recentresponse</a> records and returns the list of changed updates. </p>
<p>This method is used to populate potential update info to be sent to site admins.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$old</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$new</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">checker_exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>parts of $new['updates'] that have changed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a28ca324979052597d4ecf926559f9d10" name="a28ca324979052597d4ecf926559f9d10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28ca324979052597d4ecf926559f9d10">&#9670;&#160;</a></span>cron_autocheck_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_autocheck_enabled </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decide if the autocheck feature is disabled in the server setting. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if autocheck enabled, false if disabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adbcd1dd807ca2360e4f75b60e5203a6f" name="adbcd1dd807ca2360e4f75b60e5203a6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbcd1dd807ca2360e4f75b60e5203a6f">&#9670;&#160;</a></span>cron_current_timestamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_current_timestamp </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current timestamp. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the timestamp </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3ce677d3cdd052f0414cb128610542db" name="a3ce677d3cdd052f0414cb128610542db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ce677d3cdd052f0414cb128610542db">&#9670;&#160;</a></span>cron_execution_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_execution_offset </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the cron execution offset for this site. </p>
<p>The main <a class="el" href="">self::cron()</a> is supposed to run every night in some random time between 01:00 and 06:00 AM (local time). The exact moment is defined by so called execution offset, that is the amount of time after 01:00 AM. The offset value is initially generated randomly and then used consistently at the site. This way, the regular checks against the download.moodle.org server are spread in time.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the offset number of seconds from range 1 sec to 5 hours </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af682c2e8d93a933acee7598528600a5c" name="af682c2e8d93a933acee7598528600a5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af682c2e8d93a933acee7598528600a5c">&#9670;&#160;</a></span>cron_has_fresh_fetch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_has_fresh_fetch </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$now</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decide if the recently fetched data are still fresh enough. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$now</td><td>current timestamp </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if no need to re-fetch, false otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af90d3eeb57f90e4a52eab873bf8b66b6" name="af90d3eeb57f90e4a52eab873bf8b66b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af90d3eeb57f90e4a52eab873bf8b66b6">&#9670;&#160;</a></span>cron_has_outdated_fetch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_has_outdated_fetch </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$now</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decide if the fetch is outadated or even missing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$now</td><td>current timestamp </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>false if no need to re-fetch, true otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf377612094169f654298ed62d9ac821" name="aaf377612094169f654298ed62d9ac821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf377612094169f654298ed62d9ac821">&#9670;&#160;</a></span>cron_mtrace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_mtrace </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$msg</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eol</em><span class="paramdefsep"> = </span><span class="paramdefval">PHP_EOL</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Output cron debugging info. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d0/de1/group__core.html#ga8643808fe020d0242fb98be8fce80496" title="For outputting debugging info.">mtrace()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$msg</td><td>output message </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$eol</td><td>end of line </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a41dcdb5e7bf8f2f5b28f58beb629168e" name="a41dcdb5e7bf8f2f5b28f58beb629168e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41dcdb5e7bf8f2f5b28f58beb629168e">&#9670;&#160;</a></span>cron_notifications()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_notifications </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$changes</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the list of changes in available updates, pick those to send to site admins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$changes</td><td>as returned by <a class="el" href="">self::compare_responses()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of <a class="el" href="../../dd/d46/classcore_1_1update_1_1info.html" title="Defines the structure of objects returned by core::update::checker::get_update_info().">core::update::info</a> objects to send to site admins </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3041a933c1485b29ab0357119a4bd725" name="a3041a933c1485b29ab0357119a4bd725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3041a933c1485b29ab0357119a4bd725">&#9670;&#160;</a></span>cron_notify()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::cron_notify </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$notifications</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends the given notifications to site admins via messaging API. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$notifications</td><td>array of <a class="el" href="../../dd/d46/classcore_1_1update_1_1info.html" title="Defines the structure of objects returned by core::update::checker::get_update_info().">core::update::info</a> objects to send </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a12537716a515fa991f6e6b02c7c90db9" name="a12537716a515fa991f6e6b02c7c90db9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12537716a515fa991f6e6b02c7c90db9">&#9670;&#160;</a></span>decode_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::decode_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$response</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decodes the raw string response from the update notifications provider. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$response</td><td>as returned by <a class="el" href="">self::get_response()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>decoded response structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa909d2eaca4ff45cd13df43119c32c95" name="aa909d2eaca4ff45cd13df43119c32c95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa909d2eaca4ff45cd13df43119c32c95">&#9670;&#160;</a></span>enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::enabled </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is checking for available updates enabled? </p>
<p>The feature is enabled unless it is prohibited via config.php. If enabled, the button for manual checking for available updates is displayed at admin screens. To perform scheduled checks for updates automatically, the admin setting $CFG-&gt;updateautocheck has to be enabled.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4cfc45c86e2703f9caa2a08b86098926" name="a4cfc45c86e2703f9caa2a08b86098926"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cfc45c86e2703f9caa2a08b86098926">&#9670;&#160;</a></span>fetch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::fetch </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the available update status from the remote site. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">checker_exception</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4f21b94b88361248453f3f4d2de635a0" name="a4f21b94b88361248453f3f4d2de635a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f21b94b88361248453f3f4d2de635a0">&#9670;&#160;</a></span>get_last_timefetched()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::get_last_timefetched </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the timestamp of the last execution of <a class="el" href="../../dc/d71/group___imap___client.html#ga4370e800177c19abfb406f670e4e0807">fetch()</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|null</td><td>null if it has never been executed or we don't known </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2b0c364ec6f8a5aec0b068f0ac1e5c59" name="a2b0c364ec6f8a5aec0b068f0ac1e5c59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b0c364ec6f8a5aec0b068f0ac1e5c59">&#9670;&#160;</a></span>get_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::get_response </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes cURL request to get data from the remote site. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>raw request result </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">checker_exception</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a229bbcd885131ea612196df2b900b66b" name="a229bbcd885131ea612196df2b900b66b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a229bbcd885131ea612196df2b900b66b">&#9670;&#160;</a></span>get_update_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::get_update_info </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$options</em><span class="paramdefsep"> = </span><span class="paramdefval">array()</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the available update information for the given component. </p>
<p>This method returns null if the most recent response does not contain any information about it. The returned structure is an array of available updates for the given component. Each update info is an object with at least one property called 'version'. Other possible properties are 'release', 'maturity', 'url' and 'downloadurl'.</p>
<p>For the 'core' component, the method returns real updates only (those with higher version). For all other components, the list of all known remote updates is returned and the caller (usually the <a class="el" href="../../d3/df2/classcore__plugin__manager.html">core_plugin_manager</a>) is supposed to make the actual comparison of versions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>frankenstyle </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>with supported keys 'minmaturity' and/or 'notifybuilds' </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">null|array</td><td>null or array of <a class="el" href="../../dd/d46/classcore_1_1update_1_1info.html" title="Defines the structure of objects returned by core::update::checker::get_update_info().">core::update::info</a> objects </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a89737dcac677d669089e8c5b6f9189b6" name="a89737dcac677d669089e8c5b6f9189b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89737dcac677d669089e8c5b6f9189b6">&#9670;&#160;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\update\checker::instance </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Factory method for this class. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d9/d7d/classcore_1_1update_1_1checker.html" title="Singleton class that handles checking for available updates.">core::update::checker</a></td><td>the singleton instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="addbafc11b98f0f8c1349583982b50d84" name="addbafc11b98f0f8c1349583982b50d84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addbafc11b98f0f8c1349583982b50d84">&#9670;&#160;</a></span>is_same_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::is_same_release </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$remote</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$local</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare two release labels and decide if they are the same. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$remote</td><td>release info of the available update </td></tr>
    <tr><td class="paramtype">null&#160;|&#160;string</td><td class="paramname">$local</td><td>release info of the local code, defaults to $release defined in version.php </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true if the releases declare the same minor+major version </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aae21056615eeca8ddb0466b23b2403fe" name="aae21056615eeca8ddb0466b23b2403fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae21056615eeca8ddb0466b23b2403fe">&#9670;&#160;</a></span>load_current_environment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::load_current_environment </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$forcereload</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the properties currentversion, currentrelease, currentbranch and currentplugins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$forcereload</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ed77210bd600779cf4ea6956fc2b425" name="a6ed77210bd600779cf4ea6956fc2b425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed77210bd600779cf4ea6956fc2b425">&#9670;&#160;</a></span>prepare_request_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::prepare_request_options </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the list of cURL options to use when fetching available updates data. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of (string)param =&gt; (string)value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1fc4a5cdbfda7b135e52d14ed2cc3864" name="a1fc4a5cdbfda7b135e52d14ed2cc3864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fc4a5cdbfda7b135e52d14ed2cc3864">&#9670;&#160;</a></span>prepare_request_params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::prepare_request_params </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the list of HTTP params to be sent to the updates provider URL. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of (string)param =&gt; (string)value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae214d8e9e71b857eb7a4cf33c8d3fdfc" name="ae214d8e9e71b857eb7a4cf33c8d3fdfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae214d8e9e71b857eb7a4cf33c8d3fdfc">&#9670;&#160;</a></span>prepare_request_url()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::prepare_request_url </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the URL to send update requests to. </p>
<p>During the development or testing, you can set $CFG-&gt;alternativeupdateproviderurl to a custom URL that will be used. Otherwise the standard URL will be returned.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>URL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a32d5c49869f9bd09be7a3e355f4963c4" name="a32d5c49869f9bd09be7a3e355f4963c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d5c49869f9bd09be7a3e355f4963c4">&#9670;&#160;</a></span>reset_caches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\update\checker::reset_caches </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$phpunitreset</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset any caches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$phpunitreset</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0cbbaf60a045c972b3298d2eaeba8899" name="a0cbbaf60a045c972b3298d2eaeba8899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cbbaf60a045c972b3298d2eaeba8899">&#9670;&#160;</a></span>restore_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::restore_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$forcereload</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads the most recent raw response record we have fetched. </p>
<p>After this method is called, $this-&gt;recentresponse is set to an array. If the array is empty, then either no data have been fetched yet or the fetched data do not have expected format (and thence they are ignored and a debugging message is displayed).</p>
<p>This implementation uses the config_plugins table as the permanent storage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$forcereload</td><td>reload even if it was already loaded </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1e6b17692fa30736d57717e670bfdd79" name="a1e6b17692fa30736d57717e670bfdd79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6b17692fa30736d57717e670bfdd79">&#9670;&#160;</a></span>store_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::store_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$response</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores the valid fetched response for later usage. </p>
<p>This implementation uses the config_plugins table as the permanent storage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$response</td><td>raw valid data returned by <a class="el" href="">self::get_response()</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a50a4e260dc21cc7b0b016cd21b4241eb" name="a50a4e260dc21cc7b0b016cd21b4241eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50a4e260dc21cc7b0b016cd21b4241eb">&#9670;&#160;</a></span>validate_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\update\checker::validate_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$response</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes sure the response is valid, has correct API format etc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$response</td><td>raw response as returned by the <a class="el" href="">self::get_response()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">checker_exception</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/update/<b>checker.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 5 2024 02:33:29 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
