<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: mod_forum\local\builders\exported_posts Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.8 (Build: 20240610) (2d41ac46f45)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d6/dd5/namespacemod__forum.html">mod_forum</a></li><li class="navelem"><a class="el" href="../../d3/dee/namespacemod__forum_1_1local.html">local</a></li><li class="navelem"><a class="el" href="../../d9/d60/namespacemod__forum_1_1local_1_1builders.html">builders</a></li><li class="navelem"><a class="el" href="../../dc/dd5/classmod__forum_1_1local_1_1builders_1_1exported__posts.html">exported_posts</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d0/d9f/classmod__forum_1_1local_1_1builders_1_1exported__posts-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">mod_forum\local\builders\exported_posts Class Reference<div class="ingroups"><a class="el" href="../../d7/d5f/group__mod__forum.html">mod_forum</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Exported post builder class.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a40efba0f41ad40eea0e804ea6d0dd1ac" id="r_a40efba0f41ad40eea0e804ea6d0dd1ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40efba0f41ad40eea0e804ea6d0dd1ac">__construct</a> (<a class="el" href="../../de/d60/classrenderer__base.html">renderer_base</a> $renderer, legacy_data_mapper_factory $legacydatamapperfactory, exporter_factory $exporterfactory, vault_factory $vaultfactory, manager_factory $managerfactory)</td></tr>
<tr class="memdesc:a40efba0f41ad40eea0e804ea6d0dd1ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a40efba0f41ad40eea0e804ea6d0dd1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58ea349433266b938ff81123bfe8477" id="r_ad58ea349433266b938ff81123bfe8477"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad58ea349433266b938ff81123bfe8477">build</a> (stdClass $user, array $forums, array $discussions, array $posts, bool $includeinlineattachments=false)</td></tr>
<tr class="memdesc:ad58ea349433266b938ff81123bfe8477"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build the exported posts for a given set of forums, discussions, and posts.  <br /></td></tr>
<tr class="separator:ad58ea349433266b938ff81123bfe8477"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Exported post builder class. </p>
<p>This class is an implementation of the builder pattern (loosely). It is responsible for taking a set of related forums, discussions, and posts and generate the exported version of the posts.</p>
<p>It encapsulates the complexity involved with exporting posts. All of the relevant additional resources will be loaded by this class in order to ensure the exporting process can happen.</p>
<p>See this doc for more information on the builder pattern: <a href="https://designpatternsphp.readthedocs.io/en/latest/Creational/Builder/README.html">https://designpatternsphp.readthedocs.io/en/latest/Creational/Builder/README.html</a></p>
<dl class="section copyright"><dt>Copyright</dt><dd>2019 Ryan Wyllie <a href="#" onclick="location.href='mai'+'lto:'+'rya'+'n@'+'moo'+'dl'+'e.c'+'om'; return false;">ryan@<span class="obfuscator">.nosp@m.</span>mood<span class="obfuscator">.nosp@m.</span>le.co<span class="obfuscator">.nosp@m.</span>m</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a40efba0f41ad40eea0e804ea6d0dd1ac" name="a40efba0f41ad40eea0e804ea6d0dd1ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40efba0f41ad40eea0e804ea6d0dd1ac">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mod_forum\local\builders\exported_posts::__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d60/classrenderer__base.html">renderer_base</a></td>          <td class="paramname"><span class="paramname"><em>$renderer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">legacy_data_mapper_factory</td>          <td class="paramname"><span class="paramname"><em>$legacydatamapperfactory</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">exporter_factory</td>          <td class="paramname"><span class="paramname"><em>$exporterfactory</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vault_factory</td>          <td class="paramname"><span class="paramname"><em>$vaultfactory</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">manager_factory</td>          <td class="paramname"><span class="paramname"><em>$managerfactory</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../de/d60/classrenderer__base.html" title="Simple base class for Moodle renderers.">renderer_base</a></td><td class="paramname">$renderer</td><td>Core renderer </td></tr>
    <tr><td class="paramtype">legacy_data_mapper_factory</td><td class="paramname">$legacydatamapperfactory</td><td>Legacy data mapper factory </td></tr>
    <tr><td class="paramtype">exporter_factory</td><td class="paramname">$exporterfactory</td><td>Exporter factory </td></tr>
    <tr><td class="paramtype">vault_factory</td><td class="paramname">$vaultfactory</td><td>Vault factory </td></tr>
    <tr><td class="paramtype">manager_factory</td><td class="paramname">$managerfactory</td><td>Manager factory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad58ea349433266b938ff81123bfe8477" name="ad58ea349433266b938ff81123bfe8477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad58ea349433266b938ff81123bfe8477">&#9670;&#160;</a></span>build()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mod_forum\local\builders\exported_posts::build </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$forums</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$discussions</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$posts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$includeinlineattachments</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build the exported posts for a given set of forums, discussions, and posts. </p>
<p>This will typically be used for a list of posts in the same discussion/forum however it does support exporting any arbitrary list of posts as long as the caller also provides a unique list of all discussions for the list of posts and all forums for the list of discussions.</p>
<p>Increasing the number of different forums being processed will increase the processing time due to processing multiple contexts (for things like capabilities, files, etc). The code attempts to load the additional resources as efficiently as possible but there is no way around some of the additional overhead.</p>
<p>Note: Some posts will be removed as part of the build process according to capabilities. A one-to-one mapping should not be expected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>The user to export the posts for. </td></tr>
    <tr><td class="paramtype">forum_entity[]</td><td class="paramname">$forums</td><td>A list of all forums that each of the $discussions belong to </td></tr>
    <tr><td class="paramtype">discussion_entity[]</td><td class="paramname">$discussions</td><td>A list of all discussions that each of the $posts belong to </td></tr>
    <tr><td class="paramtype">post_entity[]</td><td class="paramname">$posts</td><td>The list of posts to export. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includeinlineattachments</td><td>Whether inline attachments should be included or not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass[]</td><td>List of exported posts in the same order as the $posts array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>mod/forum/classes/local/builders/<b>exported_posts.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 9 2024 02:44:11 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
