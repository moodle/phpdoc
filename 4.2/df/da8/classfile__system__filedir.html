<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: file_system_filedir Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.7+ (Build: 20240516) (7ecbcb3c336)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d9/dc2/classfile__system__filedir-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">file_system_filedir Class Reference<div class="ingroups"><a class="el" href="../../d5/d09/group__core__files.html">core_files</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for file_system_filedir:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../df/da8/classfile__system__filedir.png" usemap="#file_5Fsystem_5Ffiledir_map" alt=""/>
  <map id="file_5Fsystem_5Ffiledir_map" name="file_5Fsystem_5Ffiledir_map">
<area href="../../df/d66/classfile__system.html" alt="file_system" shape="rect" coords="0,0,113,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aec3217d7dc2a8b6026e8081775286c04" id="r_aec3217d7dc2a8b6026e8081775286c04"><td class="memItemLeft" align="right" valign="top"><a id="aec3217d7dc2a8b6026e8081775286c04" name="aec3217d7dc2a8b6026e8081775286c04"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__construct</b> ()</td></tr>
<tr class="memdesc:aec3217d7dc2a8b6026e8081775286c04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform any custom setup for this type of <a class="el" href="../../df/d66/classfile__system.html">file_system</a>. <br /></td></tr>
<tr class="separator:aec3217d7dc2a8b6026e8081775286c04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e0ffabb607ab48e29302355da95af4b" id="r_a4e0ffabb607ab48e29302355da95af4b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e0ffabb607ab48e29302355da95af4b">add_file_from_path</a> ($pathname, $contenthash=null)</td></tr>
<tr class="memdesc:a4e0ffabb607ab48e29302355da95af4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the supplied file to the file system.  <br /></td></tr>
<tr class="separator:a4e0ffabb607ab48e29302355da95af4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67e2bbbc8bfeed51b7907143765555ed" id="r_a67e2bbbc8bfeed51b7907143765555ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67e2bbbc8bfeed51b7907143765555ed">add_file_from_string</a> ($content)</td></tr>
<tr class="memdesc:a67e2bbbc8bfeed51b7907143765555ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a file with the supplied content to the file system.  <br /></td></tr>
<tr class="separator:a67e2bbbc8bfeed51b7907143765555ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab296e9d2bccccf27e7d3d0c269be4be1" id="r_ab296e9d2bccccf27e7d3d0c269be4be1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ab296e9d2bccccf27e7d3d0c269be4be1">add_storedfile_to_archive</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, <a class="el" href="../../d0/d59/classfile__archive.html">file_archive</a> $filearch, $archivepath)</td></tr>
<tr class="memdesc:ab296e9d2bccccf27e7d3d0c269be4be1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add file/directory into archive.  <br /></td></tr>
<tr class="separator:ab296e9d2bccccf27e7d3d0c269be4be1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0f2a17e2ffbe4ce377db4ac1c7a6a8" id="r_a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a7d0f2a17e2ffbe4ce377db4ac1c7a6a8">add_to_curl_request</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, &amp;$curlrequest, $key)</td></tr>
<tr class="memdesc:a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds this file path to a curl request (POST only).  <br /></td></tr>
<tr class="separator:a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb8e141cff7bb1360d20f73b5791222" id="r_aedb8e141cff7bb1360d20f73b5791222"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aedb8e141cff7bb1360d20f73b5791222">copy_content_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $target)</td></tr>
<tr class="memdesc:aedb8e141cff7bb1360d20f73b5791222"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy content of file to given pathname.  <br /></td></tr>
<tr class="separator:aedb8e141cff7bb1360d20f73b5791222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd02c3a9a88efd533539f6fb1113a8d" id="r_a3dd02c3a9a88efd533539f6fb1113a8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3dd02c3a9a88efd533539f6fb1113a8d">cron</a> ()</td></tr>
<tr class="memdesc:a3dd02c3a9a88efd533539f6fb1113a8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup the trash directory.  <br /></td></tr>
<tr class="separator:a3dd02c3a9a88efd533539f6fb1113a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a5da858151b7ce51aeb2a67d51ad38" id="r_a35a5da858151b7ce51aeb2a67d51ad38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a35a5da858151b7ce51aeb2a67d51ad38">extract_to_pathname</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, <a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer, $pathname, <a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a> $progress=null)</td></tr>
<tr class="memdesc:a35a5da858151b7ce51aeb2a67d51ad38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract file to given file path (real OS filesystem), existing files are overwritten.  <br /></td></tr>
<tr class="separator:a35a5da858151b7ce51aeb2a67d51ad38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad56ab84f69ba9c9840a282668597376f" id="r_ad56ab84f69ba9c9840a282668597376f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ad56ab84f69ba9c9840a282668597376f">extract_to_storage</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, <a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer, $contextid, $component, $filearea, $itemid, $pathbase, $userid=null, <a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a> $progress=null)</td></tr>
<tr class="memdesc:ad56ab84f69ba9c9840a282668597376f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract file to given file path (real OS filesystem), existing files are overwritten.  <br /></td></tr>
<tr class="separator:ad56ab84f69ba9c9840a282668597376f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f5f85c088e34c7ef9179ebc32ad8ebf" id="r_a0f5f85c088e34c7ef9179ebc32ad8ebf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a0f5f85c088e34c7ef9179ebc32ad8ebf">get_content</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a0f5f85c088e34c7ef9179ebc32ad8ebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the content of the specified stored file.  <br /></td></tr>
<tr class="separator:a0f5f85c088e34c7ef9179ebc32ad8ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe1cf5c4f4a97ddafff94186b144de1f" id="r_afe1cf5c4f4a97ddafff94186b144de1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#afe1cf5c4f4a97ddafff94186b144de1f">get_content_file_handle</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $type=stored_file::FILE_HANDLE_FOPEN)</td></tr>
<tr class="memdesc:afe1cf5c4f4a97ddafff94186b144de1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file handle - read only mode, no writing allowed into pool files!  <br /></td></tr>
<tr class="separator:afe1cf5c4f4a97ddafff94186b144de1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23934d0c5451f122a77acf1bb8282e5d" id="r_a23934d0c5451f122a77acf1bb8282e5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a23934d0c5451f122a77acf1bb8282e5d">get_imageinfo</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a23934d0c5451f122a77acf1bb8282e5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns information about image.  <br /></td></tr>
<tr class="separator:a23934d0c5451f122a77acf1bb8282e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce522e57fdeba336b9968e985d3311f" id="r_a8ce522e57fdeba336b9968e985d3311f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ce522e57fdeba336b9968e985d3311f">get_local_path_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:a8ce522e57fdeba336b9968e985d3311f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a remote filepath for the specified stored file.  <br /></td></tr>
<tr class="separator:a8ce522e57fdeba336b9968e985d3311f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc98b69ccc359bc6cd0d8d1cb84363c8" id="r_afc98b69ccc359bc6cd0d8d1cb84363c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#afc98b69ccc359bc6cd0d8d1cb84363c8">get_psr_stream</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:afc98b69ccc359bc6cd0d8d1cb84363c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a PSR7 Stream for the specified file which implements the PSR Message StreamInterface.  <br /></td></tr>
<tr class="separator:afc98b69ccc359bc6cd0d8d1cb84363c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c6de079ecbef03951b9cf208201bd53" id="r_a4c6de079ecbef03951b9cf208201bd53"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c6de079ecbef03951b9cf208201bd53">get_remote_path_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a4c6de079ecbef03951b9cf208201bd53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a remote filepath for the specified stored file.  <br /></td></tr>
<tr class="separator:a4c6de079ecbef03951b9cf208201bd53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0016d02c00c2a59cc5784b9bba2b6060" id="r_a0016d02c00c2a59cc5784b9bba2b6060"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a0016d02c00c2a59cc5784b9bba2b6060">is_file_readable_locally_by_hash</a> ($contenthash, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:a0016d02c00c2a59cc5784b9bba2b6060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present on the file system somewhere given the contenthash.  <br /></td></tr>
<tr class="separator:a0016d02c00c2a59cc5784b9bba2b6060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526a870315ac46a3a5152b50201889cb" id="r_a526a870315ac46a3a5152b50201889cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a526a870315ac46a3a5152b50201889cb">is_file_readable_locally_by_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:a526a870315ac46a3a5152b50201889cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present on the file system somewhere.  <br /></td></tr>
<tr class="separator:a526a870315ac46a3a5152b50201889cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66b7c0dae227f738dccda596db16c8d1" id="r_a66b7c0dae227f738dccda596db16c8d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a66b7c0dae227f738dccda596db16c8d1">is_file_readable_remotely_by_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:a66b7c0dae227f738dccda596db16c8d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present locally on the file system somewhere given the contenthash.  <br /></td></tr>
<tr class="separator:a66b7c0dae227f738dccda596db16c8d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4e80af230068c630183f8262ca29f6" id="r_abf4e80af230068c630183f8262ca29f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#abf4e80af230068c630183f8262ca29f6">is_file_readable_remotely_by_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:abf4e80af230068c630183f8262ca29f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present on the local file system somewhere.  <br /></td></tr>
<tr class="separator:abf4e80af230068c630183f8262ca29f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73ae40c4b1c8ab8f975c287ec5aeaaf2" id="r_a73ae40c4b1c8ab8f975c287ec5aeaaf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a73ae40c4b1c8ab8f975c287ec5aeaaf2">is_image_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a73ae40c4b1c8ab8f975c287ec5aeaaf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to determine whether the specified file is likely to be an image.  <br /></td></tr>
<tr class="separator:a73ae40c4b1c8ab8f975c287ec5aeaaf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac716bfd32ff89202686932955e84a130" id="r_ac716bfd32ff89202686932955e84a130"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ac716bfd32ff89202686932955e84a130">list_files</a> ($file, <a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer)</td></tr>
<tr class="memdesc:ac716bfd32ff89202686932955e84a130"><td class="mdescLeft">&#160;</td><td class="mdescRight">List contents of archive.  <br /></td></tr>
<tr class="separator:ac716bfd32ff89202686932955e84a130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeadee305eca3b669503616af31b4f0db" id="r_aeadee305eca3b669503616af31b4f0db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#aeadee305eca3b669503616af31b4f0db">mimetype_from_hash</a> ($contenthash, $filename)</td></tr>
<tr class="memdesc:aeadee305eca3b669503616af31b4f0db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the mime information for the specified stored file.  <br /></td></tr>
<tr class="separator:aeadee305eca3b669503616af31b4f0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0fecf5d3ce1913daff424281ea117a4" id="r_ac0fecf5d3ce1913daff424281ea117a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ac0fecf5d3ce1913daff424281ea117a4">mimetype_from_storedfile</a> ($file)</td></tr>
<tr class="memdesc:ac0fecf5d3ce1913daff424281ea117a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the mime information for the specified stored file.  <br /></td></tr>
<tr class="separator:ac0fecf5d3ce1913daff424281ea117a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf24d28e45870b2b63c1a986ea08d0fa" id="r_adf24d28e45870b2b63c1a986ea08d0fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#adf24d28e45870b2b63c1a986ea08d0fa">readfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:adf24d28e45870b2b63c1a986ea08d0fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output the content of the specified stored file.  <br /></td></tr>
<tr class="separator:adf24d28e45870b2b63c1a986ea08d0fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e3856db08221fb41d0ba0fbcaa13224" id="r_a0e3856db08221fb41d0ba0fbcaa13224"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e3856db08221fb41d0ba0fbcaa13224">remove_file</a> ($contenthash)</td></tr>
<tr class="memdesc:a0e3856db08221fb41d0ba0fbcaa13224"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks pool file as candidate for deleting.  <br /></td></tr>
<tr class="separator:a0e3856db08221fb41d0ba0fbcaa13224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a333ac111c8c4aa442bdd660b5cc16018" id="r_a333ac111c8c4aa442bdd660b5cc16018"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a333ac111c8c4aa442bdd660b5cc16018">supports_xsendfile</a> ()</td></tr>
<tr class="memdesc:a333ac111c8c4aa442bdd660b5cc16018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if filesystem is configured to support xsendfile.  <br /></td></tr>
<tr class="separator:a333ac111c8c4aa442bdd660b5cc16018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7e756e5661f235482109f08de90d449" id="r_ae7e756e5661f235482109f08de90d449"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ae7e756e5661f235482109f08de90d449">xsendfile</a> ($contenthash)</td></tr>
<tr class="memdesc:ae7e756e5661f235482109f08de90d449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serve file content using X-Sendfile header.  <br /></td></tr>
<tr class="separator:ae7e756e5661f235482109f08de90d449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7688c7acf20291b6f004d41c6c1cf90" id="r_af7688c7acf20291b6f004d41c6c1cf90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#af7688c7acf20291b6f004d41c6c1cf90">xsendfile_file</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:af7688c7acf20291b6f004d41c6c1cf90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serve file content using X-Sendfile header.  <br /></td></tr>
<tr class="separator:af7688c7acf20291b6f004d41c6c1cf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a1ba23173bac0663f34ff1d1bd0fd79db" id="r_a1ba23173bac0663f34ff1d1bd0fd79db"><td class="memItemLeft" align="right" valign="top"><a id="a1ba23173bac0663f34ff1d1bd0fd79db" name="a1ba23173bac0663f34ff1d1bd0fd79db"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>empty_trash</b> ()</td></tr>
<tr class="separator:a1ba23173bac0663f34ff1d1bd0fd79db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58fcff79878c855145f95ba0d3825d46" id="r_a58fcff79878c855145f95ba0d3825d46"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58fcff79878c855145f95ba0d3825d46">get_contentdir_from_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:a58fcff79878c855145f95ba0d3825d46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the content directory for the specified content hash.  <br /></td></tr>
<tr class="separator:a58fcff79878c855145f95ba0d3825d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8746caf0a7edbbf2f28fd1354871aa01" id="r_a8746caf0a7edbbf2f28fd1354871aa01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8746caf0a7edbbf2f28fd1354871aa01">get_contentpath_from_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:a8746caf0a7edbbf2f28fd1354871aa01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the content path for the specified content hash within filedir.  <br /></td></tr>
<tr class="separator:a8746caf0a7edbbf2f28fd1354871aa01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5cbac75f2f2bbb32b4ad90e5fc7c429" id="r_ab5cbac75f2f2bbb32b4ad90e5fc7c429"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5cbac75f2f2bbb32b4ad90e5fc7c429">get_fulldir_from_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:ab5cbac75f2f2bbb32b4ad90e5fc7c429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full directory to the stored file, including the path to the filedir, and the directory which the file is actually in.  <br /></td></tr>
<tr class="separator:ab5cbac75f2f2bbb32b4ad90e5fc7c429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ed81d86f25e1581ec8f263046d1aefc" id="r_a1ed81d86f25e1581ec8f263046d1aefc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ed81d86f25e1581ec8f263046d1aefc">get_fulldir_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a1ed81d86f25e1581ec8f263046d1aefc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full directory to the stored file, including the path to the filedir, and the directory which the file is actually in.  <br /></td></tr>
<tr class="separator:a1ed81d86f25e1581ec8f263046d1aefc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33a6c613ff4637dff79d043ec78389c" id="r_af33a6c613ff4637dff79d043ec78389c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#af33a6c613ff4637dff79d043ec78389c">get_imageinfo_from_path</a> ($path)</td></tr>
<tr class="memdesc:af33a6c613ff4637dff79d043ec78389c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns image information relating to the specified path or URL.  <br /></td></tr>
<tr class="separator:af33a6c613ff4637dff79d043ec78389c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea733ed385cef9749a5b4c5286a4a26a" id="r_aea733ed385cef9749a5b4c5286a4a26a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea733ed385cef9749a5b4c5286a4a26a">get_local_path_from_hash</a> ($contenthash, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:aea733ed385cef9749a5b4c5286a4a26a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full path for the specified hash, including the path to the filedir.  <br /></td></tr>
<tr class="separator:aea733ed385cef9749a5b4c5286a4a26a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c4998a6cc083fe7170d55c5d1b708b" id="r_a74c4998a6cc083fe7170d55c5d1b708b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a74c4998a6cc083fe7170d55c5d1b708b">get_remote_path_from_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:a74c4998a6cc083fe7170d55c5d1b708b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full path for the specified hash, including the path to the filedir.  <br /></td></tr>
<tr class="separator:a74c4998a6cc083fe7170d55c5d1b708b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af06cdd618e714409e404f5e8e971220c" id="r_af06cdd618e714409e404f5e8e971220c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af06cdd618e714409e404f5e8e971220c">get_trash_fulldir_from_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:af06cdd618e714409e404f5e8e971220c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full directory for the specified hash in the trash, including the path to the trashdir, and the directory which the file is actually in.  <br /></td></tr>
<tr class="separator:af06cdd618e714409e404f5e8e971220c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73239d81d25328b05e39d359e7cc7ab5" id="r_a73239d81d25328b05e39d359e7cc7ab5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73239d81d25328b05e39d359e7cc7ab5">get_trash_fullpath_from_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:a73239d81d25328b05e39d359e7cc7ab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full path for the specified hash in the trash, including the path to the trashdir.  <br /></td></tr>
<tr class="separator:a73239d81d25328b05e39d359e7cc7ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a614794bd6233fdcbe3aba47b51356fad" id="r_a614794bd6233fdcbe3aba47b51356fad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a614794bd6233fdcbe3aba47b51356fad">recover_file</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a614794bd6233fdcbe3aba47b51356fad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to recover missing content of file from trash.  <br /></td></tr>
<tr class="separator:a614794bd6233fdcbe3aba47b51356fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4fbbd8f766f22cdfb9623046ef14c36" id="r_af4fbbd8f766f22cdfb9623046ef14c36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#af4fbbd8f766f22cdfb9623046ef14c36">validate_hash_and_file_size</a> ($contenthash, $pathname)</td></tr>
<tr class="memdesc:af4fbbd8f766f22cdfb9623046ef14c36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate that the content hash matches the content hash of the file on disk.  <br /></td></tr>
<tr class="separator:af4fbbd8f766f22cdfb9623046ef14c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a6f4fa9d6241c6079bcc042fe3603b439" id="r_a6f4fa9d6241c6079bcc042fe3603b439"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f4fa9d6241c6079bcc042fe3603b439">check_file_exists_and_get_size</a> (string $hashfile)</td></tr>
<tr class="memdesc:a6f4fa9d6241c6079bcc042fe3603b439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the file exists and gets its size.  <br /></td></tr>
<tr class="separator:a6f4fa9d6241c6079bcc042fe3603b439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4d701d8a2a8a18368b668ba059c7c72" id="r_ab4d701d8a2a8a18368b668ba059c7c72"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ab4d701d8a2a8a18368b668ba059c7c72">get_file_handle_for_path</a> ($path, $type=stored_file::FILE_HANDLE_FOPEN)</td></tr>
<tr class="memdesc:ab4d701d8a2a8a18368b668ba059c7c72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a file handle for the specified path.  <br /></td></tr>
<tr class="separator:ab4d701d8a2a8a18368b668ba059c7c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b107d17e319cf5ef012b507bb5388a" id="r_a74b107d17e319cf5ef012b507bb5388a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a74b107d17e319cf5ef012b507bb5388a">is_file_removable</a> ($contenthash)</td></tr>
<tr class="memdesc:a74b107d17e319cf5ef012b507bb5388a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a file is removable.  <br /></td></tr>
<tr class="separator:a74b107d17e319cf5ef012b507bb5388a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a6317e9b827bbdbbe63796e34ccd0a276" id="r_a6317e9b827bbdbbe63796e34ccd0a276"><td class="memItemLeft" align="right" valign="top"><a id="a6317e9b827bbdbbe63796e34ccd0a276" name="a6317e9b827bbdbbe63796e34ccd0a276"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$dirpermissions</b> = null</td></tr>
<tr class="memdesc:a6317e9b827bbdbbe63796e34ccd0a276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default directory permissions for new dirs. <br /></td></tr>
<tr class="separator:a6317e9b827bbdbbe63796e34ccd0a276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7ceb5ac5d1246d482347f16861f2cc" id="r_a3e7ceb5ac5d1246d482347f16861f2cc"><td class="memItemLeft" align="right" valign="top"><a id="a3e7ceb5ac5d1246d482347f16861f2cc" name="a3e7ceb5ac5d1246d482347f16861f2cc"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$filedir</b> = null</td></tr>
<tr class="memdesc:a3e7ceb5ac5d1246d482347f16861f2cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The path to the local copy of the filedir. <br /></td></tr>
<tr class="separator:a3e7ceb5ac5d1246d482347f16861f2cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ece97d8dac87759070ef1cf006e3e1" id="r_a19ece97d8dac87759070ef1cf006e3e1"><td class="memItemLeft" align="right" valign="top"><a id="a19ece97d8dac87759070ef1cf006e3e1" name="a19ece97d8dac87759070ef1cf006e3e1"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$filepermissions</b> = null</td></tr>
<tr class="memdesc:a19ece97d8dac87759070ef1cf006e3e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default file permissions for new files. <br /></td></tr>
<tr class="separator:a19ece97d8dac87759070ef1cf006e3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1972547db09f73cc3fd14fb0637b491c" id="r_a1972547db09f73cc3fd14fb0637b491c"><td class="memItemLeft" align="right" valign="top"><a id="a1972547db09f73cc3fd14fb0637b491c" name="a1972547db09f73cc3fd14fb0637b491c"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$trashdir</b> = null</td></tr>
<tr class="memdesc:a1972547db09f73cc3fd14fb0637b491c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The path to the trashdir. <br /></td></tr>
<tr class="separator:a1972547db09f73cc3fd14fb0637b491c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4e0ffabb607ab48e29302355da95af4b" name="a4e0ffabb607ab48e29302355da95af4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e0ffabb607ab48e29302355da95af4b">&#9670;&#160;</a></span>add_file_from_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::add_file_from_path </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pathname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the supplied file to the file system. </p>
<p>Note: If overriding this function, it is advisable to store the file in the path returned by get_local_path_from_hash as there may be subsequent uses of the file in the same request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>Path to file currently on disk </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>SHA1 hash of content if known (performance only) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>(contenthash, filesize, newfile) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#ad3fd32fc383dd974258d3608d531ec1d">file_system</a>.</p>

</div>
</div>
<a id="a67e2bbbc8bfeed51b7907143765555ed" name="a67e2bbbc8bfeed51b7907143765555ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67e2bbbc8bfeed51b7907143765555ed">&#9670;&#160;</a></span>add_file_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::add_file_from_string </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$content</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a file with the supplied content to the file system. </p>
<p>Note: If overriding this function, it is advisable to store the file in the path returned by get_local_path_from_hash as there may be subsequent uses of the file in the same request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>file content - binary string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>(contenthash, filesize, newfile) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#a27dca02c966f622382c17a4e66dcf03c">file_system</a>.</p>

</div>
</div>
<a id="ab296e9d2bccccf27e7d3d0c269be4be1" name="ab296e9d2bccccf27e7d3d0c269be4be1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab296e9d2bccccf27e7d3d0c269be4be1">&#9670;&#160;</a></span>add_storedfile_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::add_storedfile_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d59/classfile__archive.html">file_archive</a></td>          <td class="paramname"><span class="paramname"><em>$filearch</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$archivepath</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add file/directory into archive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to archive </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d0/d59/classfile__archive.html" title="Each file archive type must extend this class.">file_archive</a></td><td class="paramname">$filearch</td><td>file archive instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$archivepath</td><td>pathname in archive </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7d0f2a17e2ffbe4ce377db4ac1c7a6a8" name="a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d0f2a17e2ffbe4ce377db4ac1c7a6a8">&#9670;&#160;</a></span>add_to_curl_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::add_to_curl_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;</td>          <td class="paramname"><span class="paramname"><em>$curlrequest</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds this file path to a curl request (POST only). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to add to the curl request </td></tr>
    <tr><td class="paramtype">curl</td><td class="paramname">$curlrequest</td><td>The curl request object </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>What key to use in the POST request </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td>This needs the fullpath for the storedfile :/ Can this be achieved in some other fashion? </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6f4fa9d6241c6079bcc042fe3603b439" name="a6f4fa9d6241c6079bcc042fe3603b439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f4fa9d6241c6079bcc042fe3603b439">&#9670;&#160;</a></span>check_file_exists_and_get_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static file_system_filedir::check_file_exists_and_get_size </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$hashfile</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the file exists and gets its size. </p>
<p>This function avoids a specific issue with networked file systems if they incorrectly report the file exists, but then decide it doesn't as soon as you try to get the file size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hashfile</td><td><a class="el" href="../../d1/d31/class_file.html" title="Caches data to the filesystem.">File</a> to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|null</td><td>Null if the file does not exist, or the result of filesize(), or -1 if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aedb8e141cff7bb1360d20f73b5791222" name="aedb8e141cff7bb1360d20f73b5791222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb8e141cff7bb1360d20f73b5791222">&#9670;&#160;</a></span>copy_content_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::copy_content_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$target</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy content of file to given pathname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to be copied </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$target</td><td>real path to the new file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#a18d4900d8c507bdced68fe903aaa18ed">file_system</a>.</p>

</div>
</div>
<a id="a3dd02c3a9a88efd533539f6fb1113a8d" name="a3dd02c3a9a88efd533539f6fb1113a8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd02c3a9a88efd533539f6fb1113a8d">&#9670;&#160;</a></span>cron()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::cron </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleanup the trash directory. </p>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#ad4c5da230c081300032209ff7c691886">file_system</a>.</p>

</div>
</div>
<a id="a35a5da858151b7ce51aeb2a67d51ad38" name="a35a5da858151b7ce51aeb2a67d51ad38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a5da858151b7ce51aeb2a67d51ad38">&#9670;&#160;</a></span>extract_to_pathname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::extract_to_pathname </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a></td>          <td class="paramname"><span class="paramname"><em>$packer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pathname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td>          <td class="paramname"><span class="paramname"><em>$progress</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract file to given file path (real OS filesystem), existing files are overwritten. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The archive to inspect </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td><a class="el" href="../../d1/d31/class_file.html" title="Caches data to the filesystem.">File</a> packer instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>Target directory </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td><td class="paramname">$progress</td><td>progress indicator callback or null if not required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool</td><td>List of processed files; false if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad56ab84f69ba9c9840a282668597376f" name="ad56ab84f69ba9c9840a282668597376f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad56ab84f69ba9c9840a282668597376f">&#9670;&#160;</a></span>extract_to_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::extract_to_storage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a></td>          <td class="paramname"><span class="paramname"><em>$packer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contextid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filearea</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$itemid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pathbase</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td>          <td class="paramname"><span class="paramname"><em>$progress</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract file to given file path (real OS filesystem), existing files are overwritten. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The archive to inspect </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$contextid</td><td>context ID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>component </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filearea</td><td>file area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>item ID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathbase</td><td>path base </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user ID </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td><td class="paramname">$progress</td><td>Progress indicator callback or null if not required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool</td><td>list of processed files; false if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0f5f85c088e34c7ef9179ebc32ad8ebf" name="a0f5f85c088e34c7ef9179ebc32ad8ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f5f85c088e34c7ef9179ebc32ad8ebf">&#9670;&#160;</a></span>get_content()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_content </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the content of the specified stored file. </p>
<p>Generally you will probably want to use <a class="el" href="../../df/d66/classfile__system.html#adf24d28e45870b2b63c1a986ea08d0fa" title="Output the content of the specified stored file.">readfile()</a> to serve content, and where possible you should see if you can use get_content_file_handle and work with the file stream instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full file content </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe1cf5c4f4a97ddafff94186b144de1f" name="afe1cf5c4f4a97ddafff94186b144de1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe1cf5c4f4a97ddafff94186b144de1f">&#9670;&#160;</a></span>get_content_file_handle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_content_file_handle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$type</em><span class="paramdefsep"> = </span><span class="paramdefval">stored_file::FILE_HANDLE_FOPEN</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns file handle - read only mode, no writing allowed into pool files! </p>
<p>When you want to modify a file, create a new file and delete the old one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to retrieve a handle for </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$type</td><td>Type of file handle (FILE_HANDLE_xx constant) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">resource</td><td>file handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a58fcff79878c855145f95ba0d3825d46" name="a58fcff79878c855145f95ba0d3825d46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58fcff79878c855145f95ba0d3825d46">&#9670;&#160;</a></span>get_contentdir_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_contentdir_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the content directory for the specified content hash. </p>
<p>This is the directory that the file will be in, but without the fulldir.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The directory within filedir </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8746caf0a7edbbf2f28fd1354871aa01" name="a8746caf0a7edbbf2f28fd1354871aa01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8746caf0a7edbbf2f28fd1354871aa01">&#9670;&#160;</a></span>get_contentpath_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_contentpath_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the content path for the specified content hash within filedir. </p>
<p>This does not include the filedir, and is often used by file systems as the object key for storage and retrieval.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The filepath within filedir </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab4d701d8a2a8a18368b668ba059c7c72" name="ab4d701d8a2a8a18368b668ba059c7c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4d701d8a2a8a18368b668ba059c7c72">&#9670;&#160;</a></span>get_file_handle_for_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static file_system::get_file_handle_for_path </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$path</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$type</em><span class="paramdefsep"> = </span><span class="paramdefval">stored_file::FILE_HANDLE_FOPEN</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a file handle for the specified path. </p>
<p>This abstraction should be used when overriding get_content_file_handle in a new file system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>The path to the file. This shoudl be any type of path that fopen and gzopen accept. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$type</td><td>Type of file handle (FILE_HANDLE_xx constant) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">resource</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>When an unexpected type of file handle is requested </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5cbac75f2f2bbb32b4ad90e5fc7c429" name="ab5cbac75f2f2bbb32b4ad90e5fc7c429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5cbac75f2f2bbb32b4ad90e5fc7c429">&#9670;&#160;</a></span>get_fulldir_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_fulldir_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full directory to the stored file, including the path to the filedir, and the directory which the file is actually in. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the content directory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1ed81d86f25e1581ec8f263046d1aefc" name="a1ed81d86f25e1581ec8f263046d1aefc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ed81d86f25e1581ec8f263046d1aefc">&#9670;&#160;</a></span>get_fulldir_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_fulldir_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full directory to the stored file, including the path to the filedir, and the directory which the file is actually in. </p>
<p>Note: This function does not ensure that the file is present on disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to fetch details for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the content directory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a23934d0c5451f122a77acf1bb8282e5d" name="a23934d0c5451f122a77acf1bb8282e5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23934d0c5451f122a77acf1bb8282e5d">&#9670;&#160;</a></span>get_imageinfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_imageinfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns information about image. </p>
<p>Information is determined from the file content</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to inspect </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>array with width, height and mimetype; false if not an image </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af33a6c613ff4637dff79d043ec78389c" name="af33a6c613ff4637dff79d043ec78389c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33a6c613ff4637dff79d043ec78389c">&#9670;&#160;</a></span>get_imageinfo_from_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_imageinfo_from_path </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns image information relating to the specified path or URL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>The full path of the image file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool</td><td>array that containing width, height, and mimetype or false if cannot get the image info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea733ed385cef9749a5b4c5286a4a26a" name="aea733ed385cef9749a5b4c5286a4a26a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea733ed385cef9749a5b4c5286a4a26a">&#9670;&#160;</a></span>get_local_path_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_local_path_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fetchifnotfound</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full path for the specified hash, including the path to the filedir. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the content file </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#ac2d4125ef642b1f3842f2de01ec3a962">file_system</a>.</p>

</div>
</div>
<a id="a8ce522e57fdeba336b9968e985d3311f" name="a8ce522e57fdeba336b9968e985d3311f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ce522e57fdeba336b9968e985d3311f">&#9670;&#160;</a></span>get_local_path_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_local_path_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fetchifnotfound</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a remote filepath for the specified stored file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to fetch the path for </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the content file </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#ac89f578faaf0577944f70090ccc28610">file_system</a>.</p>

</div>
</div>
<a id="afc98b69ccc359bc6cd0d8d1cb84363c8" name="afc98b69ccc359bc6cd0d8d1cb84363c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc98b69ccc359bc6cd0d8d1cb84363c8">&#9670;&#160;</a></span>get_psr_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_psr_stream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a PSR7 Stream for the specified file which implements the PSR Message StreamInterface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">StreamInterface</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74c4998a6cc083fe7170d55c5d1b708b" name="a74c4998a6cc083fe7170d55c5d1b708b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74c4998a6cc083fe7170d55c5d1b708b">&#9670;&#160;</a></span>get_remote_path_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_remote_path_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full path for the specified hash, including the path to the filedir. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the content file </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#ab00092a18af0f01cabfa63f9d03b3c7b">file_system</a>.</p>

</div>
</div>
<a id="a4c6de079ecbef03951b9cf208201bd53" name="a4c6de079ecbef03951b9cf208201bd53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c6de079ecbef03951b9cf208201bd53">&#9670;&#160;</a></span>get_remote_path_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_remote_path_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a remote filepath for the specified stored file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to serve. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>full path to pool file with file content </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#aa25672aba79a570fad23608d148fd826">file_system</a>.</p>

</div>
</div>
<a id="af06cdd618e714409e404f5e8e971220c" name="af06cdd618e714409e404f5e8e971220c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af06cdd618e714409e404f5e8e971220c">&#9670;&#160;</a></span>get_trash_fulldir_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_trash_fulldir_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full directory for the specified hash in the trash, including the path to the trashdir, and the directory which the file is actually in. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the trash directory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a73239d81d25328b05e39d359e7cc7ab5" name="a73239d81d25328b05e39d359e7cc7ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73239d81d25328b05e39d359e7cc7ab5">&#9670;&#160;</a></span>get_trash_fullpath_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::get_trash_fullpath_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full path for the specified hash in the trash, including the path to the trashdir. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the trash file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0016d02c00c2a59cc5784b9bba2b6060" name="a0016d02c00c2a59cc5784b9bba2b6060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0016d02c00c2a59cc5784b9bba2b6060">&#9670;&#160;</a></span>is_file_readable_locally_by_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_locally_by_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fetchifnotfound</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine whether the file is present on the file system somewhere given the contenthash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The contenthash of the file to check. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a526a870315ac46a3a5152b50201889cb" name="a526a870315ac46a3a5152b50201889cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526a870315ac46a3a5152b50201889cb">&#9670;&#160;</a></span>is_file_readable_locally_by_storedfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_locally_by_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fetchifnotfound</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine whether the file is present on the file system somewhere. </p>
<p>A local copy of the file <em>will</em> be fetched if $fetchifnotfound is tree.</p>
<p>The $fetchifnotfound allows you to determine the expected path of the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to ensure is available. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a66b7c0dae227f738dccda596db16c8d1" name="a66b7c0dae227f738dccda596db16c8d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66b7c0dae227f738dccda596db16c8d1">&#9670;&#160;</a></span>is_file_readable_remotely_by_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_remotely_by_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine whether the file is present locally on the file system somewhere given the contenthash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The contenthash of the file to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abf4e80af230068c630183f8262ca29f6" name="abf4e80af230068c630183f8262ca29f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf4e80af230068c630183f8262ca29f6">&#9670;&#160;</a></span>is_file_readable_remotely_by_storedfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_remotely_by_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine whether the file is present on the local file system somewhere. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to ensure is available. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74b107d17e319cf5ef012b507bb5388a" name="a74b107d17e319cf5ef012b507bb5388a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74b107d17e319cf5ef012b507bb5388a">&#9670;&#160;</a></span>is_file_removable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static file_system::is_file_removable </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether a file is removable. </p>
<p>This must be called prior to file removal.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a73ae40c4b1c8ab8f975c287ec5aeaaf2" name="a73ae40c4b1c8ab8f975c287ec5aeaaf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73ae40c4b1c8ab8f975c287ec5aeaaf2">&#9670;&#160;</a></span>is_image_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_image_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to determine whether the specified file is likely to be an image. </p>
<p>Since this relies upon the mimetype stored in the files table, there may be times when this information is not 100% accurate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac716bfd32ff89202686932955e84a130" name="ac716bfd32ff89202686932955e84a130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac716bfd32ff89202686932955e84a130">&#9670;&#160;</a></span>list_files()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::list_files </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a></td>          <td class="paramname"><span class="paramname"><em>$packer</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List contents of archive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The archive to inspect </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of file infos </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeadee305eca3b669503616af31b4f0db" name="aeadee305eca3b669503616af31b4f0db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeadee305eca3b669503616af31b4f0db">&#9670;&#160;</a></span>mimetype_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::mimetype_from_hash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filename</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the mime information for the specified stored file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The MIME type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac0fecf5d3ce1913daff424281ea117a4" name="ac0fecf5d3ce1913daff424281ea117a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fecf5d3ce1913daff424281ea117a4">&#9670;&#160;</a></span>mimetype_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::mimetype_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the mime information for the specified stored file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The stored file to retrieve mime information for </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The MIME type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf24d28e45870b2b63c1a986ea08d0fa" name="adf24d28e45870b2b63c1a986ea08d0fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf24d28e45870b2b63c1a986ea08d0fa">&#9670;&#160;</a></span>readfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::readfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Output the content of the specified stored file. </p>
<p>Note, this is different to <a class="el" href="../../df/d66/classfile__system.html#a0f5f85c088e34c7ef9179ebc32ad8ebf" title="Get the content of the specified stored file.">get_content()</a> as it uses the built-in php readfile function which is more efficient.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to serve. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a614794bd6233fdcbe3aba47b51356fad" name="a614794bd6233fdcbe3aba47b51356fad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a614794bd6233fdcbe3aba47b51356fad">&#9670;&#160;</a></span>recover_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::recover_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to recover missing content of file from trash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e3856db08221fb41d0ba0fbcaa13224" name="a0e3856db08221fb41d0ba0fbcaa13224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e3856db08221fb41d0ba0fbcaa13224">&#9670;&#160;</a></span>remove_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system_filedir::remove_file </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks pool file as candidate for deleting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../df/d66/classfile__system.html#abcba187599d2ae8204871aaba774fa59">file_system</a>.</p>

</div>
</div>
<a id="a333ac111c8c4aa442bdd660b5cc16018" name="a333ac111c8c4aa442bdd660b5cc16018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a333ac111c8c4aa442bdd660b5cc16018">&#9670;&#160;</a></span>supports_xsendfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::supports_xsendfile </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if filesystem is configured to support xsendfile. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af4fbbd8f766f22cdfb9623046ef14c36" name="af4fbbd8f766f22cdfb9623046ef14c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4fbbd8f766f22cdfb9623046ef14c36">&#9670;&#160;</a></span>validate_hash_and_file_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::validate_hash_and_file_size </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pathname</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate that the content hash matches the content hash of the file on disk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The current content hash to validate </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>The path to the file on disk </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>The content hash (it might change) and file size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae7e756e5661f235482109f08de90d449" name="ae7e756e5661f235482109f08de90d449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7e756e5661f235482109f08de90d449">&#9670;&#160;</a></span>xsendfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::xsendfile </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serve file content using X-Sendfile header. </p>
<p>Please make sure that all headers are already sent and the all access control checks passed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash of the file to be served </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af7688c7acf20291b6f004d41c6c1cf90" name="af7688c7acf20291b6f004d41c6c1cf90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7688c7acf20291b6f004d41c6c1cf90">&#9670;&#160;</a></span>xsendfile_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::xsendfile_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serve file content using X-Sendfile header. </p>
<p>Please make sure that all headers are already sent and the all access control checks passed.</p>
<p>This alternate method to <a class="el" href="../../df/d66/classfile__system.html#ae7e756e5661f235482109f08de90d449" title="Serve file content using X-Sendfile header.">xsendfile()</a> allows an alternate file system to use the full file metadata and avoid extra lookups.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/filestorage/<b>file_system_filedir.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 19 2024 02:34:43 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
